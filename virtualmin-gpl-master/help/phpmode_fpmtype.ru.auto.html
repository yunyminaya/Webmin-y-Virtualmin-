<header>Режим менеджера процессов PHP</header> PHP-FPM или FastCGI Process Manager для PHP предоставляет несколько режимов управления своими рабочими процессами. Эти режимы определяют, как PHP-FPM будет создавать, поддерживать и перерабатывать дочерние процессы, обрабатывающие запросы PHP. Режим устанавливается с помощью директивы конфигурации <tt>pm</tt> .<br><br> <b><tt>dynamic</tt></b> (по умолчанию)<br> В <tt>dynamic</tt> режиме PHP-FPM динамически регулирует количество порожденных дочерних процессов в зависимости от спроса и контролируется следующими директивами: <p></p><table><tr><td style="white-space: nowrap; vertical-align: top; padding-right: 0.5rem!important;"> <tt>pm.max_children</tt></td><td> максимальное количество детей, которые могут быть живы одновременно </td></tr><tr><td style="white-space: nowrap; vertical-align: top; padding-right: 0.5rem!important;"> <tt>pm.start_servers</tt></td><td> количество детей, созданных при запуске </td></tr><tr><td style="white-space: nowrap; vertical-align: top; padding-right: 0.5rem!important;"> <tt>pm.min_spare_servers</tt></td><td> минимальное количество дочерних элементов в состоянии ожидания (ожидающих обработки). Если количество «простаивающих» процессов меньше этого числа, будут созданы некоторые дочерние процессы. </td></tr><tr><td style="white-space: nowrap; vertical-align: top; padding-right: 0.5rem!important;"> <tt>pm.max_spare_servers</tt></td><td> максимальное количество дочерних элементов в состоянии «бездействия» (ожидающих обработки). Если количество «простаивающих» процессов больше этого числа, некоторые дочерние процессы будут убиты. </td></tr><tr><td style="white-space: nowrap; vertical-align: top; padding-right: 0.5rem!important;"> <tt>pm.max_spawn_rate</tt></td><td> максимальное количество скоростей для одновременного создания дочерних процессов</td></tr></table><p></p> Преимущества включают автоматическую настройку количества дочерних процессов в зависимости от спроса, обеспечивая оптимальное использование ресурсов. Это особенно полезно для серверов с нестабильной нагрузкой.<br><br> <b><tt>static</tt></b><br> В <tt>static</tt> режиме PHP-FPM поддерживает фиксированное количество дочерних процессов. Это число задается директивой <tt>pm.max_children</tt> . Преимущества включают стабильное использование памяти благодаря постоянному количеству дочерних процессов. Это идеально подходит для серверов со стабильной нагрузкой.<br><br> <b><tt>ondemand</tt></b><br> В режиме <tt>ondemand</tt> дочерние элементы при запуске не создаются. Вместо этого PHP-FPM будет порождать дочерние процессы только при необходимости, т. е. при наличии входящего запроса, требующего обработки. Максимальное количество детей, которые могут быть живы одновременно, контролируется директивой <tt>pm.max_children</tt> . Затем процессы завершаются после простоя в течение определенного периода времени с помощью директивы <tt>pm.process_idle_timeout</tt> . Преимущества включают снижение использования памяти в периоды низкого трафика или его отсутствия. Идеально подходит для серверов с прерывистой нагрузкой или приложений с непредсказуемым характером трафика.<br><br> Лучший режим для вашего приложения может варьироваться в зависимости от доступных ресурсов сервера, структуры трафика и конкретных характеристик приложения. Очень важно отслеживать и точно настраивать параметры для достижения оптимальной производительности.<footer>