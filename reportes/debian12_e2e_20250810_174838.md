# Prueba E2E Debian 12 - instalacion_un_comando.sh (fix awk/unbound)
Fecha: Sun Aug 10 17:48:38 UTC 2025
- ID=debian VERSION_ID=12 ARCH=aarch64

## Hostname inicial
hostname: panel.example.com
hostname -f: panel.example.com

## Ejecutando instalacion
+ set -euo pipefail
+ export TERM=xterm
+ TERM=xterm
+ RED='\033[0;31m'
+ GREEN='\033[0;32m'
+ YELLOW='\033[1;33m'
+ BLUE='\033[0;34m'
+ PURPLE='\033[0;35m'
+ CYAN='\033[0;36m'
+ WHITE='\033[1;37m'
+ NC='\033[0m'
+ SCRIPT_VERSION=2.0
+ INSTALL_LOG=/var/log/webmin-virtualmin-install.log
+ TEMP_DIR=/tmp/webmin-virtualmin-install
++ date +%Y%m%d_%H%M%S
+ BACKUP_DIR=/root/webmin-virtualmin-backup-20250810_174838
+ DISTRO=
+ VERSION=
+ PACKAGE_MANAGER=
+ WEBMIN_PORT=10000
+ VIRTUALMIN_LICENSE_KEY=
+ SKIP_CONFIRMATION=false
+ ENABLE_SSL=true
+ INSTALL_AUTHENTIC_THEME=true
+ CONFIGURE_FIREWALL=true
+ OPTIMIZE_FOR_PRODUCTION=true
+ trap 'error_handler ${LINENO} $?' ERR
+ [[ /workspace/instalacion_un_comando.sh == \/\w\o\r\k\s\p\a\c\e\/\i\n\s\t\a\l\a\c\i\o\n\_\u\n\_\c\o\m\a\n\d\o\.\s\h ]]
+ main
+ show_banner
+ clear
[H[2J[3J+ cat
═══════════════════════════════════════════════════════════════════════════════
   🚀 INSTALACIÓN AUTOMÁTICA WEBMIN Y VIRTUALMIN - UN SOLO COMANDO
   
   ✨ Completamente automático y a prueba de errores
   🛡️ Validación continua y recuperación automática
   🔧 Optimizado para Ubuntu 20.04 LTS y Debian 10+
   📦 Incluye Authentic Theme y configuración SSL
   
═══════════════════════════════════════════════════════════════════════════════
+ echo

++ dirname /var/log/webmin-virtualmin-install.log
+ mkdir -p /var/log
++ date
+ echo '=== INSTALACIÓN WEBMIN/VIRTUALMIN INICIADA Sun Aug 10 17:48:38 UTC 2025 ==='
+ log INFO 'Iniciando instalación automática v2.0'
+ local level=INFO
+ shift
+ local 'message=Iniciando instalación automática v2.0'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Iniciando instalación automática v2.0'
[0;34m[INFO][0m Iniciando instalación automática v2.0
+ echo '[2025-08-10 17:48:38] [INFO] Iniciando instalación automática v2.0'
+ log INFO 'Log de instalación: /var/log/webmin-virtualmin-install.log'
+ local level=INFO
+ shift
+ local 'message=Log de instalación: /var/log/webmin-virtualmin-install.log'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Log de instalación: /var/log/webmin-virtualmin-install.log'
[0;34m[INFO][0m Log de instalación: /var/log/webmin-virtualmin-install.log
+ echo '[2025-08-10 17:48:38] [INFO] Log de instalación: /var/log/webmin-virtualmin-install.log'
+ check_root
+ [[ 0 -ne 0 ]]
+ log SUCCESS 'Privilegios de root verificados'
+ local level=SUCCESS
+ shift
+ local 'message=Privilegios de root verificados'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Privilegios de root verificados'
[0;32m[✓][0m Privilegios de root verificados
+ echo '[2025-08-10 17:48:38] [SUCCESS] Privilegios de root verificados'
+ detect_system
+ log HEADER 'DETECCIÓN DEL SISTEMA'
+ local level=HEADER
+ shift
+ local 'message=DETECCIÓN DEL SISTEMA'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== DETECCIÓN DEL SISTEMA ===\033[0m'
[0;35m=== DETECCIÓN DEL SISTEMA ===[0m
+ echo '[2025-08-10 17:48:38] [HEADER] DETECCIÓN DEL SISTEMA'
+ [[ ! -f /etc/os-release ]]
+ source /etc/os-release
++ PRETTY_NAME='Debian GNU/Linux 12 (bookworm)'
++ NAME='Debian GNU/Linux'
++ VERSION_ID=12
++ VERSION='12 (bookworm)'
++ VERSION_CODENAME=bookworm
++ ID=debian
++ HOME_URL=https://www.debian.org/
++ SUPPORT_URL=https://www.debian.org/support
++ BUG_REPORT_URL=https://bugs.debian.org/
+ DISTRO=debian
+ VERSION=12
+ case "$DISTRO" in
+ PACKAGE_MANAGER=apt
+ [[ 12 -ge 10 ]]
+ log SUCCESS 'Sistema detectado: Debian 12 (Compatible)'
+ local level=SUCCESS
+ shift
+ local 'message=Sistema detectado: Debian 12 (Compatible)'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Sistema detectado: Debian 12 (Compatible)'
[0;32m[✓][0m Sistema detectado: Debian 12 (Compatible)
+ echo '[2025-08-10 17:48:38] [SUCCESS] Sistema detectado: Debian 12 (Compatible)'
++ uname -m
+ local arch=aarch64
+ [[ aarch64 != \x\8\6\_\6\4 ]]
+ log WARNING 'Arquitectura no optimizada: aarch64 (recomendado: x86_64)'
+ local level=WARNING
+ shift
+ local 'message=Arquitectura no optimizada: aarch64 (recomendado: x86_64)'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[1;33m[⚠]\033[0m Arquitectura no optimizada: aarch64 (recomendado: x86_64)'
[1;33m[⚠][0m Arquitectura no optimizada: aarch64 (recomendado: x86_64)
+ echo '[2025-08-10 17:48:38] [WARNING] Arquitectura no optimizada: aarch64 (recomendado: x86_64)'
+ log INFO 'Distribución: debian 12'
+ local level=INFO
+ shift
+ local 'message=Distribución: debian 12'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Distribución: debian 12'
[0;34m[INFO][0m Distribución: debian 12
+ echo '[2025-08-10 17:48:38] [INFO] Distribución: debian 12'
+ log INFO 'Arquitectura: aarch64'
+ local level=INFO
+ shift
+ local 'message=Arquitectura: aarch64'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Arquitectura: aarch64'
[0;34m[INFO][0m Arquitectura: aarch64
+ echo '[2025-08-10 17:48:38] [INFO] Arquitectura: aarch64'
+ log INFO 'Gestor de paquetes: apt'
+ local level=INFO
+ shift
+ local 'message=Gestor de paquetes: apt'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Gestor de paquetes: apt'
[0;34m[INFO][0m Gestor de paquetes: apt
+ echo '[2025-08-10 17:48:38] [INFO] Gestor de paquetes: apt'
+ ensure_fqdn
+ log HEADER 'VALIDACIÓN DE HOSTNAME (FQDN)'
+ local level=HEADER
+ shift
+ local 'message=VALIDACIÓN DE HOSTNAME (FQDN)'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== VALIDACIÓN DE HOSTNAME (FQDN) ===\033[0m'
[0;35m=== VALIDACIÓN DE HOSTNAME (FQDN) ===[0m
+ echo '[2025-08-10 17:48:38] [HEADER] VALIDACIÓN DE HOSTNAME (FQDN)'
+ local current_fqdn
++ hostname -f
+ current_fqdn=panel.example.com
+ local 'bad_suffix_re=\.local(domain)?$'
+ [[ -n panel.example.com ]]
+ local fqdn=panel.example.com
+ local short=panel
+ log INFO 'Usando FQDN_OVERRIDE: panel.example.com'
+ local level=INFO
+ shift
+ local 'message=Usando FQDN_OVERRIDE: panel.example.com'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Usando FQDN_OVERRIDE: panel.example.com'
[0;34m[INFO][0m Usando FQDN_OVERRIDE: panel.example.com
+ echo '[2025-08-10 17:48:38] [INFO] Usando FQDN_OVERRIDE: panel.example.com'
+ echo panel.example.com
+ command -v hostnamectl
+ hostnamectl set-hostname panel.example.com --static --transient --pretty
+ hostname panel.example.com
+ command -v hostname
+ hostname -F /etc/hostname
+ export HOSTNAME=panel.example.com
+ HOSTNAME=panel.example.com
+ grep -qE '^127\.0\.1\.1[[:space:]]' /etc/hosts
+ sed -i 's/^127\.0\.1\.1.*/127.0.1.1 panel.example.com panel/' /etc/hosts
+ printf '127.0.1.1 %s %s\n' panel.example.com panel
+ grep -qE '^127\.0\.0\.1[[:space:]]+localhost' /etc/hosts
+ command -v ip
++ ip -4 route get 8.8.8.8
++ awk '{for(i=1;i<=NF;i++){if($i=="src"){print $(i+1); exit}}}'
+ primary_ip=172.17.0.4
+ [[ -n 172.17.0.4 ]]
+ sed -i '\|^172.17.0.4[[:space:]]|d' /etc/hosts
+ true
+ printf '%s %s %s\n' 172.17.0.4 panel.example.com panel
+ local check_fqdn
++ hostname -f
+ check_fqdn=panel.example.com
+ [[ -z panel.example.com ]]
+ [[ panel.example.com != *.* ]]
+ log SUCCESS 'Hostname establecido: panel.example.com'
+ local level=SUCCESS
+ shift
+ local 'message=Hostname establecido: panel.example.com'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Hostname establecido: panel.example.com'
[0;32m[✓][0m Hostname establecido: panel.example.com
+ echo '[2025-08-10 17:48:38] [SUCCESS] Hostname establecido: panel.example.com'
+ return 0
+ check_network
+ log HEADER 'VERIFICACIÓN DE CONECTIVIDAD'
+ local level=HEADER
+ shift
+ local 'message=VERIFICACIÓN DE CONECTIVIDAD'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== VERIFICACIÓN DE CONECTIVIDAD ===\033[0m'
[0;35m=== VERIFICACIÓN DE CONECTIVIDAD ===[0m
+ echo '[2025-08-10 17:48:38] [HEADER] VERIFICACIÓN DE CONECTIVIDAD'
+ test_urls=('google.com' 'download.webmin.com' 'software.virtualmin.com' 'github.com')
+ local test_urls
+ for url in "${test_urls[@]}"
+ ping -c 1 -W 5 google.com
+ log SUCCESS 'Conectividad a google.com: OK'
+ local level=SUCCESS
+ shift
+ local 'message=Conectividad a google.com: OK'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Conectividad a google.com: OK'
[0;32m[✓][0m Conectividad a google.com: OK
+ echo '[2025-08-10 17:48:38] [SUCCESS] Conectividad a google.com: OK'
+ for url in "${test_urls[@]}"
+ ping -c 1 -W 5 download.webmin.com
+ log SUCCESS 'Conectividad a download.webmin.com: OK'
+ local level=SUCCESS
+ shift
+ local 'message=Conectividad a download.webmin.com: OK'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:38'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Conectividad a download.webmin.com: OK'
[0;32m[✓][0m Conectividad a download.webmin.com: OK
+ echo '[2025-08-10 17:48:38] [SUCCESS] Conectividad a download.webmin.com: OK'
+ for url in "${test_urls[@]}"
+ ping -c 1 -W 5 software.virtualmin.com
+ log SUCCESS 'Conectividad a software.virtualmin.com: OK'
+ local level=SUCCESS
+ shift
+ local 'message=Conectividad a software.virtualmin.com: OK'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Conectividad a software.virtualmin.com: OK'
[0;32m[✓][0m Conectividad a software.virtualmin.com: OK
+ echo '[2025-08-10 17:48:39] [SUCCESS] Conectividad a software.virtualmin.com: OK'
+ for url in "${test_urls[@]}"
+ ping -c 1 -W 5 github.com
+ log SUCCESS 'Conectividad a github.com: OK'
+ local level=SUCCESS
+ shift
+ local 'message=Conectividad a github.com: OK'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Conectividad a github.com: OK'
[0;32m[✓][0m Conectividad a github.com: OK
+ echo '[2025-08-10 17:48:39] [SUCCESS] Conectividad a github.com: OK'
+ nslookup google.com
+ log SUCCESS 'Resolución DNS: Funcionando'
+ local level=SUCCESS
+ shift
+ local 'message=Resolución DNS: Funcionando'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Resolución DNS: Funcionando'
[0;32m[✓][0m Resolución DNS: Funcionando
+ echo '[2025-08-10 17:48:39] [SUCCESS] Resolución DNS: Funcionando'
+ create_temp_dir
+ log INFO 'Creando directorio temporal seguro'
+ local level=INFO
+ shift
+ local 'message=Creando directorio temporal seguro'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Creando directorio temporal seguro'
[0;34m[INFO][0m Creando directorio temporal seguro
+ echo '[2025-08-10 17:48:39] [INFO] Creando directorio temporal seguro'
+ [[ -d /tmp/webmin-virtualmin-install ]]
+ rm -rf /tmp/webmin-virtualmin-install
+ mkdir -p /tmp/webmin-virtualmin-install
+ chmod 700 /tmp/webmin-virtualmin-install
+ cd /tmp/webmin-virtualmin-install
+ log SUCCESS 'Directorio temporal creado: /tmp/webmin-virtualmin-install'
+ local level=SUCCESS
+ shift
+ local 'message=Directorio temporal creado: /tmp/webmin-virtualmin-install'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Directorio temporal creado: /tmp/webmin-virtualmin-install'
[0;32m[✓][0m Directorio temporal creado: /tmp/webmin-virtualmin-install
+ echo '[2025-08-10 17:48:39] [SUCCESS] Directorio temporal creado: /tmp/webmin-virtualmin-install'
+ create_system_backup
+ log HEADER 'CREACIÓN DE BACKUP DE SEGURIDAD'
+ local level=HEADER
+ shift
+ local 'message=CREACIÓN DE BACKUP DE SEGURIDAD'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== CREACIÓN DE BACKUP DE SEGURIDAD ===\033[0m'
[0;35m=== CREACIÓN DE BACKUP DE SEGURIDAD ===[0m
+ echo '[2025-08-10 17:48:39] [HEADER] CREACIÓN DE BACKUP DE SEGURIDAD'
+ mkdir -p /root/webmin-virtualmin-backup-20250810_174838
+ configs=('/etc/apache2' '/etc/mysql' '/etc/postfix' '/etc/ssh' '/etc/webmin' '/etc/hosts' '/etc/resolv.conf')
+ local configs
+ for config in "${configs[@]}"
+ [[ -e /etc/apache2 ]]
+ cp -r /etc/apache2 /root/webmin-virtualmin-backup-20250810_174838/
+ log SUCCESS 'Backup creado: /etc/apache2'
+ local level=SUCCESS
+ shift
+ local 'message=Backup creado: /etc/apache2'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Backup creado: /etc/apache2'
[0;32m[✓][0m Backup creado: /etc/apache2
+ echo '[2025-08-10 17:48:39] [SUCCESS] Backup creado: /etc/apache2'
+ for config in "${configs[@]}"
+ [[ -e /etc/mysql ]]
+ cp -r /etc/mysql /root/webmin-virtualmin-backup-20250810_174838/
+ log SUCCESS 'Backup creado: /etc/mysql'
+ local level=SUCCESS
+ shift
+ local 'message=Backup creado: /etc/mysql'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Backup creado: /etc/mysql'
[0;32m[✓][0m Backup creado: /etc/mysql
+ echo '[2025-08-10 17:48:39] [SUCCESS] Backup creado: /etc/mysql'
+ for config in "${configs[@]}"
+ [[ -e /etc/postfix ]]
+ for config in "${configs[@]}"
+ [[ -e /etc/ssh ]]
+ for config in "${configs[@]}"
+ [[ -e /etc/webmin ]]
+ cp -r /etc/webmin /root/webmin-virtualmin-backup-20250810_174838/
+ log SUCCESS 'Backup creado: /etc/webmin'
+ local level=SUCCESS
+ shift
+ local 'message=Backup creado: /etc/webmin'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Backup creado: /etc/webmin'
[0;32m[✓][0m Backup creado: /etc/webmin
+ echo '[2025-08-10 17:48:39] [SUCCESS] Backup creado: /etc/webmin'
+ for config in "${configs[@]}"
+ [[ -e /etc/hosts ]]
+ cp -r /etc/hosts /root/webmin-virtualmin-backup-20250810_174838/
+ log SUCCESS 'Backup creado: /etc/hosts'
+ local level=SUCCESS
+ shift
+ local 'message=Backup creado: /etc/hosts'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Backup creado: /etc/hosts'
[0;32m[✓][0m Backup creado: /etc/hosts
+ echo '[2025-08-10 17:48:39] [SUCCESS] Backup creado: /etc/hosts'
+ for config in "${configs[@]}"
+ [[ -e /etc/resolv.conf ]]
+ cp -r /etc/resolv.conf /root/webmin-virtualmin-backup-20250810_174838/
+ log SUCCESS 'Backup creado: /etc/resolv.conf'
+ local level=SUCCESS
+ shift
+ local 'message=Backup creado: /etc/resolv.conf'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Backup creado: /etc/resolv.conf'
[0;32m[✓][0m Backup creado: /etc/resolv.conf
+ echo '[2025-08-10 17:48:39] [SUCCESS] Backup creado: /etc/resolv.conf'
+ dpkg --get-selections
+ apt list --installed
+ log SUCCESS 'Backup del sistema creado en: /root/webmin-virtualmin-backup-20250810_174838'
+ local level=SUCCESS
+ shift
+ local 'message=Backup del sistema creado en: /root/webmin-virtualmin-backup-20250810_174838'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Backup del sistema creado en: /root/webmin-virtualmin-backup-20250810_174838'
[0;32m[✓][0m Backup del sistema creado en: /root/webmin-virtualmin-backup-20250810_174838
+ echo '[2025-08-10 17:48:40] [SUCCESS] Backup del sistema creado en: /root/webmin-virtualmin-backup-20250810_174838'
+ update_system
+ log HEADER 'ACTUALIZACIÓN DEL SISTEMA'
+ local level=HEADER
+ shift
+ local 'message=ACTUALIZACIÓN DEL SISTEMA'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:40'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== ACTUALIZACIÓN DEL SISTEMA ===\033[0m'
[0;35m=== ACTUALIZACIÓN DEL SISTEMA ===[0m
+ echo '[2025-08-10 17:48:40] [HEADER] ACTUALIZACIÓN DEL SISTEMA'
+ export DEBIAN_FRONTEND=noninteractive
+ DEBIAN_FRONTEND=noninteractive
+ log INFO 'Verificando integridad de paquetes...'
+ local level=INFO
+ shift
+ local 'message=Verificando integridad de paquetes...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:40'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Verificando integridad de paquetes...'
[0;34m[INFO][0m Verificando integridad de paquetes...
+ echo '[2025-08-10 17:48:40] [INFO] Verificando integridad de paquetes...'
+ dpkg --configure -a
+ apt-get -f install -y
Reading package lists...
Building dependency tree...
Reading state information...
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ local retries=3
+ [[ 3 -gt 0 ]]
+ log INFO 'Actualizando lista de paquetes (intento: 1)'
+ local level=INFO
+ shift
+ local 'message=Actualizando lista de paquetes (intento: 1)'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:40'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Actualizando lista de paquetes (intento: 1)'
[0;34m[INFO][0m Actualizando lista de paquetes (intento: 1)
+ echo '[2025-08-10 17:48:40] [INFO] Actualizando lista de paquetes (intento: 1)'
+ apt-get update -y
Hit:1 http://deb.debian.org/debian bookworm InRelease
Hit:2 http://deb.debian.org/debian bookworm-updates InRelease
Hit:3 http://deb.debian.org/debian-security bookworm-security InRelease
Ign:4 https://download.webmin.com/download/repository sarge InRelease
Hit:5 https://download.webmin.com/download/repository sarge Release
Reading package lists...
+ log SUCCESS 'Lista de paquetes actualizada'
+ local level=SUCCESS
+ shift
+ local 'message=Lista de paquetes actualizada'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:42'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Lista de paquetes actualizada'
[0;32m[✓][0m Lista de paquetes actualizada
+ echo '[2025-08-10 17:48:42] [SUCCESS] Lista de paquetes actualizada'
+ break
+ log INFO 'Actualizando paquetes del sistema...'
+ local level=INFO
+ shift
+ local 'message=Actualizando paquetes del sistema...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:42'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Actualizando paquetes del sistema...'
[0;34m[INFO][0m Actualizando paquetes del sistema...
+ echo '[2025-08-10 17:48:42] [INFO] Actualizando paquetes del sistema...'
+ apt-get upgrade -y -o Dpkg::Options::=--force-confdef -o Dpkg::Options::=--force-confold
Reading package lists...
Building dependency tree...
Reading state information...
Calculating upgrade...
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log INFO 'Instalando dependencias esenciales...'
+ local level=INFO
+ shift
+ local 'message=Instalando dependencias esenciales...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:42'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Instalando dependencias esenciales...'
[0;34m[INFO][0m Instalando dependencias esenciales...
+ echo '[2025-08-10 17:48:42] [INFO] Instalando dependencias esenciales...'
+ essential_packages=('curl' 'wget' 'gnupg2' 'software-properties-common' 'apt-transport-https' 'ca-certificates' 'lsb-release' 'unzip' 'perl' 'perl-modules' 'libnet-ssleay-perl' 'openssl' 'libauthen-pam-perl' 'libpam-runtime' 'libio-pty-perl' 'python3' 'python3-pip' 'ntpdate' 'chrony' 'procps' 'psmisc' 'iproute2' 'iputils-ping' 'net-tools' 'dnsutils' 'rsyslog' 'cron')
+ local essential_packages
+ for package in "${essential_packages[@]}"
+ apt-get install -y curl
Reading package lists...
Building dependency tree...
Reading state information...
curl is already the newest version (7.88.1-10+deb12u12).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: curl'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: curl'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:43'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: curl'
[0;32m[✓][0m Instalado: curl
+ echo '[2025-08-10 17:48:43] [SUCCESS] Instalado: curl'
+ for package in "${essential_packages[@]}"
+ apt-get install -y wget
Reading package lists...
Building dependency tree...
Reading state information...
wget is already the newest version (1.21.3-1+deb12u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: wget'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: wget'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:43'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: wget'
[0;32m[✓][0m Instalado: wget
+ echo '[2025-08-10 17:48:43] [SUCCESS] Instalado: wget'
+ for package in "${essential_packages[@]}"
+ apt-get install -y gnupg2
Reading package lists...
Building dependency tree...
Reading state information...
gnupg2 is already the newest version (2.2.40-1.1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: gnupg2'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: gnupg2'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:44'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: gnupg2'
[0;32m[✓][0m Instalado: gnupg2
+ echo '[2025-08-10 17:48:44] [SUCCESS] Instalado: gnupg2'
+ for package in "${essential_packages[@]}"
+ apt-get install -y software-properties-common
Reading package lists...
Building dependency tree...
Reading state information...
software-properties-common is already the newest version (0.99.30-4.1~deb12u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: software-properties-common'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: software-properties-common'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:44'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: software-properties-common'
[0;32m[✓][0m Instalado: software-properties-common
+ echo '[2025-08-10 17:48:44] [SUCCESS] Instalado: software-properties-common'
+ for package in "${essential_packages[@]}"
+ apt-get install -y apt-transport-https
Reading package lists...
Building dependency tree...
Reading state information...
apt-transport-https is already the newest version (2.6.1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: apt-transport-https'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: apt-transport-https'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:45'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: apt-transport-https'
[0;32m[✓][0m Instalado: apt-transport-https
+ echo '[2025-08-10 17:48:45] [SUCCESS] Instalado: apt-transport-https'
+ for package in "${essential_packages[@]}"
+ apt-get install -y ca-certificates
Reading package lists...
Building dependency tree...
Reading state information...
ca-certificates is already the newest version (20230311+deb12u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: ca-certificates'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: ca-certificates'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:45'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: ca-certificates'
[0;32m[✓][0m Instalado: ca-certificates
+ echo '[2025-08-10 17:48:45] [SUCCESS] Instalado: ca-certificates'
+ for package in "${essential_packages[@]}"
+ apt-get install -y lsb-release
Reading package lists...
Building dependency tree...
Reading state information...
lsb-release is already the newest version (12.0-1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: lsb-release'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: lsb-release'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:46'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: lsb-release'
[0;32m[✓][0m Instalado: lsb-release
+ echo '[2025-08-10 17:48:46] [SUCCESS] Instalado: lsb-release'
+ for package in "${essential_packages[@]}"
+ apt-get install -y unzip
Reading package lists...
Building dependency tree...
Reading state information...
unzip is already the newest version (6.0-28).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: unzip'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: unzip'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:46'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: unzip'
[0;32m[✓][0m Instalado: unzip
+ echo '[2025-08-10 17:48:46] [SUCCESS] Instalado: unzip'
+ for package in "${essential_packages[@]}"
+ apt-get install -y perl
Reading package lists...
Building dependency tree...
Reading state information...
perl is already the newest version (5.36.0-7+deb12u2).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: perl'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: perl'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:47'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: perl'
[0;32m[✓][0m Instalado: perl
+ echo '[2025-08-10 17:48:47] [SUCCESS] Instalado: perl'
+ for package in "${essential_packages[@]}"
+ apt-get install -y perl-modules
Reading package lists...
Building dependency tree...
Reading state information...
perl-modules-5.36 is already the newest version (5.36.0-7+deb12u2).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: perl-modules'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: perl-modules'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:47'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: perl-modules'
[0;32m[✓][0m Instalado: perl-modules
+ echo '[2025-08-10 17:48:47] [SUCCESS] Instalado: perl-modules'
+ for package in "${essential_packages[@]}"
+ apt-get install -y libnet-ssleay-perl
Reading package lists...
Building dependency tree...
Reading state information...
libnet-ssleay-perl is already the newest version (1.92-2+b1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: libnet-ssleay-perl'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: libnet-ssleay-perl'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:48'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: libnet-ssleay-perl'
[0;32m[✓][0m Instalado: libnet-ssleay-perl
+ echo '[2025-08-10 17:48:48] [SUCCESS] Instalado: libnet-ssleay-perl'
+ for package in "${essential_packages[@]}"
+ apt-get install -y openssl
Reading package lists...
Building dependency tree...
Reading state information...
openssl is already the newest version (3.0.17-1~deb12u2).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: openssl'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: openssl'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:48'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: openssl'
[0;32m[✓][0m Instalado: openssl
+ echo '[2025-08-10 17:48:48] [SUCCESS] Instalado: openssl'
+ for package in "${essential_packages[@]}"
+ apt-get install -y libauthen-pam-perl
Reading package lists...
Building dependency tree...
Reading state information...
libauthen-pam-perl is already the newest version (0.16-5+b1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: libauthen-pam-perl'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: libauthen-pam-perl'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:49'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: libauthen-pam-perl'
[0;32m[✓][0m Instalado: libauthen-pam-perl
+ echo '[2025-08-10 17:48:49] [SUCCESS] Instalado: libauthen-pam-perl'
+ for package in "${essential_packages[@]}"
+ apt-get install -y libpam-runtime
Reading package lists...
Building dependency tree...
Reading state information...
libpam-runtime is already the newest version (1.5.2-6+deb12u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: libpam-runtime'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: libpam-runtime'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:49'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: libpam-runtime'
[0;32m[✓][0m Instalado: libpam-runtime
+ echo '[2025-08-10 17:48:49] [SUCCESS] Instalado: libpam-runtime'
+ for package in "${essential_packages[@]}"
+ apt-get install -y libio-pty-perl
Reading package lists...
Building dependency tree...
Reading state information...
libio-pty-perl is already the newest version (1:1.17-1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: libio-pty-perl'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: libio-pty-perl'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:50'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: libio-pty-perl'
[0;32m[✓][0m Instalado: libio-pty-perl
+ echo '[2025-08-10 17:48:50] [SUCCESS] Instalado: libio-pty-perl'
+ for package in "${essential_packages[@]}"
+ apt-get install -y python3
Reading package lists...
Building dependency tree...
Reading state information...
python3 is already the newest version (3.11.2-1+b1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: python3'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: python3'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:50'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: python3'
[0;32m[✓][0m Instalado: python3
+ echo '[2025-08-10 17:48:50] [SUCCESS] Instalado: python3'
+ for package in "${essential_packages[@]}"
+ apt-get install -y python3-pip
Reading package lists...
Building dependency tree...
Reading state information...
python3-pip is already the newest version (23.0.1+dfsg-1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: python3-pip'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: python3-pip'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:51'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: python3-pip'
[0;32m[✓][0m Instalado: python3-pip
+ echo '[2025-08-10 17:48:51] [SUCCESS] Instalado: python3-pip'
+ for package in "${essential_packages[@]}"
+ apt-get install -y ntpdate
Reading package lists...
Building dependency tree...
Reading state information...
ntpdate is already the newest version (1:4.2.8p15+dfsg-2~1.2.2+dfsg1-1+deb12u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: ntpdate'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: ntpdate'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:51'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: ntpdate'
[0;32m[✓][0m Instalado: ntpdate
+ echo '[2025-08-10 17:48:51] [SUCCESS] Instalado: ntpdate'
+ for package in "${essential_packages[@]}"
+ apt-get install -y chrony
Reading package lists...
Building dependency tree...
Reading state information...
chrony is already the newest version (4.3-2+deb12u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: chrony'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: chrony'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:52'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: chrony'
[0;32m[✓][0m Instalado: chrony
+ echo '[2025-08-10 17:48:52] [SUCCESS] Instalado: chrony'
+ for package in "${essential_packages[@]}"
+ apt-get install -y procps
Reading package lists...
Building dependency tree...
Reading state information...
The following additional packages will be installed:
  libproc2-0
The following NEW packages will be installed:
  libproc2-0 procps
0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 758 kB of archives.
After this operation, 3010 kB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bookworm/main arm64 libproc2-0 arm64 2:4.0.2-3 [60.1 kB]
Get:2 http://deb.debian.org/debian bookworm/main arm64 procps arm64 2:4.0.2-3 [698 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 758 kB in 1s (1104 kB/s)
Selecting previously unselected package libproc2-0:arm64.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 50560 files and directories currently installed.)
Preparing to unpack .../libproc2-0_2%3a4.0.2-3_arm64.deb ...
Unpacking libproc2-0:arm64 (2:4.0.2-3) ...
Selecting previously unselected package procps.
Preparing to unpack .../procps_2%3a4.0.2-3_arm64.deb ...
Unpacking procps (2:4.0.2-3) ...
Setting up libproc2-0:arm64 (2:4.0.2-3) ...
Setting up procps (2:4.0.2-3) ...
Processing triggers for libc-bin (2.36-9+deb12u10) ...
+ log SUCCESS 'Instalado: procps'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: procps'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:53'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: procps'
[0;32m[✓][0m Instalado: procps
+ echo '[2025-08-10 17:48:53] [SUCCESS] Instalado: procps'
+ for package in "${essential_packages[@]}"
+ apt-get install -y psmisc
Reading package lists...
Building dependency tree...
Reading state information...
psmisc is already the newest version (23.6-1).
psmisc set to manually installed.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: psmisc'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: psmisc'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:54'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: psmisc'
[0;32m[✓][0m Instalado: psmisc
+ echo '[2025-08-10 17:48:54] [SUCCESS] Instalado: psmisc'
+ for package in "${essential_packages[@]}"
+ apt-get install -y iproute2
Reading package lists...
Building dependency tree...
Reading state information...
iproute2 is already the newest version (6.1.0-3).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: iproute2'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: iproute2'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:54'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: iproute2'
[0;32m[✓][0m Instalado: iproute2
+ echo '[2025-08-10 17:48:54] [SUCCESS] Instalado: iproute2'
+ for package in "${essential_packages[@]}"
+ apt-get install -y iputils-ping
Reading package lists...
Building dependency tree...
Reading state information...
iputils-ping is already the newest version (3:20221126-1+deb12u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: iputils-ping'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: iputils-ping'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:55'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: iputils-ping'
[0;32m[✓][0m Instalado: iputils-ping
+ echo '[2025-08-10 17:48:55] [SUCCESS] Instalado: iputils-ping'
+ for package in "${essential_packages[@]}"
+ apt-get install -y net-tools
Reading package lists...
Building dependency tree...
Reading state information...
net-tools is already the newest version (2.10-0.1+deb12u2).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: net-tools'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: net-tools'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:55'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: net-tools'
[0;32m[✓][0m Instalado: net-tools
+ echo '[2025-08-10 17:48:55] [SUCCESS] Instalado: net-tools'
+ for package in "${essential_packages[@]}"
+ apt-get install -y dnsutils
Reading package lists...
Building dependency tree...
Reading state information...
dnsutils is already the newest version (1:9.18.33-1~deb12u2).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: dnsutils'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: dnsutils'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:56'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: dnsutils'
[0;32m[✓][0m Instalado: dnsutils
+ echo '[2025-08-10 17:48:56] [SUCCESS] Instalado: dnsutils'
+ for package in "${essential_packages[@]}"
+ apt-get install -y rsyslog
Reading package lists...
Building dependency tree...
Reading state information...
rsyslog is already the newest version (8.2302.0-1+deb12u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: rsyslog'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: rsyslog'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:56'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: rsyslog'
[0;32m[✓][0m Instalado: rsyslog
+ echo '[2025-08-10 17:48:56] [SUCCESS] Instalado: rsyslog'
+ for package in "${essential_packages[@]}"
+ apt-get install -y cron
Reading package lists...
Building dependency tree...
Reading state information...
cron is already the newest version (3.0pl1-162).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Instalado: cron'
+ local level=SUCCESS
+ shift
+ local 'message=Instalado: cron'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:57'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Instalado: cron'
[0;32m[✓][0m Instalado: cron
+ echo '[2025-08-10 17:48:57] [SUCCESS] Instalado: cron'
+ log SUCCESS 'Sistema actualizado correctamente'
+ local level=SUCCESS
+ shift
+ local 'message=Sistema actualizado correctamente'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:57'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Sistema actualizado correctamente'
[0;32m[✓][0m Sistema actualizado correctamente
+ echo '[2025-08-10 17:48:57] [SUCCESS] Sistema actualizado correctamente'
+ configure_firewall
+ [[ true != \t\r\u\e ]]
+ log HEADER 'CONFIGURACIÓN DEL FIREWALL'
+ local level=HEADER
+ shift
+ local 'message=CONFIGURACIÓN DEL FIREWALL'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:48:57'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== CONFIGURACIÓN DEL FIREWALL ===\033[0m'
[0;35m=== CONFIGURACIÓN DEL FIREWALL ===[0m
+ echo '[2025-08-10 17:48:57] [HEADER] CONFIGURACIÓN DEL FIREWALL'
+ command -v ufw
+ ufw default deny incoming
Default incoming policy changed to 'deny'
(be sure to update your rules accordingly)
+ ufw default allow outgoing
Default outgoing policy changed to 'allow'
(be sure to update your rules accordingly)
+ ufw allow ssh
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 10000
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 20000
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 80
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 443
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 25
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 465
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 587
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 53
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 53/udp
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 21
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 110
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 143
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 993
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw allow 995
Skipping adding existing rule
Skipping adding existing rule (v6)
+ ufw --force enable
Firewall is active and enabled on system startup
+ log SUCCESS 'Firewall configurado correctamente'
+ local level=SUCCESS
+ shift
+ local 'message=Firewall configurado correctamente'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:01'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Firewall configurado correctamente'
[0;32m[✓][0m Firewall configurado correctamente
+ echo '[2025-08-10 17:49:01] [SUCCESS] Firewall configurado correctamente'
+ ufw status
Status: active

To                         Action      From
--                         ------      ----
22/tcp                     ALLOW       Anywhere                  
10000                      ALLOW       Anywhere                  
20000                      ALLOW       Anywhere                  
80                         ALLOW       Anywhere                  
443                        ALLOW       Anywhere                  
25                         ALLOW       Anywhere                  
465                        ALLOW       Anywhere                  
587                        ALLOW       Anywhere                  
53                         ALLOW       Anywhere                  
53/udp                     ALLOW       Anywhere                  
21                         ALLOW       Anywhere                  
110                        ALLOW       Anywhere                  
143                        ALLOW       Anywhere                  
993                        ALLOW       Anywhere                  
995                        ALLOW       Anywhere                  
22/tcp (v6)                ALLOW       Anywhere (v6)             
10000 (v6)                 ALLOW       Anywhere (v6)             
20000 (v6)                 ALLOW       Anywhere (v6)             
80 (v6)                    ALLOW       Anywhere (v6)             
443 (v6)                   ALLOW       Anywhere (v6)             
25 (v6)                    ALLOW       Anywhere (v6)             
465 (v6)                   ALLOW       Anywhere (v6)             
587 (v6)                   ALLOW       Anywhere (v6)             
53 (v6)                    ALLOW       Anywhere (v6)             
53/udp (v6)                ALLOW       Anywhere (v6)             
21 (v6)                    ALLOW       Anywhere (v6)             
110 (v6)                   ALLOW       Anywhere (v6)             
143 (v6)                   ALLOW       Anywhere (v6)             
993 (v6)                   ALLOW       Anywhere (v6)             
995 (v6)                   ALLOW       Anywhere (v6)             

+ repair_permissions
+ log INFO 'Reparando permisos de archivos y carpetas críticos...'
+ local level=INFO
+ shift
+ local 'message=Reparando permisos de archivos y carpetas críticos...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:01'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Reparando permisos de archivos y carpetas críticos...'
[0;34m[INFO][0m Reparando permisos de archivos y carpetas críticos...
+ echo '[2025-08-10 17:49:01] [INFO] Reparando permisos de archivos y carpetas críticos...'
+ chown -R root:root /etc/webmin
+ chown -R root:root /usr/share/webmin
+ chmod -R 750 /etc/webmin
+ chmod -R 755 /usr/share/webmin
+ install_webmin
+ log HEADER 'INSTALACIÓN DE WEBMIN'
+ local level=HEADER
+ shift
+ local 'message=INSTALACIÓN DE WEBMIN'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:02'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== INSTALACIÓN DE WEBMIN ===\033[0m'
[0;35m=== INSTALACIÓN DE WEBMIN ===[0m
+ echo '[2025-08-10 17:49:02] [HEADER] INSTALACIÓN DE WEBMIN'
+ log INFO 'Configurando repositorio oficial de Webmin...'
+ local level=INFO
+ shift
+ local 'message=Configurando repositorio oficial de Webmin...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:02'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Configurando repositorio oficial de Webmin...'
[0;34m[INFO][0m Configurando repositorio oficial de Webmin...
+ echo '[2025-08-10 17:49:02] [INFO] Configurando repositorio oficial de Webmin...'
+ cd /tmp
+ curl -fsSL https://download.webmin.com/jcameron-key.asc
+ tee /usr/share/keyrings/webmin.gpg
+ gpg --dearmor
+ [[ ! -f /etc/apt/sources.list.d/webmin.list ]]
+ apt-get update
Hit:1 http://deb.debian.org/debian bookworm InRelease
Hit:2 http://deb.debian.org/debian bookworm-updates InRelease
Hit:3 http://deb.debian.org/debian-security bookworm-security InRelease
Ign:4 https://download.webmin.com/download/repository sarge InRelease
Hit:5 https://download.webmin.com/download/repository sarge Release
Reading package lists...
+ echo 'webmin webmin/redirect boolean false'
+ debconf-set-selections
+ echo 'webmin webmin/restart boolean true'
+ debconf-set-selections
+ log INFO 'Instalando Webmin...'
+ local level=INFO
+ shift
+ local 'message=Instalando Webmin...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:04'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Instalando Webmin...'
[0;34m[INFO][0m Instalando Webmin...
+ echo '[2025-08-10 17:49:04] [INFO] Instalando Webmin...'
+ apt-get install -y webmin
Reading package lists...
Building dependency tree...
Reading state information...
webmin is already the newest version (2.402).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ log SUCCESS 'Webmin instalado correctamente'
+ local level=SUCCESS
+ shift
+ local 'message=Webmin instalado correctamente'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:05'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Webmin instalado correctamente'
[0;32m[✓][0m Webmin instalado correctamente
+ echo '[2025-08-10 17:49:05] [SUCCESS] Webmin instalado correctamente'
+ systemctl is-active --quiet webmin
+ log SUCCESS 'Servicio Webmin activo'
+ local level=SUCCESS
+ shift
+ local 'message=Servicio Webmin activo'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:05'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Servicio Webmin activo'
[0;32m[✓][0m Servicio Webmin activo
+ echo '[2025-08-10 17:49:05] [SUCCESS] Servicio Webmin activo'
+ ss -tlnp
+ grep -q ':10000\b'
+ log SUCCESS 'Webmin escuchando en puerto 10000'
+ local level=SUCCESS
+ shift
+ local 'message=Webmin escuchando en puerto 10000'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:05'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Webmin escuchando en puerto 10000'
[0;32m[✓][0m Webmin escuchando en puerto 10000
+ echo '[2025-08-10 17:49:05] [SUCCESS] Webmin escuchando en puerto 10000'
+ install_virtualmin
+ log HEADER 'INSTALACIÓN DE VIRTUALMIN'
+ local level=HEADER
+ shift
+ local 'message=INSTALACIÓN DE VIRTUALMIN'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:05'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== INSTALACIÓN DE VIRTUALMIN ===\033[0m'
[0;35m=== INSTALACIÓN DE VIRTUALMIN ===[0m
+ echo '[2025-08-10 17:49:05] [HEADER] INSTALACIÓN DE VIRTUALMIN'
+ cd /tmp
+ log INFO 'Descargando script oficial de Virtualmin...'
+ local level=INFO
+ shift
+ local 'message=Descargando script oficial de Virtualmin...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:05'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Descargando script oficial de Virtualmin...'
[0;34m[INFO][0m Descargando script oficial de Virtualmin...
+ echo '[2025-08-10 17:49:05] [INFO] Descargando script oficial de Virtualmin...'
+ wget -O virtualmin-install.sh https://software.virtualmin.com/gpl/scripts/install.sh
--2025-08-10 17:49:05--  https://software.virtualmin.com/gpl/scripts/install.sh
Resolving software.virtualmin.com (software.virtualmin.com)... 51.158.66.131
Connecting to software.virtualmin.com (software.virtualmin.com)|51.158.66.131|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 50052 (49K) [application/x-sh]
Saving to: 'virtualmin-install.sh'

     0K .......... .......... .......... .......... ........  100%  190K=0.3s

2025-08-10 17:49:06 (190 KB/s) - 'virtualmin-install.sh' saved [50052/50052]

+ log SUCCESS 'Script de Virtualmin descargado'
+ local level=SUCCESS
+ shift
+ local 'message=Script de Virtualmin descargado'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:06'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Script de Virtualmin descargado'
[0;32m[✓][0m Script de Virtualmin descargado
+ echo '[2025-08-10 17:49:06] [SUCCESS] Script de Virtualmin descargado'
+ chmod +x virtualmin-install.sh
+ export VIRTUALMIN_NONINTERACTIVE=1
+ VIRTUALMIN_NONINTERACTIVE=1
+ export VIRTUALMIN_CONFIG_SYSTEM=1
+ VIRTUALMIN_CONFIG_SYSTEM=1
+ log INFO 'Ejecutando instalación de Virtualmin (esto puede tomar varios minutos)...'
+ local level=INFO
+ shift
+ local 'message=Ejecutando instalación de Virtualmin (esto puede tomar varios minutos)...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:49:06'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Ejecutando instalación de Virtualmin (esto puede tomar varios minutos)...'
[0;34m[INFO][0m Ejecutando instalación de Virtualmin (esto puede tomar varios minutos)...
+ echo '[2025-08-10 17:49:06] [INFO] Ejecutando instalación de Virtualmin (esto puede tomar varios minutos)...'
+ ./virtualmin-install.sh --bundle LAMP --force
[36m[INFO](B[m Log will be written to: /tmp/virtualmin-install.log
[36m[INFO](B[m Started installation log in /tmp/virtualmin-install.log
▣◻◻◻ Phase 1 of 4: Check
Checking system time                                                        [?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m88[?12l[?25h[?12l[?25h OK 
Checking Perl installation                                                  [?25l7[36m[>-](B[m88[?12l[?25h[?12l[?25h OK 
Checking CA certificates package                                            [?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m88[?12l[?25h[?12l[?25h OK 
Checking HTTP client                                                        [?25l7[36m[>-](B[m88[?12l[?25h[?12l[?25h OK 
Checking GPG package                                                        [?25l7[36m[>-](B[m88[?12l[?25h[?12l[?25h OK 

▣▣◻◻ Phase 2 of 4: Setup
sed: cannot rename /etc/sed4PN1II: Device or resource busy
Downloading Virtualmin 7 key                                                [?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m88[?12l[?25h[?12l[?25h OK 
Installing Virtualmin 7 key                                                 [?25l7[36m[>-](B[m87[36m[->](B[m88[?12l[?25h[?12l[?25h OK 
Downloading repository metadata                                             [?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m88[?12l[?25h[?12l[?25h OK 
Disabling cdrom: repositories                                               [?25l7[36m[>-](B[m88[?12l[?25h[?12l[?25h OK 
Cleaning up software repo metadata                                          [?25l7[36m[>-](B[m88[?12l[?25h[?12l[?25h OK 

▣▣▣◻ Phase 3 of 4: Installation
Checking and installing system package updates                              [?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m88[?12l[?25h[?12l[?25h OK 
Installing Virtualmin 7 and all related packages                            [?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m8[?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m88[?12l[?25h[?12l[?25h OK 
Installing Virtualmin 7 related package updates                             [?25l7[36m[>-](B[m87[36m[->](B[m87[36m[--](B[m87[36m[--](B[m88[?12l[?25h[?12l[?25h OK 

▣▣▣▣ Phase 4 of 4: Configuration
[[33m1[0m/[32m21[0m] Configuring AWStats                                                  [?25l[36m▒▒▒[0m[36m█▒▒[0m[?25h[37;42m ✔ [0m
[[33m2[0m/[32m21[0m] Configuring Apache                                                   [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[?25h[37;42m ✔ [0m
[[33m3[0m/[32m21[0m] Configuring Bind                                                     [?25l[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m4[0m/[32m21[0m] Configuring ClamAV                                                   [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m5[0m/[32m21[0m] Configuring Dovecot                                                  [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[?25h[37;42m ✔ [0m
[[33m6[0m/[32m21[0m] Configuring Etckeeper                                                [?25l[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m7[0m/[32m21[0m] Configuring Firewalld                                                [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m8[0m/[32m21[0m] Configuring MariaDB                                                  [?25l[36m▒▒▒[0m[36m█▒▒[0m[?25h[37;42m ✔ [0m
[[33m9[0m/[32m21[0m] Configuring Postfix                                                  [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[?25h[37;42m ✔ [0m
[[33m10[0m/[32m21[0m] Configuring ProFTPd                                                 [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m11[0m/[32m21[0m] Configuring Procmail                                                [?25l[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m12[0m/[32m21[0m] Configuring Quotas                                                  [?25l[36m▒▒▒[0m[36m█▒▒[0m       
The filesystem / could not be remounted with quotas enabled.
You may need to reboot your system, and/or enable quotas
manually in Webmin/System/Disk Quotas module.                                  [?25h[37;43m ⚠ [0m
[[33m13[0m/[32m21[0m] Configuring SASL                                                    [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m14[0m/[32m21[0m] Configuring Shells                                                  [?25l[36m▒▒▒[0m[36m█▒▒[0m[?25h[37;42m ✔ [0m
[[33m15[0m/[32m21[0m] Configuring SpamAssassin                                            [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[?25h[37;42m ✔ [0m
[[33m16[0m/[32m21[0m] Configuring Status                                                  [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[?25h[37;42m ✔ [0m
[[33m17[0m/[32m21[0m] Configuring Upgrade                                                 [?25l[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m18[0m/[32m21[0m] Configuring Usermin                                                 [?25l[36m▒▒▒[0m[?25h[37;42m ✔ [0m
[[33m19[0m/[32m21[0m] Configuring Webmin                                                  [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[?25h[37;42m ✔ [0m
[[33m20[0m/[32m21[0m] Configuring Fail2banFirewalld                                       [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[?25h[37;42m ✔ [0m
[[33m21[0m/[32m21[0m] Configuring Virtualmin                                              [?25l[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[36m▒▒▒[0m[36m█▒▒[0m[36m██▒[0m[36m███[0m[36m▒██[0m[36m▒▒█[0m[36m▒▒▒[0m[?25h[37;42m ✔ [0m
▣▣▣ Cleaning up

[32m[SUCCESS](B[m Installation Complete!
[32m[SUCCESS](B[m If there were no errors above, Virtualmin should be ready
[32m[SUCCESS](B[m to configure at https://panel.example.com:10000 (or https://172.17.0.4:10000).
[32m[SUCCESS](B[m You may receive a security warning in your browser on your first visit.

(B[m[?12l[?25h+ log SUCCESS 'Virtualmin instalado correctamente'
+ local level=SUCCESS
+ shift
+ local 'message=Virtualmin instalado correctamente'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:20'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Virtualmin instalado correctamente'
[0;32m[✓][0m Virtualmin instalado correctamente
+ echo '[2025-08-10 17:54:20] [SUCCESS] Virtualmin instalado correctamente'
+ [[ -f /usr/sbin/virtualmin ]]
+ log SUCCESS 'Comando virtualmin disponible'
+ local level=SUCCESS
+ shift
+ local 'message=Comando virtualmin disponible'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:20'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Comando virtualmin disponible'
[0;32m[✓][0m Comando virtualmin disponible
+ echo '[2025-08-10 17:54:20] [SUCCESS] Comando virtualmin disponible'
+ [[ -d /etc/webmin/virtual-server ]]
+ log SUCCESS 'Módulo Virtualmin instalado en Webmin'
+ local level=SUCCESS
+ shift
+ local 'message=Módulo Virtualmin instalado en Webmin'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:20'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Módulo Virtualmin instalado en Webmin'
[0;32m[✓][0m Módulo Virtualmin instalado en Webmin
+ echo '[2025-08-10 17:54:20] [SUCCESS] Módulo Virtualmin instalado en Webmin'
+ ensure_public_access
+ log HEADER 'EXPOSICIÓN PÚBLICA DE SERVICIOS'
+ local level=HEADER
+ shift
+ local 'message=EXPOSICIÓN PÚBLICA DE SERVICIOS'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:20'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== EXPOSICIÓN PÚBLICA DE SERVICIOS ===\033[0m'
[0;35m=== EXPOSICIÓN PÚBLICA DE SERVICIOS ===[0m
+ echo '[2025-08-10 17:54:20] [HEADER] EXPOSICIÓN PÚBLICA DE SERVICIOS'
+ systemctl enable --now webmin
+ systemctl list-unit-files
+ grep -q '^usermin\.service'
+ command -v ufw
+ ufw allow 10000/tcp
+ true
+ ufw allow 20000/tcp
+ true
+ ufw allow 80/tcp
+ true
+ ufw allow 443/tcp
+ true
+ ss -tlnp
+ grep -Eq ':(10000|20000|80|443)\b'
+ log SUCCESS 'Puertos públicos habilitados (10000, 20000, 80, 443)'
+ local level=SUCCESS
+ shift
+ local 'message=Puertos públicos habilitados (10000, 20000, 80, 443)'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:20'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Puertos públicos habilitados (10000, 20000, 80, 443)'
[0;32m[✓][0m Puertos públicos habilitados (10000, 20000, 80, 443)
+ echo '[2025-08-10 17:54:20] [SUCCESS] Puertos públicos habilitados (10000, 20000, 80, 443)'
+ configure_webmin_public_access
+ log HEADER 'CONFIGURACIÓN PÚBLICA DE WEBMIN/USERMIN'
+ local level=HEADER
+ shift
+ local 'message=CONFIGURACIÓN PÚBLICA DE WEBMIN/USERMIN'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:21'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== CONFIGURACIÓN PÚBLICA DE WEBMIN/USERMIN ===\033[0m'
[0;35m=== CONFIGURACIÓN PÚBLICA DE WEBMIN/USERMIN ===[0m
+ echo '[2025-08-10 17:54:21] [HEADER] CONFIGURACIÓN PÚBLICA DE WEBMIN/USERMIN'
+ local wcfg=/etc/webmin/miniserv.conf
+ local ucfg=/etc/usermin/miniserv.conf
+ [[ -f /etc/webmin/miniserv.conf ]]
+ sed -i 's/^bind=.*/bind=0.0.0.0/' /etc/webmin/miniserv.conf
+ grep -q '^bind=' /etc/webmin/miniserv.conf
+ echo bind=0.0.0.0
+ sed -i '/^allow=/d' /etc/webmin/miniserv.conf
+ sed -i '/^deny=/d' /etc/webmin/miniserv.conf
+ grep -q '^port=' /etc/webmin/miniserv.conf
+ [[ -f /etc/usermin/miniserv.conf ]]
+ sed -i 's/^bind=.*/bind=0.0.0.0/' /etc/usermin/miniserv.conf
+ grep -q '^bind=' /etc/usermin/miniserv.conf
+ echo bind=0.0.0.0
+ sed -i '/^allow=/d' /etc/usermin/miniserv.conf
+ sed -i '/^deny=/d' /etc/usermin/miniserv.conf
+ grep -q '^port=' /etc/usermin/miniserv.conf
+ systemctl restart webmin
+ systemctl restart usermin
+ ss -tlnp
+ grep -Eq ':(10000|20000)\b'
+ log SUCCESS 'Webmin/Usermin escuchando públicamente'
+ local level=SUCCESS
+ shift
+ local 'message=Webmin/Usermin escuchando públicamente'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:25'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Webmin/Usermin escuchando públicamente'
[0;32m[✓][0m Webmin/Usermin escuchando públicamente
+ echo '[2025-08-10 17:54:25] [SUCCESS] Webmin/Usermin escuchando públicamente'
+ configure_virtualmin_public_ip
+ log HEADER 'CONFIGURANDO IP PÚBLICA EN VIRTUALMIN'
+ local level=HEADER
+ shift
+ local 'message=CONFIGURANDO IP PÚBLICA EN VIRTUALMIN'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:25'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== CONFIGURANDO IP PÚBLICA EN VIRTUALMIN ===\033[0m'
[0;35m=== CONFIGURANDO IP PÚBLICA EN VIRTUALMIN ===[0m
+ echo '[2025-08-10 17:54:25] [HEADER] CONFIGURANDO IP PÚBLICA EN VIRTUALMIN'
+ local pub_ip
++ get_best_public_ip
++ local ip=
++ command -v curl
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/latest/meta-data/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata-Flavor: Google' http://169.254.169.254/computeMetadata/v1/instance/network-interfaces/0/access-configs/0/external-ip
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata: true' 'http://169.254.169.254/metadata/instance/network/interface/0/ipv4/ipAddress/0/publicIpAddress?api-version=2021-02-01&format=text'
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/hetzner/v1/metadata/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
++ command -v ip
+++ ip -4 -o addr show scope global
+++ awk '{print $4}'
+++ cut -d/ -f1
+++ grep -Ev '^(10\.|192\.168\.|172\.(1[6-9]|2[0-9]|3[0-1])\.)'
+++ head -n1
+++ true
++ ip=
++ [[ -z '' ]]
+++ hostname -I
+++ awk '{print $1}'
++ ip=172.17.0.4
++ echo 172.17.0.4
+ pub_ip=172.17.0.4
+ [[ -z 172.17.0.4 ]]
+ [[ 172.17.0.4 =~ ^(10\.|192\.168\.|172\.(1[6-9]|2[0-9]|3[0-1])\.) ]]
+ log WARNING 'No se detectó IP pública enrutable en interfaces. Se mantendrá IP local.'
+ local level=WARNING
+ shift
+ local 'message=No se detectó IP pública enrutable en interfaces. Se mantendrá IP local.'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:30'
+ case "$level" in
+ echo -e '\033[1;33m[⚠]\033[0m No se detectó IP pública enrutable en interfaces. Se mantendrá IP local.'
[1;33m[⚠][0m No se detectó IP pública enrutable en interfaces. Se mantendrá IP local.
+ echo '[2025-08-10 17:54:30] [WARNING] No se detectó IP pública enrutable en interfaces. Se mantendrá IP local.'
+ return 0
+ install_authentic_theme
+ [[ true != \t\r\u\e ]]
+ log HEADER 'INSTALACIÓN DE AUTHENTIC THEME'
+ local level=HEADER
+ shift
+ local 'message=INSTALACIÓN DE AUTHENTIC THEME'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:30'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== INSTALACIÓN DE AUTHENTIC THEME ===\033[0m'
[0;35m=== INSTALACIÓN DE AUTHENTIC THEME ===[0m
+ echo '[2025-08-10 17:54:30] [HEADER] INSTALACIÓN DE AUTHENTIC THEME'
+ cd /tmp
+ log INFO 'Descargando Authentic Theme...'
+ local level=INFO
+ shift
+ local 'message=Descargando Authentic Theme...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:30'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Descargando Authentic Theme...'
[0;34m[INFO][0m Descargando Authentic Theme...
+ echo '[2025-08-10 17:54:30] [INFO] Descargando Authentic Theme...'
+ wget -O authentic-theme.zip https://github.com/authentic-theme/authentic-theme/archive/refs/heads/master.zip
--2025-08-10 17:54:30--  https://github.com/authentic-theme/authentic-theme/archive/refs/heads/master.zip
Resolving github.com (github.com)... 140.82.113.3
Connecting to github.com (github.com)|140.82.113.3|:443... connected.
HTTP request sent, awaiting response... 301 Moved Permanently
Location: https://github.com/webmin/authentic-theme/archive/refs/heads/master.zip [following]
--2025-08-10 17:54:30--  https://github.com/webmin/authentic-theme/archive/refs/heads/master.zip
Reusing existing connection to github.com:443.
HTTP request sent, awaiting response... 302 Found
Location: https://codeload.github.com/webmin/authentic-theme/zip/refs/heads/master [following]
--2025-08-10 17:54:30--  https://codeload.github.com/webmin/authentic-theme/zip/refs/heads/master
Resolving codeload.github.com (codeload.github.com)... 140.82.113.10
Connecting to codeload.github.com (codeload.github.com)|140.82.113.10|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [application/zip]
Saving to: 'authentic-theme.zip'

     0K .......... .......... .......... .......... ..........  519K
    50K .......... .......... .......... .......... .......... 1.49M
   100K .......... .......... .......... .......... .......... 1.37M
   150K .......... .......... .......... .......... .......... 6.64M
   200K .......... .......... .......... .......... .......... 1.67M
   250K .......... .......... .......... .......... .......... 2.94M
   300K .......... .......... .......... .......... .......... 9.42M
   350K .......... .......... .......... .......... .......... 8.45M
   400K .......... .......... .......... .......... .......... 4.77M
   450K .......... .......... .......... .......... .......... 2.73M
   500K .......... .......... .......... .......... .......... 4.39M
   550K .......... .......... .......... .......... .......... 3.33M
   600K .......... .......... .......... .......... .......... 7.05M
   650K .......... .......... .......... .......... .......... 9.59M
   700K .......... .......... .......... .......... .......... 21.2M
   750K .......... .......... .......... .......... .......... 6.65M
   800K .......... .......... .......... .......... .......... 9.05M
   850K .......... .......... .......... .......... .......... 14.9M
   900K .......... .......... .......... .......... .......... 10.3M
   950K .......... .......... .......... .......... .......... 15.8M
  1000K .......... .......... .......... .......... .......... 6.23M
  1050K .......... .......... .......... .......... .......... 5.07M
  1100K .......... .......... .......... .......... .......... 16.7M
  1150K .......... .......... .......... .......... .......... 3.85M
  1200K .......... .......... .......... .......... .......... 13.3M
  1250K .......... .......... .......... .......... .......... 13.4M
  1300K .......... .......... .......... .......... .......... 11.3M
  1350K .......... .......... .......... .......... .......... 13.3M
  1400K .......... .......... .......... .......... .......... 13.0M
  1450K .......... .......... .......... .......... .......... 15.5M
  1500K .......... .......... .......... .......... .......... 13.2M
  1550K .......... .......... .......... .......... .......... 7.43M
  1600K .......... .......... .......... .......... .......... 20.7M
  1650K .......... .......... .......... .......... .......... 7.41M
  1700K .......... .......... .......... .......... .......... 15.7M
  1750K .......... .......... .......... .......... .......... 10.3M
  1800K .......... .......... .......... .......... .......... 16.9M
  1850K .......... .......... .......... .......... .......... 14.5M
  1900K .......... .......... .......... .......... .......... 3.82M
  1950K .......... .......... .......... .......... .......... 10.7M
  2000K .......... .......... .......... .......... .......... 12.8M
  2050K .......... .......... .......... .......... .......... 7.96M
  2100K .......... .......... .......... .......... .......... 9.32M
  2150K .......... .......... .......... .......... .......... 9.37M
  2200K .......... .......... .......... .......... .......... 7.05M
  2250K .......... .......... .......... .......... .......... 11.9M
  2300K .......... .......... .......... .......... .......... 5.86M
  2350K .......... .......... .......... .......... .......... 9.60M
  2400K .......... .......... .......... .......... .......... 15.9M
  2450K .......... .......... .......... .......... .......... 8.87M
  2500K .......... .......... .......... .......... .......... 7.71M
  2550K .......... .......... .......... .......... .......... 4.65M
  2600K .......... .......... .......... .......... .......... 11.8M
  2650K .......... .......... .......... .......... .......... 16.8M
  2700K .......... .......... .......... .......... .......... 11.6M
  2750K .......... .......... .......... .......... .......... 12.0M
  2800K .......... .......... .......... .......... .......... 9.25M
  2850K .......... .......... .......... .......... .......... 21.0M
  2900K .......... .......... .......... .......... .......... 6.15M
  2950K .......... .......... .......... .......... .......... 14.4M
  3000K .......... .......... .......... .......... .......... 13.9M
  3050K .......... .......... .......... .......... .......... 7.94M
  3100K .......... .......... .......... .......... .......... 8.98M
  3150K .......... .......... .......... .......... .......... 1.11M
  3200K .......... .......... .......... .......... .......... 5.65M
  3250K .......... .......... .......... .......... .......... 18.5M
  3300K .......... .......... .......... .......... ..........  635K
  3350K .......... .......... .......... .......... .......... 4.20M
  3400K .......... .......... .......... .......... .......... 5.42M
  3450K .......... .......... .......... .......... .......... 1.52M
  3500K .......... .......... .......... .......... .......... 1.78M
  3550K .......... .......... .......... .......... .......... 4.43M
  3600K .......... .......... .......... .......... .......... 2.14M
  3650K .......... .......... .......... .......... .......... 1.01M
  3700K .......... .......... .......... .......... .......... 4.75M
  3750K .......... .......... .......... .......... ..........  838K
  3800K .......... .......... .......... .......... .......... 3.55M
  3850K .......... .......... .......... .......... .......... 10.0M
  3900K .......... .......... .......... .......... .......... 9.98M
  3950K .......... .......... .......... .......... .......... 10.7M
  4000K .......... .......... .......... .......... .......... 13.0M
  4050K .......... .......... .......... .......... .......... 15.1M
  4100K .......... .......... .......... .......... .......... 14.4M
  4150K .......... .......... .......... .......... .......... 17.0M
  4200K .......... .......... .......... .......... .......... 1.84M
  4250K .......... .......... .......... .......... .......... 7.01M
  4300K .......... .......... .......... .......... .......... 7.75M
  4350K .......... .......... .......... .......... .......... 14.8M
  4400K .......... .......... .......... .......... .......... 2.21M
  4450K .......... .......... .......... .......... .......... 15.4M
  4500K .......... .......... .......... .......... .......... 16.9M
  4550K .......... .......... .......... .......... .......... 10.2M
  4600K .......... .......... .......... .......... .......... 12.2M
  4650K .......... .......... .......... .......... .......... 6.42M
  4700K .......... .......... .......... .......... .......... 14.0M
  4750K .......... .......... .......... .......... .......... 14.2M
  4800K .......... .......... .......... .......... .......... 14.6M
  4850K .......... .......... .......... .......... .......... 10.5M
  4900K .......... .......... .......... .......... .......... 12.7M
  4950K .......... .......... .......... .......... .......... 7.62M
  5000K .......... .......... .......... .......... .......... 8.09M
  5050K .......... .......... .......... .......... .......... 15.5M
  5100K .......... .......... .......... .......... .......... 5.43M
  5150K .......... .......... .......... .......... .......... 8.75M
  5200K .......... .......... .......... .......... .......... 4.82M
  5250K .......... .......... .......... .......... .......... 12.0M
  5300K .......... .......... .......... .......... .......... 6.09M
  5350K .......... .......... .......... .......... .......... 12.3M
  5400K .......... .......... .......... .......... .......... 11.0M
  5450K .......... .......... .......... .......... .......... 11.2M
  5500K .......... .......... .......... .......... .......... 11.6M
  5550K .......... .......... .......... .......... .......... 4.85M
  5600K .......... .......... .......... .......... .......... 15.2M
  5650K .......... .......... .......... .......... .......... 6.67M
  5700K .......... .......... .......... .......... .......... 8.22M
  5750K .......... .......... .......... .......... .......... 16.6M
  5800K .......... .......... .......... .......... .......... 11.3M
  5850K .......... .......... .......... .......... .......... 3.99M
  5900K .......... .......... .......... .......... .......... 14.6M
  5950K .......... .......... .......... .......... .......... 14.9M
  6000K .......... .......... .......... .......... .......... 10.9M
  6050K .......... .......... .......... .......... .......... 10.3M
  6100K .......... .......... .......... .......... .......... 3.95M
  6150K .......... .......... .......... .......... .......... 13.4M
  6200K .......... .......... .......... .......... .......... 12.4M
  6250K .......... .......... .......... .......... .......... 9.89M
  6300K .......... .......... .......... .......... .......... 11.0M
  6350K .......... .......... .......... .......... .......... 7.47M
  6400K .......... .......... .......... .......... .......... 16.0M
  6450K .......... .......... .......... .......... .......... 12.0M
  6500K .......... .......... .......... .......... .......... 7.85M
  6550K .......... .......... .......... .......... .......... 12.4M
  6600K .......... .......... .......... .......... .......... 19.0M
  6650K .......... .......... .......... .......... .......... 10.0M
  6700K .......... .......... .......... .......... .......... 8.40M
  6750K .......... .......... .......... .......... .......... 13.2M
  6800K .......... .......... .......... .......... .......... 9.38M
  6850K .......... .......... .......... .......... .......... 7.09M
  6900K .......... .......... .......... .......... .......... 15.4M
  6950K .......... .......... .......... .......... .......... 10.3M
  7000K .......... .......... .......... .......... .......... 7.95M
  7050K .......... .......... .......... .......... .......... 11.1M
  7100K .......... .......... .......... .......... .......... 15.0M
  7150K .......... .......... .......... .......... ..........  663K
  7200K .......... .......... .......... .......... .......... 21.7M
  7250K .......... .......... .......... .......... .......... 19.6M
  7300K .......... .......... .......... .......... .......... 18.5M
  7350K .......... .......... .......... .......... .......... 22.3M
  7400K .......... .......... .......... .......... .......... 25.0M
  7450K .......... .......... .......... .......... .......... 23.8M
  7500K .......... .......... .......... .......... .......... 24.6M
  7550K .......... .......... .......... .......... .......... 23.9M
  7600K .......... .......... .......... .......... .......... 24.7M
  7650K .......... .......... .......... .......... .......... 24.3M
  7700K .......... .......... .......... .......... .......... 23.2M
  7750K .......... .......... .......... .......... .......... 22.9M
  7800K .......... .......... .......... .......... .......... 26.1M
  7850K .......... .......... .......... .......... .......... 24.3M
  7900K .......... .......... .......... .......... .......... 23.8M
  7950K .......... .......... .......... .......... .......... 3.20M
  8000K                                                        10.3M=1.4s

2025-08-10 17:54:33 (5.51 MB/s) - 'authentic-theme.zip' saved [8192843]

+ log SUCCESS 'Authentic Theme descargado'
+ local level=SUCCESS
+ shift
+ local 'message=Authentic Theme descargado'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:33'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Authentic Theme descargado'
[0;32m[✓][0m Authentic Theme descargado
+ echo '[2025-08-10 17:54:33] [SUCCESS] Authentic Theme descargado'
+ unzip -q authentic-theme.zip
+ [[ -d authentic-theme-master ]]
+ THEME_DEST=/usr/share/webmin/authentic-theme/authentic-theme-master
+ '[' -d /usr/share/webmin/authentic-theme/authentic-theme-master ']'
+ mv -f authentic-theme-master /usr/share/webmin/authentic-theme/authentic-theme-master
+ echo theme=authentic-theme
+ systemctl restart webmin
+ log SUCCESS 'Authentic Theme instalado y configurado'
+ local level=SUCCESS
+ shift
+ local 'message=Authentic Theme instalado y configurado'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:35'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Authentic Theme instalado y configurado'
[0;32m[✓][0m Authentic Theme instalado y configurado
+ echo '[2025-08-10 17:54:35] [SUCCESS] Authentic Theme instalado y configurado'
+ configure_ssl
+ [[ true != \t\r\u\e ]]
+ log HEADER 'CONFIGURACIÓN SSL'
+ local level=HEADER
+ shift
+ local 'message=CONFIGURACIÓN SSL'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:35'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== CONFIGURACIÓN SSL ===\033[0m'
[0;35m=== CONFIGURACIÓN SSL ===[0m
+ echo '[2025-08-10 17:54:35] [HEADER] CONFIGURACIÓN SSL'
+ log INFO 'Generando certificado SSL para Webmin...'
+ local level=INFO
+ shift
+ local 'message=Generando certificado SSL para Webmin...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:35'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Generando certificado SSL para Webmin...'
[0;34m[INFO][0m Generando certificado SSL para Webmin...
+ echo '[2025-08-10 17:54:35] [INFO] Generando certificado SSL para Webmin...'
+ local ssl_dir=/etc/webmin
++ hostname -f
+ local hostname=panel.example.com
+ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/webmin/miniserv.pem -out /etc/webmin/miniserv.pem -subj /C=ES/ST=Local/L=Local/O=Webmin/CN=panel.example.com
+ chmod 600 /etc/webmin/miniserv.pem
+ sed -i s/ssl=0/ssl=1/ /etc/webmin/miniserv.conf
+ systemctl restart webmin
+ log SUCCESS 'SSL configurado para Webmin'
+ local level=SUCCESS
+ shift
+ local 'message=SSL configurado para Webmin'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:37'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m SSL configurado para Webmin'
[0;32m[✓][0m SSL configurado para Webmin
+ echo '[2025-08-10 17:54:37] [SUCCESS] SSL configurado para Webmin'
++ get_best_public_ip
++ local ip=
++ command -v curl
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/latest/meta-data/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata-Flavor: Google' http://169.254.169.254/computeMetadata/v1/instance/network-interfaces/0/access-configs/0/external-ip
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata: true' 'http://169.254.169.254/metadata/instance/network/interface/0/ipv4/ipAddress/0/publicIpAddress?api-version=2021-02-01&format=text'
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/hetzner/v1/metadata/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
++ command -v ip
+++ ip -4 -o addr show scope global
+++ awk '{print $4}'
+++ cut -d/ -f1
+++ grep -Ev '^(10\.|192\.168\.|172\.(1[6-9]|2[0-9]|3[0-1])\.)'
+++ head -n1
+++ true
++ ip=
++ [[ -z '' ]]
+++ hostname -I
+++ awk '{print $1}'
++ ip=172.17.0.4
++ echo 172.17.0.4
+ log INFO 'Acceso seguro: https://172.17.0.4:10000'
+ local level=INFO
+ shift
+ local 'message=Acceso seguro: https://172.17.0.4:10000'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:42'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Acceso seguro: https://172.17.0.4:10000'
[0;34m[INFO][0m Acceso seguro: https://172.17.0.4:10000
+ echo '[2025-08-10 17:54:42] [INFO] Acceso seguro: https://172.17.0.4:10000'
+ setup_security_pro_features
+ log HEADER 'CONFIGURACIÓN DE SEGURIDAD Y CORREO (PRO)'
+ local level=HEADER
+ shift
+ local 'message=CONFIGURACIÓN DE SEGURIDAD Y CORREO (PRO)'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:54:42'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== CONFIGURACIÓN DE SEGURIDAD Y CORREO (PRO) ===\033[0m'
[0;35m=== CONFIGURACIÓN DE SEGURIDAD Y CORREO (PRO) ===[0m
+ echo '[2025-08-10 17:54:42] [HEADER] CONFIGURACIÓN DE SEGURIDAD Y CORREO (PRO)'
+ pkgs=('opendkim' 'opendkim-tools' 'spamassassin' 'clamav-daemon' 'clamav-freshclam' 'postfix-policyd-spf-python' 'python3-policyd-spf' 'fail2ban' 'dovecot-imapd' 'dovecot-pop3d')
+ local pkgs
+ for p in "${pkgs[@]}"
+ apt-get install -y opendkim
+ for p in "${pkgs[@]}"
+ apt-get install -y opendkim-tools
+ for p in "${pkgs[@]}"
+ apt-get install -y spamassassin
+ for p in "${pkgs[@]}"
+ apt-get install -y clamav-daemon
+ for p in "${pkgs[@]}"
+ apt-get install -y clamav-freshclam
+ for p in "${pkgs[@]}"
+ apt-get install -y postfix-policyd-spf-python
+ for p in "${pkgs[@]}"
+ apt-get install -y python3-policyd-spf
+ true
+ for p in "${pkgs[@]}"
+ apt-get install -y fail2ban
+ for p in "${pkgs[@]}"
+ apt-get install -y dovecot-imapd
+ for p in "${pkgs[@]}"
+ apt-get install -y dovecot-pop3d
+ '[' -f /etc/default/spamassassin ']'
+ systemctl enable --now spamassassin
+ systemctl enable --now spamd
+ systemctl enable --now clamav-freshclam
+ systemctl enable --now clamav-daemon
+ '[' -f /etc/opendkim.conf ']'
+ sed -i 's/^#*\?AutoRestart.*/AutoRestart             Yes/' /etc/opendkim.conf
+ sed -i 's/^#*\?UMask.*/UMask                   002/' /etc/opendkim.conf
+ grep -q '^Mode\s\+sv$' /etc/opendkim.conf
+ echo 'Mode                     sv'
+ grep -q '^Socket\s' /etc/opendkim.conf
+ grep -q '^Syslog\s\+yes$' /etc/opendkim.conf
+ mkdir -p /etc/opendkim/keys
+ chown -R opendkim:opendkim /etc/opendkim
+ systemctl enable --now opendkim
+ '[' -f /etc/postfix/main.cf ']'
+ grep -q '^smtpd_milters.*8891' /etc/postfix/main.cf
+ local 'SPF_CHECK=check_policy_service unix:private/policyd-spf'
+ grep -q policyd-spf /etc/postfix/master.cf
+ cat
+ postconf -h smtpd_recipient_restrictions
+ grep -q policyd-spf
+ postconf -h smtpd_recipient_restrictions
++ postconf -h smtpd_recipient_restrictions
+ postconf -e 'smtpd_recipient_restrictions=permit_mynetworks permit_sasl_authenticated reject_unauth_destination, check_policy_service unix:private/policyd-spf'
+ systemctl restart postfix
+ mkdir -p /etc/fail2ban
+ cat
+ systemctl enable --now fail2ban
+ systemctl enable --now dovecot
+ '[' -d /etc/webmin/virtual-server ']'
+ command -v virtualmin
+ virtualmin check-config
+ log SUCCESS 'Pila de correo y seguridad configurada'
+ local level=SUCCESS
+ shift
+ local 'message=Pila de correo y seguridad configurada'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:19'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Pila de correo y seguridad configurada'
[0;32m[✓][0m Pila de correo y seguridad configurada
+ echo '[2025-08-10 17:55:19] [SUCCESS] Pila de correo y seguridad configurada'
+ setup_premium_optional_features
+ log HEADER 'INSTALANDO FUNCIONES PREMIUM OPCIONALES'
+ local level=HEADER
+ shift
+ local 'message=INSTALANDO FUNCIONES PREMIUM OPCIONALES'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:19'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== INSTALANDO FUNCIONES PREMIUM OPCIONALES ===\033[0m'
[0;35m=== INSTALANDO FUNCIONES PREMIUM OPCIONALES ===[0m
+ echo '[2025-08-10 17:55:19] [HEADER] INSTALANDO FUNCIONES PREMIUM OPCIONALES'
+ apt-get install -y awstats webalizer
+ command -v a2enconf
+ a2enconf awstats
+ true
+ apt-get install -y roundcube roundcube-core roundcube-plugins
+ apt-get install -y mailman
+ true
+ apt-get install -y libapache2-mod-security2 modsecurity-crs
+ command -v a2enmod
+ a2enmod security2
+ '[' -f /etc/modsecurity/modsecurity.conf-recommended ']'
+ cp -n /etc/modsecurity/modsecurity.conf-recommended /etc/modsecurity/modsecurity.conf
+ sed -i 's/SecRuleEngine .*/SecRuleEngine On/' /etc/modsecurity/modsecurity.conf
+ '[' -d /usr/share/modsecurity-crs ']'
+ echo 'IncludeOptional /usr/share/modsecurity-crs/*.conf'
+ apt-get install -y phpmyadmin phppgadmin
+ true
+ apt-get install -y redis-server memcached
+ systemctl enable --now redis-server
+ systemctl enable --now memcached
+ apt-get install -y php-fpm
+ systemctl enable --now php7.4-fpm
+ true
+ systemctl enable --now php8.1-fpm
+ true
+ systemctl enable --now php8.2-fpm
+ systemctl restart apache2
+ log SUCCESS 'Funciones premium opcionales instaladas (cuando disponibles)'
+ local level=SUCCESS
+ shift
+ local 'message=Funciones premium opcionales instaladas (cuando disponibles)'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:39'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Funciones premium opcionales instaladas (cuando disponibles)'
[0;32m[✓][0m Funciones premium opcionales instaladas (cuando disponibles)
+ echo '[2025-08-10 17:55:39] [SUCCESS] Funciones premium opcionales instaladas (cuando disponibles)'
+ optimize_for_production
+ [[ true != \t\r\u\e ]]
+ log HEADER 'OPTIMIZACIÓN PARA PRODUCCIÓN'
+ local level=HEADER
+ shift
+ local 'message=OPTIMIZACIÓN PARA PRODUCCIÓN'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:39'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== OPTIMIZACIÓN PARA PRODUCCIÓN ===\033[0m'
[0;35m=== OPTIMIZACIÓN PARA PRODUCCIÓN ===[0m
+ echo '[2025-08-10 17:55:39] [HEADER] OPTIMIZACIÓN PARA PRODUCCIÓN'
+ cat
+ systemctl is-active --quiet mysql
+ log INFO 'Optimizando configuración de MySQL/MariaDB...'
+ local level=INFO
+ shift
+ local 'message=Optimizando configuración de MySQL/MariaDB...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:39'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Optimizando configuración de MySQL/MariaDB...'
[0;34m[INFO][0m Optimizando configuración de MySQL/MariaDB...
+ echo '[2025-08-10 17:55:39] [INFO] Optimizando configuración de MySQL/MariaDB...'
+ '[' -f /etc/mysql/mysql.conf.d/mysqld.cnf ']'
+ '[' -f /etc/mysql/mariadb.conf.d/50-server.cnf ']'
+ cp /etc/mysql/mariadb.conf.d/50-server.cnf /etc/mysql/mariadb.conf.d/50-server.cnf.backup
+ cat
+ systemctl restart mysql
+ log SUCCESS 'MariaDB optimizado'
+ local level=SUCCESS
+ shift
+ local 'message=MariaDB optimizado'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m MariaDB optimizado'
[0;32m[✓][0m MariaDB optimizado
+ echo '[2025-08-10 17:55:40] [SUCCESS] MariaDB optimizado'
+ systemctl is-active --quiet apache2
+ log INFO 'Optimizando configuración de Apache...'
+ local level=INFO
+ shift
+ local 'message=Optimizando configuración de Apache...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Optimizando configuración de Apache...'
[0;34m[INFO][0m Optimizando configuración de Apache...
+ echo '[2025-08-10 17:55:40] [INFO] Optimizando configuración de Apache...'
+ a2enmod rewrite ssl headers expires deflate
Module rewrite already enabled
Considering dependency setenvif for ssl:
Module setenvif already enabled
Considering dependency mime for ssl:
Module mime already enabled
Considering dependency socache_shmcb for ssl:
Module socache_shmcb already enabled
Module ssl already enabled
Enabling module headers.
Enabling module expires.
Considering dependency filter for deflate:
Module filter already enabled
Module deflate already enabled
To activate the new configuration, you need to run:
  systemctl restart apache2
+ cat
+ a2enconf virtualmin-optimizations
Enabling conf virtualmin-optimizations.
To activate the new configuration, you need to run:
  systemctl reload apache2
+ systemctl restart apache2
+ log SUCCESS 'Apache optimizado'
+ local level=SUCCESS
+ shift
+ local 'message=Apache optimizado'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Apache optimizado'
[0;32m[✓][0m Apache optimizado
+ echo '[2025-08-10 17:55:40] [SUCCESS] Apache optimizado'
+ log SUCCESS 'Optimizaciones de producción aplicadas'
+ local level=SUCCESS
+ shift
+ local 'message=Optimizaciones de producción aplicadas'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Optimizaciones de producción aplicadas'
[0;32m[✓][0m Optimizaciones de producción aplicadas
+ echo '[2025-08-10 17:55:40] [SUCCESS] Optimizaciones de producción aplicadas'
+ repair_permissions
+ log INFO 'Reparando permisos de archivos y carpetas críticos...'
+ local level=INFO
+ shift
+ local 'message=Reparando permisos de archivos y carpetas críticos...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Reparando permisos de archivos y carpetas críticos...'
[0;34m[INFO][0m Reparando permisos de archivos y carpetas críticos...
+ echo '[2025-08-10 17:55:40] [INFO] Reparando permisos de archivos y carpetas críticos...'
+ chown -R root:root /etc/webmin
+ chown -R root:root /usr/share/webmin
+ chmod -R 750 /etc/webmin
+ chmod -R 755 /usr/share/webmin
+ repair_services
+ log INFO 'Verificando y reparando servicios críticos...'
+ local level=INFO
+ shift
+ local 'message=Verificando y reparando servicios críticos...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Verificando y reparando servicios críticos...'
[0;34m[INFO][0m Verificando y reparando servicios críticos...
+ echo '[2025-08-10 17:55:40] [INFO] Verificando y reparando servicios críticos...'
+ services=('webmin' 'apache2' 'mysql')
+ local services
+ for service in "${services[@]}"
+ systemctl is-active --quiet webmin
+ for service in "${services[@]}"
+ systemctl is-active --quiet apache2
+ for service in "${services[@]}"
+ systemctl is-active --quiet mysql
+ repair_configurations
+ log INFO 'Reparando configuraciones problemáticas si es necesario...'
+ local level=INFO
+ shift
+ local 'message=Reparando configuraciones problemáticas si es necesario...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Reparando configuraciones problemáticas si es necesario...'
[0;34m[INFO][0m Reparando configuraciones problemáticas si es necesario...
+ echo '[2025-08-10 17:55:40] [INFO] Reparando configuraciones problemáticas si es necesario...'
+ [[ ! -f /etc/webmin/miniserv.conf ]]
+ final_verification
+ log HEADER 'VERIFICACIÓN FINAL DEL SISTEMA'
+ local level=HEADER
+ shift
+ local 'message=VERIFICACIÓN FINAL DEL SISTEMA'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== VERIFICACIÓN FINAL DEL SISTEMA ===\033[0m'
[0;35m=== VERIFICACIÓN FINAL DEL SISTEMA ===[0m
+ echo '[2025-08-10 17:55:40] [HEADER] VERIFICACIÓN FINAL DEL SISTEMA'
+ local errors=0
+ services=('webmin' 'apache2' 'mysql')
+ local services
+ for service in "${services[@]}"
+ systemctl is-active --quiet webmin
+ log SUCCESS 'Servicio webmin: ACTIVO'
+ local level=SUCCESS
+ shift
+ local 'message=Servicio webmin: ACTIVO'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Servicio webmin: ACTIVO'
[0;32m[✓][0m Servicio webmin: ACTIVO
+ echo '[2025-08-10 17:55:40] [SUCCESS] Servicio webmin: ACTIVO'
+ for service in "${services[@]}"
+ systemctl is-active --quiet apache2
+ log SUCCESS 'Servicio apache2: ACTIVO'
+ local level=SUCCESS
+ shift
+ local 'message=Servicio apache2: ACTIVO'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Servicio apache2: ACTIVO'
[0;32m[✓][0m Servicio apache2: ACTIVO
+ echo '[2025-08-10 17:55:40] [SUCCESS] Servicio apache2: ACTIVO'
+ for service in "${services[@]}"
+ systemctl is-active --quiet mysql
+ log SUCCESS 'Servicio mysql: ACTIVO'
+ local level=SUCCESS
+ shift
+ local 'message=Servicio mysql: ACTIVO'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Servicio mysql: ACTIVO'
[0;32m[✓][0m Servicio mysql: ACTIVO
+ echo '[2025-08-10 17:55:40] [SUCCESS] Servicio mysql: ACTIVO'
+ ports=('10000:Webmin' '80:Apache' '443:Apache-SSL')
+ local ports
+ for port_info in "${ports[@]}"
+ local port=10000
+ local service_name=Webmin
+ ss -tlnp
+ grep -q ':10000\b'
+ log SUCCESS 'Puerto 10000 (Webmin): ABIERTO'
+ local level=SUCCESS
+ shift
+ local 'message=Puerto 10000 (Webmin): ABIERTO'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Puerto 10000 (Webmin): ABIERTO'
[0;32m[✓][0m Puerto 10000 (Webmin): ABIERTO
+ echo '[2025-08-10 17:55:40] [SUCCESS] Puerto 10000 (Webmin): ABIERTO'
+ for port_info in "${ports[@]}"
+ local port=80
+ local service_name=Apache
+ ss -tlnp
+ grep -q ':80\b'
+ log SUCCESS 'Puerto 80 (Apache): ABIERTO'
+ local level=SUCCESS
+ shift
+ local 'message=Puerto 80 (Apache): ABIERTO'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Puerto 80 (Apache): ABIERTO'
[0;32m[✓][0m Puerto 80 (Apache): ABIERTO
+ echo '[2025-08-10 17:55:40] [SUCCESS] Puerto 80 (Apache): ABIERTO'
+ for port_info in "${ports[@]}"
+ local port=443
+ local service_name=Apache-SSL
+ ss -tlnp
+ grep -q ':443\b'
+ log SUCCESS 'Puerto 443 (Apache-SSL): ABIERTO'
+ local level=SUCCESS
+ shift
+ local 'message=Puerto 443 (Apache-SSL): ABIERTO'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:40'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Puerto 443 (Apache-SSL): ABIERTO'
[0;32m[✓][0m Puerto 443 (Apache-SSL): ABIERTO
+ echo '[2025-08-10 17:55:40] [SUCCESS] Puerto 443 (Apache-SSL): ABIERTO'
++ get_best_public_ip
++ local ip=
++ command -v curl
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/latest/meta-data/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata-Flavor: Google' http://169.254.169.254/computeMetadata/v1/instance/network-interfaces/0/access-configs/0/external-ip
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata: true' 'http://169.254.169.254/metadata/instance/network/interface/0/ipv4/ipAddress/0/publicIpAddress?api-version=2021-02-01&format=text'
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/hetzner/v1/metadata/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
++ command -v ip
+++ ip -4 -o addr show scope global
+++ awk '{print $4}'
+++ cut -d/ -f1
+++ grep -Ev '^(10\.|192\.168\.|172\.(1[6-9]|2[0-9]|3[0-1])\.)'
+++ head -n1
+++ true
++ ip=
++ [[ -z '' ]]
+++ hostname -I
+++ awk '{print $1}'
++ ip=172.17.0.4
++ echo 172.17.0.4
+ local server_ip=172.17.0.4
+ log INFO 'Verificando acceso a Webmin...'
+ local level=INFO
+ shift
+ local 'message=Verificando acceso a Webmin...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:45'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Verificando acceso a Webmin...'
[0;34m[INFO][0m Verificando acceso a Webmin...
+ echo '[2025-08-10 17:55:45] [INFO] Verificando acceso a Webmin...'
+ curl -k -s --connect-timeout 5 https://172.17.0.4:10000
+ log SUCCESS 'Webmin accesible vía HTTPS'
+ local level=SUCCESS
+ shift
+ local 'message=Webmin accesible vía HTTPS'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:47'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Webmin accesible vía HTTPS'
[0;32m[✓][0m Webmin accesible vía HTTPS
+ echo '[2025-08-10 17:55:47] [SUCCESS] Webmin accesible vía HTTPS'
+ command -v virtualmin
+ virtualmin list-domains
+ log SUCCESS 'Virtualmin funcionando correctamente'
+ local level=SUCCESS
+ shift
+ local 'message=Virtualmin funcionando correctamente'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:47'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Virtualmin funcionando correctamente'
[0;32m[✓][0m Virtualmin funcionando correctamente
+ echo '[2025-08-10 17:55:47] [SUCCESS] Virtualmin funcionando correctamente'
+ return 0
+ log SUCCESS 'Todas las verificaciones pasaron correctamente'
+ local level=SUCCESS
+ shift
+ local 'message=Todas las verificaciones pasaron correctamente'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:47'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Todas las verificaciones pasaron correctamente'
[0;32m[✓][0m Todas las verificaciones pasaron correctamente
+ echo '[2025-08-10 17:55:47] [SUCCESS] Todas las verificaciones pasaron correctamente'
+ show_access_info
++ get_best_public_ip
++ local ip=
++ command -v curl
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/latest/meta-data/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata-Flavor: Google' http://169.254.169.254/computeMetadata/v1/instance/network-interfaces/0/access-configs/0/external-ip
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata: true' 'http://169.254.169.254/metadata/instance/network/interface/0/ipv4/ipAddress/0/publicIpAddress?api-version=2021-02-01&format=text'
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/hetzner/v1/metadata/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
++ command -v ip
+++ ip -4 -o addr show scope global
+++ awk '{print $4}'
+++ cut -d/ -f1
+++ grep -Ev '^(10\.|192\.168\.|172\.(1[6-9]|2[0-9]|3[0-1])\.)'
+++ head -n1
+++ true
++ ip=
++ [[ -z '' ]]
+++ hostname -I
+++ awk '{print $1}'
++ ip=172.17.0.4
++ echo 172.17.0.4
+ local server_ip=172.17.0.4
++ hostname -f
+ local hostname=panel.example.com
+ log HEADER 'INFORMACIÓN DE ACCESO'
+ local level=HEADER
+ shift
+ local 'message=INFORMACIÓN DE ACCESO'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:52'
+ case "$level" in
+ echo

+ echo -e '\033[0;35m=== INFORMACIÓN DE ACCESO ===\033[0m'
[0;35m=== INFORMACIÓN DE ACCESO ===[0m
+ echo '[2025-08-10 17:55:52] [HEADER] INFORMACIÓN DE ACCESO'
+ cat

═══════════════════════════════════════════════════════════════════════════════
🎉 ¡INSTALACIÓN COMPLETADA EXITOSAMENTE!
═══════════════════════════════════════════════════════════════════════════════

📡 ACCESO A WEBMIN:
   • URL: https://172.17.0.4:10000
   • URL alternativa: https://panel.example.com:10000
   • Usuario: root
   • Contraseña: [contraseña de root del sistema]

🏢 ACCESO A VIRTUALMIN:
   • URL: https://172.17.0.4:10000
   • Módulo: Virtualmin Virtual Servers
   • Panel completo de hosting disponible

🔐 SEGURIDAD:
   • SSL habilitado automáticamente
   • Firewall configurado
   • Certificados SSL autofirmados instalados

🚀 CARACTERÍSTICAS INSTALADAS:
   ✅ Webmin (panel de administración)
   ✅ Virtualmin GPL (gestión de hosting)
   ✅ Authentic Theme (interfaz moderna)
   ✅ Apache + MySQL + PHP (stack LAMP)
   ✅ Postfix (servidor de correo)
   ✅ Certificados SSL
   ✅ Firewall UFW configurado

📋 PRÓXIMOS PASOS:
   1. Acceder a https://172.17.0.4:10000
   2. Iniciar sesión con credenciales de root
   3. Configurar primer dominio virtual en Virtualmin
   4. Revisar configuración en System Information

🆘 SOPORTE:
   • Logs: /var/log/webmin-virtualmin-install.log
   • Backup: /root/webmin-virtualmin-backup-20250810_174838
   • Documentación: https://webmin.com/docs/

═══════════════════════════════════════════════════════════════════════════════

+ final_cleanup
+ log INFO 'Ejecutando limpieza final...'
+ local level=INFO
+ shift
+ local 'message=Ejecutando limpieza final...'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:52'
+ case "$level" in
+ echo -e '\033[0;34m[INFO]\033[0m Ejecutando limpieza final...'
[0;34m[INFO][0m Ejecutando limpieza final...
+ echo '[2025-08-10 17:55:52] [INFO] Ejecutando limpieza final...'
+ [[ -d /tmp/webmin-virtualmin-install ]]
+ rm -rf /tmp/webmin-virtualmin-install
+ apt-get autoremove -y
Reading package lists...
Building dependency tree...
Reading state information...
The following packages will be REMOVED:
  bsd-mailx libgnutls-dane0 libidn12 liblockfile-bin liblockfile1
[master a64e180] saving uncommitted changes in /etc prior to apt run
 44 files changed, 218 insertions(+), 67 deletions(-)
 create mode 120000 alternatives/php-fpm.sock
 create mode 100644 apache2/conf-available/virtualmin-optimizations.conf
 create mode 120000 apache2/conf-enabled/virtualmin-optimizations.conf
 create mode 120000 apache2/mods-enabled/expires.load
 create mode 120000 apache2/mods-enabled/headers.load
 create mode 100644 mysql/mariadb.conf.d/50-server.cnf.backup
 mode change 100644 => 100755 webmin/apache/httpd-info
 mode change 100644 => 100755 webmin/apache/site
 mode change 100644 => 100755 webmin/jailkit/config
 mode change 100644 => 100755 webmin/miniserv.pem
 mode change 100644 => 100755 webmin/mysql/version
 mode change 100644 => 100755 webmin/postfix/version
 mode change 100644 => 100755 webmin/proftpd/site
 mode change 100644 => 100755 webmin/ruby-gems/config
 mode change 100644 => 100755 webmin/usermin/root.acl
 mode change 100644 => 100755 webmin/virtual-server/bw-template
 mode change 100644 => 100755 webmin/virtual-server/domain-template
 mode change 100644 => 100755 webmin/virtual-server/framefwd-template
 mode change 100644 => 100755 webmin/virtual-server/installed
 mode change 100644 => 100755 webmin/virtual-server/last-config
 mode change 100644 => 100755 webmin/virtual-server/localips
 mode change 100644 => 100755 webmin/virtual-server/map.alias
 mode change 100644 => 100755 webmin/virtual-server/map.dom
 mode change 100644 => 100755 webmin/virtual-server/map.gid
 mode change 100644 => 100755 webmin/virtual-server/map.parent
 mode change 100644 => 100755 webmin/virtual-server/map.reseller
 mode change 100644 => 100755 webmin/virtual-server/map.subdom
 mode change 100644 => 100755 webmin/virtual-server/map.user
 mode change 100644 => 100755 webmin/virtual-server/plans/0
 mode change 100644 => 100755 webmin/virtual-server/subdomain-template
 mode change 100644 => 100755 webmin/virtual-server/templates/0
 mode change 100644 => 100755 webmin/virtual-server/update-template
 mode change 100644 => 100755 webmin/virtual-server/user-template
 mode change 100644 => 100755 webmin/virtual-server/warnbw-template
 mode change 100644 => 100755 webmin/virtualmin-awstats/config
 mode change 100644 => 100755 webmin/virtualmin-htpasswd/config
 mode change 100644 => 100755 webmin/webmin/root.acl
 mode change 100644 => 100755 webmin/webmincron/crons/1754848196159340.cron
 mode change 100644 => 100755 webmin/webmincron/crons/1754848203159341.cron
 mode change 100644 => 100755 webmin/webmincron/crons/1754848204159342.cron
0 upgraded, 0 newly installed, 5 to remove and 0 not upgraded.
After this operation, 1105 kB disk space will be freed.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 121710 files and directories currently installed.)
Removing bsd-mailx (8.1.2-0.20220412cvs-1) ...
Removing libgnutls-dane0:arm64 (3.7.9-2+deb12u5) ...
Removing libidn12:arm64 (1.41-1) ...
Removing liblockfile1:arm64 (1.17-1+b1) ...
Removing liblockfile-bin (1.17-1+b1) ...
Processing triggers for libc-bin (2.36-9+deb12u10) ...
[master 39f60ce] committing changes in /etc made by "apt-get autoremove -y"
 6 files changed, 6 deletions(-)
 delete mode 120000 alternatives/Mail
 delete mode 120000 alternatives/Mail.1.gz
 delete mode 120000 alternatives/mail
 delete mode 120000 alternatives/mail.1.gz
 delete mode 120000 alternatives/mailx
 delete mode 120000 alternatives/mailx.1.gz
+ apt-get autoclean
Reading package lists...
Building dependency tree...
Reading state information...
+ log SUCCESS 'Limpieza completada'
+ local level=SUCCESS
+ shift
+ local 'message=Limpieza completada'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:54'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m Limpieza completada'
[0;32m[✓][0m Limpieza completada
+ echo '[2025-08-10 17:55:54] [SUCCESS] Limpieza completada'
+ log SUCCESS '¡Instalación automática completada exitosamente!'
+ local level=SUCCESS
+ shift
+ local 'message=¡Instalación automática completada exitosamente!'
++ date '+%Y-%m-%d %H:%M:%S'
+ local 'timestamp=2025-08-10 17:55:54'
+ case "$level" in
+ echo -e '\033[0;32m[✓]\033[0m ¡Instalación automática completada exitosamente!'
[0;32m[✓][0m ¡Instalación automática completada exitosamente!
+ echo '[2025-08-10 17:55:54] [SUCCESS] ¡Instalación automática completada exitosamente!'
+ echo

++ get_best_public_ip
++ local ip=
++ command -v curl
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/latest/meta-data/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata-Flavor: Google' http://169.254.169.254/computeMetadata/v1/instance/network-interfaces/0/access-configs/0/external-ip
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 -H 'Metadata: true' 'http://169.254.169.254/metadata/instance/network/interface/0/ipv4/ipAddress/0/publicIpAddress?api-version=2021-02-01&format=text'
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/metadata/v1/interfaces/public/0/ipv4/address
+++ true
++ ip=
++ [[ -z '' ]]
+++ curl -fsS --connect-timeout 1 http://169.254.169.254/hetzner/v1/metadata/public-ipv4
+++ true
++ ip=
++ [[ -z '' ]]
++ command -v ip
+++ ip -4 -o addr show scope global
+++ awk '{print $4}'
+++ cut -d/ -f1
+++ grep -Ev '^(10\.|192\.168\.|172\.(1[6-9]|2[0-9]|3[0-1])\.)'
+++ head -n1
+++ true
++ ip=
++ [[ -z '' ]]
+++ hostname -I
+++ awk '{print $1}'
++ ip=172.17.0.4
++ echo 172.17.0.4
+ echo -e '\033[0;32mPara acceder al panel: https://172.17.0.4:10000\033[0m'
[0;32mPara acceder al panel: https://172.17.0.4:10000[0m
+ echo


## Estado servicios clave
- webmin: ACTIVO
- apache2: ACTIVO
- mysql: ACTIVO
- mariadb: ACTIVO
- postfix: ACTIVO
- dovecot: ACTIVO
- opendkim: ACTIVO
- spamassassin: INACTIVO
- clamav-daemon: ACTIVO
- clamav-freshclam: ACTIVO
- fail2ban: ACTIVO

## Puertos
udp   UNCONN 0      0            0.0.0.0:10000      0.0.0.0:*    users:(("perl",pid=46484,fd=6)) ino:267012 sk:107e cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/webmin.service <->                                                                                     
udp   UNCONN 0      0            0.0.0.0:20000      0.0.0.0:*    users:(("miniserv.pl",pid=46419,fd=6)) ino:266213 sk:107f cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/usermin.service <->                                                                             
tcp   LISTEN 0      4096         0.0.0.0:20000      0.0.0.0:*    users:(("miniserv.pl",pid=46419,fd=5)) ino:266212 sk:404c cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/usermin.service <->                                                                             
tcp   LISTEN 0      4096         0.0.0.0:10000      0.0.0.0:*    users:(("perl",pid=46484,fd=5)) ino:267011 sk:404f cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/webmin.service <->                                                                                     
tcp   LISTEN 0      100          0.0.0.0:995        0.0.0.0:*    users:(("dovecot",pid=43087,fd=24)) ino:262164 sk:4005 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/dovecot.service <->                                                                                
tcp   LISTEN 0      100          0.0.0.0:993        0.0.0.0:*    users:(("dovecot",pid=43087,fd=41)) ino:262179 sk:4006 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/dovecot.service <->                                                                                
tcp   LISTEN 0      100          0.0.0.0:587        0.0.0.0:*    users:(("master",pid=47580,fd=110)) ino:273655 sk:4050 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/system-postfix.slice/postfix@-.service <->                                                         
tcp   LISTEN 0      511          0.0.0.0:443        0.0.0.0:*    users:(("apache2",pid=52424,fd=5),("apache2",pid=52423,fd=5),("apache2",pid=52422,fd=5),("apache2",pid=52416,fd=5)) ino:280701 sk:4051 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/apache2.service <->
tcp   LISTEN 0      100          0.0.0.0:465        0.0.0.0:*    users:(("master",pid=47580,fd=114)) ino:273661 sk:4052 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/system-postfix.slice/postfix@-.service <->                                                         
tcp   LISTEN 0      100          0.0.0.0:143        0.0.0.0:*    users:(("dovecot",pid=43087,fd=39)) ino:262177 sk:400a cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/dovecot.service <->                                                                                
tcp   LISTEN 0      100          0.0.0.0:25         0.0.0.0:*    users:(("master",pid=47580,fd=13)) ino:273557 sk:4053 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/system-postfix.slice/postfix@-.service <->                                                          
tcp   LISTEN 0      511          0.0.0.0:80         0.0.0.0:*    users:(("apache2",pid=52424,fd=4),("apache2",pid=52423,fd=4),("apache2",pid=52422,fd=4),("apache2",pid=52416,fd=4)) ino:280699 sk:4054 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/apache2.service <->
tcp   LISTEN 0      100          0.0.0.0:110        0.0.0.0:*    users:(("dovecot",pid=43087,fd=22)) ino:262162 sk:400d cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/dovecot.service <->                                                                                
tcp   LISTEN 0      100             [::]:995           [::]:*    users:(("dovecot",pid=43087,fd=25)) ino:262165 sk:4044 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/dovecot.service v6only:1 <->                                                                       
tcp   LISTEN 0      100             [::]:993           [::]:*    users:(("dovecot",pid=43087,fd=42)) ino:262180 sk:4045 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/dovecot.service v6only:1 <->                                                                       
tcp   LISTEN 0      100             [::]:587           [::]:*    users:(("master",pid=47580,fd=111)) ino:273656 sk:4059 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/system-postfix.slice/postfix@-.service v6only:1 <->                                                
tcp   LISTEN 0      100             [::]:465           [::]:*    users:(("master",pid=47580,fd=115)) ino:273662 sk:405a cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/system-postfix.slice/postfix@-.service v6only:1 <->                                                
tcp   LISTEN 0      100             [::]:143           [::]:*    users:(("dovecot",pid=43087,fd=40)) ino:262178 sk:4048 cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/dovecot.service v6only:1 <->                                                                       
tcp   LISTEN 0      100             [::]:25            [::]:*    users:(("master",pid=47580,fd=14)) ino:273558 sk:405b cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/system-postfix.slice/postfix@-.service v6only:1 <->                                                 
tcp   LISTEN 0      100             [::]:110           [::]:*    users:(("dovecot",pid=43087,fd=23)) ino:262163 sk:404b cgroup:/docker/dcf62950f2cb7e1a1485a4099ca3f1a0eff248a1a42c97771ab2f1381bb19620/system.slice/dovecot.service v6only:1 <->                                                                       

## Virtualmin check-config
Your system has 11.91 GiB of memory, which is at or above the Virtualmin recommended minimum of 256 MiB

BIND DNS server is installed, however, the default primary DNS server panel.example.com does not resolve to an IP address

Mail server Postfix is installed and configured

Postfix is configured to support per-domain outgoing IP addresses

Apache is installed

Apache supports HTTP/2 on your system

The following CGI script execution modes are available : suexec fcgiwrap

The following PHP execution modes are available : fpm fcgid cgi

The following PHP versions are available : 8.2.29 (/bin/php-cgi8.2)

The following PHP-FPM versions are available : 8.2.29 (php8.2-fpm)

Apache is configured to host SSL websites

MariaDB 10.11.11 is installed and running, using Unix socket authentication

Logrotate is installed

SpamAssassin and Procmail are installed and configured for use

ClamAV is installed and assumed to be running

Plugin AWStats reporting is installed

Plugin Protected web directories is installed

Using network interface eth0 for virtual IPs

Default IPv4 address for virtual servers is 172.17.0.4

Detected external IPv4 address is 107.72.162.18

Quotas are not enabled on the filesystem / which contains home directories under /home and email files under /home. Quota editing has been disabled


All commands needed to create and restore backups are installed

The selected package management and update systems are installed

Chroot jails are available

