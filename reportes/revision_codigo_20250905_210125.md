# Revisi√≥n completa del c√≥digo

Fecha: Fri Sep  5 21:01:25 EDT 2025

## Resumen

- Scripts .sh: 136

## Scripts sin shebang (l√≠nea 1)


```text
```


## Scripts sin modo estricto (set -euo pipefail)


```text
./instalar_postfix.sh
./instalar_devops_completo.sh
./corregir_advertencias.sh
./webmin_postfix_check.sh
./virtualmin-gpl-master/createvirtualminmodule.sh
./virtualmin-gpl-master/setup-repos.sh
./test_exhaustivo_tuneles.sh
./desinstalar.sh
./verificacion_final_completa.sh
./instalar_webmin_virtualmin.sh
./monitoreo_sistema.sh
./instalar_integracion.sh
./revision_funciones_webmin.sh
./generar_reporte_devops_final.sh
./sub_agente_seguridad.sh
./validacion_final_sistema.sh
./implementar_seguridad_pro_completa.sh
./corregir_error_postfix.sh
./verificar_postfix_webmin.sh
./configuracion_post_instalacion.sh
./verificar_actualizaciones.sh
./completar_seguridad_webmin_virtualmin.sh
./sub_agente_logs.sh
./diagnostico_servidores_virtuales.sh
./verificar_seguridad_webmin_virtualmin.sh
./postfix_validation_functions.sh
./completar_seguridad_macos.sh
./actualizar_sistema.sh
./agente_devops_webmin.sh
./integrar_validaciones_postfix.sh
./diagnostico_completo.sh
./aplicar_configuraciones_seguridad.sh
./verificar_funciones_pro_completas.sh
./monitor_despliegues.sh
./corregir_problemas_seguridad.sh
./diagnosticar_y_corregir_errores.sh
./verificacion_final_autonomo.sh
./verificar_asistente_wizard.sh
./servidor_publico_autonomo.sh
./agregar_funciones_pro_faltantes.sh
./github_webhook_integration.sh
./verificador_servicios.sh
./analisis_codigo_funciones.sh
./generar_informe_seguridad_completo.sh
./lib/common_functions.sh
./virtualmin_postfix_check.sh
./revision_completa_sistema.sh
./programar_verificacion_seguridad.sh
./implementar_seguridad_pro_macos.sh
./verificacion_completa_funciones.sh
./configurar_agente_devops.sh
./correccion_total_errores.sh
./verificar_sistema_pro.sh
./authentic-theme-master/theme-update.sh
./optimizacion_servidor_autonomo.sh
./verificar_funcionamiento_completo_ubuntu_debian.sh
./activar_ssh_macos.sh
./verificar_pro_simple.sh
./verificacion_rapida_estado.sh
./corregir_asistente_postinstalacion.sh
./devops_master.sh
./sub_agente_actualizaciones.sh
./activar_ssh_forzado.sh
./verificacion_seguridad_produccion.sh
```


## Errores de sintaxis (bash -n)


```text
```


## Uso de sudo dentro de scripts


```text
./instalar_postfix.sh:53:            sudo apt-get update
./instalar_postfix.sh:54:            sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./instalar_postfix.sh:58:            sudo yum install -y postfix || sudo dnf install -y postfix
./instalar_postfix.sh:63:            echo "  sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist"
./verificacion_total_automatizada.sh:6:#   sudo bash verificacion_total_automatizada.sh
./verificacion_total_automatizada.sh:7:#   sudo bash verificacion_total_automatizada.sh --auto-fetch   # descarga scripts si faltan
./instalar_devops_completo.sh:120:            sudo apt-get update -y
./instalar_devops_completo.sh:124:                sudo apt-get install -y "$dep" || show_warning "No se pudo instalar $dep"
./instalar_devops_completo.sh:130:                sudo yum install -y "$dep" || sudo dnf install -y "$dep" || show_warning "No se pudo instalar $dep"
./webmin_postfix_check.sh:55:        echo "   1. Instalar Postfix: sudo apt-get install postfix"
./instalacion_github_unico.sh:6:# Comando √∫nico: curl -sSL https://raw.githubusercontent.com/yunyminaya/Webmin-y-Virtualmin-/main/instalacion_github_unico.sh | sudo bash
./instalacion_github_unico.sh:48:    echo -e "${YELLOW}üí° Uso: curl -sSL https://raw.githubusercontent.com/yunyminaya/Webmin-y-Virtualmin-/main/instalacion_github_unico.sh | sudo bash${NC}"
./instalar.sh:6:# Comando √∫nico: curl -sSL https://raw.githubusercontent.com/yunyminaya/Webmin-y-Virtualmin-/master/instalar.sh | sudo bash
./instalar.sh:67:    apt-get install -y net-tools iproute2 curl wget sudo gnupg2 lsb-release apt-transport-https ca-certificates software-properties-common
./desinstalar.sh:74:    elif command -v sudo >/dev/null 2>&1; then
./instalar_webmin_virtualmin.sh:119:        sudo apt-get update && sudo apt-get install -y git
./instalar_webmin_virtualmin.sh:122:        sudo yum install -y git
./instalar_webmin_virtualmin.sh:125:        sudo dnf install -y git
./instalar_webmin_virtualmin.sh:164:                sudo apt-get install -y unzip
./orquestador_seguridad_pro.sh:4:#   sudo bash orquestador_seguridad_pro.sh            # Solo verificar
./orquestador_seguridad_pro.sh:5:#   sudo bash orquestador_seguridad_pro.sh --fix      # Verificar y corregir autom√°ticamente
./corregir_error_postfix.sh:173:        log_info "Para instalar Postfix: sudo apt-get install postfix (Ubuntu/Debian) o sudo yum install postfix (CentOS/RHEL)"
./corregir_error_postfix.sh:275:            sudo apt-get update
./corregir_error_postfix.sh:276:            sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./corregir_error_postfix.sh:280:            sudo yum install -y postfix || sudo dnf install -y postfix
./corregir_error_postfix.sh:285:            echo "  sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist"
./verificar_postfix_webmin.sh:150:                log_info "Para iniciar: sudo systemctl start postfix"
./verificar_postfix_webmin.sh:153:                log_info "Para habilitar: sudo systemctl enable postfix"
./verificar_postfix_webmin.sh:161:                log_info "Para activar: sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist"
./verificar_postfix_webmin.sh:218:        sudo mkdir -p /etc/postfix
./verificar_postfix_webmin.sh:220:        cat << EOF | sudo tee /etc/postfix/main.cf > /dev/null
./verificar_postfix_webmin.sh:276:                sudo apt-get update
./verificar_postfix_webmin.sh:277:                sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./verificar_postfix_webmin.sh:282:                    sudo dnf install -y postfix
./verificar_postfix_webmin.sh:284:                    sudo yum install -y postfix
./verificar_postfix_webmin.sh:290:                sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist 2>/dev/null || true
./preparar_github.sh:46:        echo "sudo find . -name '*.sh' -type f -exec chmod +x {} \;"
./verificar_actualizaciones.sh:335:        echo -e "   üîÑ Ejecuta ${BLUE}sudo ./actualizar_sistema.sh${NC} para actualizar Authentic Theme"
./verificar_actualizaciones.sh:345:        echo -e "   ‚öôÔ∏è  Inicia el servicio Webmin: ${BLUE}sudo systemctl start webmin${NC}"
./completar_seguridad_webmin_virtualmin.sh:127:            sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on 2>/dev/null || \
./completar_seguridad_webmin_virtualmin.sh:131:            sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/sbin/sshd 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:132:            sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/sbin/apache2 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:144:                sudo ufw --force enable 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:147:                sudo ufw allow ssh 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:148:                sudo ufw allow 80/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:149:                sudo ufw allow 443/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:150:                sudo ufw allow 10000/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:151:                sudo ufw allow 20000/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:158:                sudo systemctl enable firewalld 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:159:                sudo systemctl start firewalld 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:162:                sudo firewall-cmd --permanent --add-service=ssh 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:163:                sudo firewall-cmd --permanent --add-service=http 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:164:                sudo firewall-cmd --permanent --add-service=https 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:165:                sudo firewall-cmd --permanent --add-port=10000/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:166:                sudo firewall-cmd --permanent --add-port=20000/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:167:                sudo firewall-cmd --reload 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:185:    sudo mkdir -p /var/log/webmin 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:186:    sudo mkdir -p /var/log/security 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:189:    sudo chmod 755 /var/log/webmin 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:190:    sudo chmod 755 /var/log/security 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:193:    sudo touch /var/log/webmin/miniserv.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:194:    sudo touch /var/log/webmin/webmin.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:195:    sudo touch /var/log/webmin/error.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:196:    sudo touch /var/log/security/alerts.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:199:    sudo chmod 644 /var/log/webmin/*.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:200:    sudo chmod 644 /var/log/security/*.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:213:        sudo mkdir -p /etc/fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:241:        sudo cp /tmp/fail2ban.conf /etc/fail2ban/jail.local 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:244:        sudo systemctl enable fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:245:        sudo systemctl start fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:272:        sudo a2enmod headers 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:273:        sudo a2enmod ssl 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:276:        sudo systemctl restart apache2 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:294:        sudo systemctl restart httpd 2>/dev/null || true
./sub_agente_logs.sh:71:        log_message "Intentos sudo fallidos hoy: $failed_sudo"
./sub_agente_seguridad_tunel_nativo.sh:223:            log_intrusion "PRIVILEGE_ESCALATION" "$ip" "Failed sudo attempt"
./diagnostico_servidores_virtuales.sh:298:            echo "   cd webmin-* && sudo ./setup.sh"
./diagnostico_servidores_virtuales.sh:307:            echo "   sudo bash virtualmin-install.sh --bundle LAMP"
./diagnostico_servidores_virtuales.sh:315:        echo "   sudo brew services start httpd"
./diagnostico_servidores_virtuales.sh:317:        echo "   sudo systemctl start apache2 mysql bind9 postfix"
./diagnostico_servidores_virtuales.sh:318:        echo "   sudo systemctl enable apache2 mysql bind9 postfix"
./diagnostico_servidores_virtuales.sh:324:        echo "   sudo pfctl -d  # Deshabilitar firewall temporalmente"
./diagnostico_servidores_virtuales.sh:326:        echo "   sudo ufw allow 10000"
./diagnostico_servidores_virtuales.sh:327:        echo "   sudo ufw allow 80"
./diagnostico_servidores_virtuales.sh:328:        echo "   sudo ufw allow 443"
./control_total_especializado.sh:188:    echo "Ejecute: sudo $0"
./remediacion_total_webmin_virtualmin.sh:5:#     && sudo bash remediacion_total_webmin_virtualmin.sh
./postfix_validation_functions.sh:116:        echo "üí° Ejecute: sudo apt-get install postfix (Ubuntu/Debian)"
./postfix_validation_functions.sh:117:        echo "üí° Ejecute: sudo yum install postfix (CentOS/RHEL)"
./postfix_validation_functions.sh:133:                sudo apt-get update
./postfix_validation_functions.sh:134:                sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./postfix_validation_functions.sh:139:                    sudo dnf install -y postfix
./postfix_validation_functions.sh:141:                    sudo yum install -y postfix
./postfix_validation_functions.sh:152:        sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist 2>/dev/null || true
./completar_seguridad_macos.sh:72:    sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on 2>/dev/null || \
./completar_seguridad_macos.sh:76:    sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/sbin/sshd 2>/dev/null || true
./completar_seguridad_macos.sh:77:    sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/sbin/apache2 2>/dev/null || true
./completar_seguridad_macos.sh:307:    local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./agente_devops_webmin.sh:217:    local cmd="sudo virtualmin list-domains --name-only 2>/dev/null || echo 'no-domains'"
./agente_devops_webmin.sh:292:    local hold_cmd="sudo apt-mark hold $packages"
./agente_devops_webmin.sh:343:        sudo apt-get update -y
./agente_devops_webmin.sh:344:        sudo apt-get install -y webmin usermin virtualmin virtualmin-base || true
./agente_devops_webmin.sh:345:        sudo apt-get upgrade -y
./agente_devops_webmin.sh:385:        sudo virtualmin check-config || true
./agente_devops_webmin.sh:386:        sudo virtualmin validate-domains --all-domains || true
./agente_devops_webmin.sh:403:            apachectl -k graceful || sudo systemctl reload apache2 || true
./agente_devops_webmin.sh:405:            sudo nginx -s reload || sudo systemctl reload nginx || true
./agente_devops_webmin.sh:407:        sudo systemctl restart webmin || true
./agente_devops_webmin.sh:408:        sudo systemctl restart usermin || true
./agente_devops_webmin.sh:459:        sudo virtualmin restore-domain --all-domains --source \"\$LAST\" --all-features || true
./agente_devops_webmin.sh:475:        ls -1dt */ | tail -n +8 | xargs -r sudo rm -rf
./integrar_validaciones_postfix.sh:161:        echo "üí° Ejecute: sudo apt-get install postfix (Ubuntu/Debian)"
./integrar_validaciones_postfix.sh:162:        echo "üí° Ejecute: sudo yum install postfix (CentOS/RHEL)"
./integrar_validaciones_postfix.sh:178:                sudo apt-get update
./integrar_validaciones_postfix.sh:179:                sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./integrar_validaciones_postfix.sh:184:                    sudo dnf install -y postfix
./integrar_validaciones_postfix.sh:186:                    sudo yum install -y postfix
./integrar_validaciones_postfix.sh:197:        sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist 2>/dev/null || true
./integrar_validaciones_postfix.sh:318:        echo "   1. Instalar Postfix: sudo apt-get install postfix"
./integrar_validaciones_postfix.sh:529:sudo apt-get update
./integrar_validaciones_postfix.sh:530:sudo apt-get install -y postfix
./integrar_validaciones_postfix.sh:535:sudo yum install -y postfix  # o dnf install -y postfix
./integrar_validaciones_postfix.sh:541:sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist
./integrar_validaciones_postfix.sh:574:3. Instalar Postfix: `sudo apt-get install postfix`
./integrar_validaciones_postfix.sh:580:3. Reiniciar servicio: `sudo systemctl restart postfix`
./diagnostico_completo.sh:330:        if sudo -u postgres psql -c "SELECT 1;" >/dev/null 2>&1; then
./aplicar_configuraciones_seguridad.sh:169:            local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./aplicar_configuraciones_seguridad.sh:176:                log "INFO" "Para habilitar: sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on"
./aplicar_configuraciones_seguridad.sh:357:    local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./verificacion_final_completa_ubuntu_debian.sh:637:    echo -e "   ‚Ä¢ Para corregir errores: sudo bash remediacion_total_webmin_virtualmin.sh"
./verificacion_final_completa_ubuntu_debian.sh:638:    echo -e "   ‚Ä¢ Para verificar nuevamente: sudo bash $0"
./monitor_despliegues.sh:195:    local domains=$(ssh -o ConnectTimeout=10 -p "$port" "$user@$host" "sudo virtualmin list-domains --name-only 2>/dev/null" | grep -v '^$' || echo "")
./corregir_problemas_seguridad.sh:484:        echo "Intente: sudo $0 $*"
./diagnosticar_y_corregir_errores.sh:257:    if sudo mkdir -p "$webmin_dir" && sudo cp -r webmin-master/* "$webmin_dir/"; then
./diagnosticar_y_corregir_errores.sh:270:    if sudo ./setup.sh; then
./verificacion_final_autonomo.sh:233:        log_info "Para instalar Postfix: sudo apt-get install postfix (Ubuntu/Debian) o sudo yum install postfix (CentOS/RHEL)"
./verificacion_final_autonomo.sh:234:        log_info "En macOS: sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist"
./verificar_asistente_wizard.sh:66:    sudo mkdir -p "$VIRTUALMIN_CONFIG"
./verificar_asistente_wizard.sh:93:    sudo cp /tmp/virtualmin_config "$VIRTUALMIN_CONFIG/config"
./verificar_asistente_wizard.sh:94:    sudo chown $(whoami):staff "$VIRTUALMIN_CONFIG/config"
./verificar_asistente_wizard.sh:103:    sudo chown -R $(whoami):staff "$VIRTUALMIN_CONFIG"
./verificar_asistente_wizard.sh:104:    sudo chmod -R 755 "$VIRTUALMIN_CONFIG"
./verificar_asistente_wizard.sh:121:            sudo cp -r virtualmin-gpl-master/* "$WEBMIN_ROOT/"
./verificar_asistente_wizard.sh:243:        echo "admin:$password_hash:0" | sudo tee "$WEBMIN_CONFIG/miniserv.users" > /dev/null
./verificar_asistente_wizard.sh:244:        sudo chown $(whoami):staff "$WEBMIN_CONFIG/miniserv.users"
./verificar_asistente_wizard.sh:251:        echo "root: *" | sudo tee "$WEBMIN_CONFIG/webmin.acl" > /dev/null
./verificar_asistente_wizard.sh:252:        sudo chown $(whoami):staff "$WEBMIN_CONFIG/webmin.acl"
./verificar_asistente_wizard.sh:262:    sudo launchctl unload /Library/LaunchDaemons/com.webmin.webmin.plist 2>/dev/null
./verificar_asistente_wizard.sh:266:    sudo pkill -f "miniserv.pl" 2>/dev/null
./verificar_asistente_wizard.sh:270:    sudo launchctl load /Library/LaunchDaemons/com.webmin.webmin.plist
./verificar_asistente_wizard.sh:271:    sudo launchctl start com.webmin.webmin
./verificar_asistente_wizard.sh:306:        sudo cp /tmp/module.info "$WEBMIN_CONFIG/virtual-server/module.info"
./verificar_asistente_wizard.sh:419:- Reinicia Webmin: ${YELLOW}sudo launchctl restart com.webmin.webmin${NC}
./diagnostico_ubuntu_webmin.sh:88:            add_solution "Agregar usuario al grupo sudo: sudo usermod -aG sudo $USER"
./analisis_codigo_funciones.sh:301:        # Verificar uso de sudo sin validaci√≥n
./analisis_codigo_funciones.sh:303:            if grep -q "sudo -v\|sudo -n" "$script_file"; then
./analisis_codigo_funciones.sh:304:                log_success "Uso seguro de sudo en $(basename "$script_file")"
./analisis_codigo_funciones.sh:306:                log_warning "Uso de sudo sin validaci√≥n en $(basename "$script_file")"
./scripts/auditoria_repo.sh:67:# Uso de sudo
./scripts/auditoria_repo.sh:68:append "## Uso de sudo dentro de scripts"
./scripts/auditoria_repo.sh:104:append "- Evitar sudo dentro de scripts que ya requieren root."
./revision_completa_master.sh:212:   ‚Ä¢ Reiniciar Webmin: sudo systemctl restart webmin
./revision_completa_master.sh:213:   ‚Ä¢ Reiniciar Apache: sudo systemctl restart apache2
./revision_completa_master.sh:214:   ‚Ä¢ Ver logs: sudo tail -f /var/log/webmin/miniserv.log
./instalacion_un_comando.sh:6:# Comando √∫nico: curl -sSL https://tu-url/install.sh | sudo bash
./instalar_modulos_faltantes.sh:5:#   sudo bash instalar_modulos_faltantes.sh
./implementar_seguridad_pro_macos.sh:123:    local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./implementar_seguridad_pro_macos.sh:129:        log "INFO" "Para habilitar: sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on"
./implementar_seguridad_pro_macos.sh:312:    local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./implementar_seguridad_pro_macos.sh:370:    log "INFO" "- Habilitar firewall: sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on"
./verificacion_completa_funciones.sh:748:        echo "   ‚Ä¢ sudo ./instalacion_completa_automatica.sh  # Instalaci√≥n completa"
./verificacion_completa_funciones.sh:749:        echo "   ‚Ä¢ sudo ./verificacion_final_autonomo.sh      # Verificaci√≥n completa"
./verificacion_completa_funciones.sh:750:        echo "   ‚Ä¢ sudo systemctl status webmin               # Estado de Webmin"
./verificacion_completa_funciones.sh:751:        echo "   ‚Ä¢ sudo systemctl status apache2              # Estado de Apache"
./verificacion_completa_funciones.sh:752:        echo "   ‚Ä¢ sudo ufw status                            # Estado del firewall"
./verificacion_completa_funciones.sh:753:        echo "   ‚Ä¢ sudo apt update && sudo apt upgrade        # Actualizar sistema"
./correccion_total_errores.sh:77:1. Ejecutar: sudo bash instalacion_un_comando.sh
./correccion_total_errores.sh:92:curl -sSL https://raw.githubusercontent.com/yunyminaya/Webmin-y-Virtualmin-/main/instalacion_github_unico.sh | sudo bash
./correccion_total_errores.sh:141:sudo bash instalacion_un_comando.sh
./correccion_total_errores.sh:146:sudo bash instalar_webmin_virtualmin.sh
./activar_ssh_macos.sh:68:    echo "  sudo systemsetup -setremotelogin on"
./activar_ssh_macos.sh:71:    echo "  sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist"
./activar_ssh_macos.sh:103:echo "  2. Reiniciar servicio: sudo launchctl kickstart -k system/com.openssh.sshd"
./activar_ssh_macos.sh:104:echo "  3. Verificar configuraci√≥n: sudo sshd -T"
./corregir_asistente_postinstalacion.sh:113:sudo mkdir -p /usr/local/webmin
./corregir_asistente_postinstalacion.sh:114:sudo mkdir -p /etc/webmin
./corregir_asistente_postinstalacion.sh:115:sudo mkdir -p /var/log/webmin
./corregir_asistente_postinstalacion.sh:127:sudo cp -r webmin-${WEBMIN_VERSION}/* /usr/local/webmin/
./corregir_asistente_postinstalacion.sh:128:sudo chown -R root:admin /usr/local/webmin
./corregir_asistente_postinstalacion.sh:180:sudo perl /tmp/webmin_setup.pl
./corregir_asistente_postinstalacion.sh:185:sudo cp -r virtualmin-gpl-master/* /usr/local/webmin/
./corregir_asistente_postinstalacion.sh:188:sudo mkdir -p /etc/webmin/virtual-server
./corregir_asistente_postinstalacion.sh:202:sudo cp /tmp/virtualmin_config /etc/webmin/virtual-server/config
./corregir_asistente_postinstalacion.sh:217:sudo cp /tmp/webmin_start.sh /usr/local/bin/webmin_start.sh
./corregir_asistente_postinstalacion.sh:218:sudo chmod +x /usr/local/bin/webmin_start.sh
./corregir_asistente_postinstalacion.sh:253:sudo cp /tmp/com.webmin.webmin.plist /Library/LaunchDaemons/
./corregir_asistente_postinstalacion.sh:254:sudo chown root:wheel /Library/LaunchDaemons/com.webmin.webmin.plist
./corregir_asistente_postinstalacion.sh:259:sudo mkdir -p /etc/webmin/webmin-users
./corregir_asistente_postinstalacion.sh:260:echo "root:x:$(id -u):$(id -g):Root User:/Users/$(whoami):/bin/bash" | sudo tee /etc/webmin/webmin-users/root > /dev/null
./corregir_asistente_postinstalacion.sh:263:echo "root: *" | sudo tee /etc/webmin/webmin.acl > /dev/null
./corregir_asistente_postinstalacion.sh:268:sudo launchctl load /Library/LaunchDaemons/com.webmin.webmin.plist
./corregir_asistente_postinstalacion.sh:269:sudo launchctl start com.webmin.webmin
./corregir_asistente_postinstalacion.sh:336:sudo perl /tmp/reset_wizard.pl
./activar_ssh_forzado.sh:27:echo "Comando: sudo systemsetup -setremotelogin on"
./activar_ssh_forzado.sh:41:    echo "Comando: sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist"
./activar_ssh_forzado.sh:67:echo "  sudo systemsetup -setremotelogin on"
./activar_ssh_forzado.sh:70:echo "  sudo launchctl enable system/com.openssh.sshd"
./activar_ssh_forzado.sh:71:echo "  sudo launchctl bootstrap system /System/Library/LaunchDaemons/ssh.plist"
./activar_ssh_forzado.sh:96:echo "sudo log show --predicate 'process == \"sshd\"' --last 30m"
./verificacion_seguridad_produccion.sh:217:    firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./sub_agente_ingeniero_codigo.sh:152:        log_info "Ejecutar: sudo $0"
./sub_agente_ingeniero_codigo.sh:776:    echo "   sudo systemsetup -setremotelogin on"
./sub_agente_ingeniero_codigo.sh:779:    echo "   sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist"
```


## Uso de eval


```text
./virtualmin-gpl-master/setup-repos.sh:171:  if eval "$ping_cmd" >/dev/null 2>&1; then
./virtualmin-gpl-master/setup-repos.sh:179:    if eval "$http_cmd" >/dev/null 2>&1; then
./configuracion_personalizada.sh:77:    eval "$var_name='$input'"
./sub_agente_especialista_codigo.sh:804:    eval "$webmin_audit"
./sub_agente_especialista_codigo.sh:805:    eval "$virtualmin_audit"  
./sub_agente_especialista_codigo.sh:806:    eval "$code_audit"
./agente_devops_webmin.sh:127:        if eval "$cmd"; then
./verificar_asistente_wizard.sh:168:eval {
./scripts/auditoria_repo.sh:79:find . -type f -name "*.sh" -exec grep -nH -E '(^|[^[:alnum:]_])eval([[:space:]]|\()' {} + >> "$out" 2>/dev/null || true
./scripts/auditoria_repo.sh:105:append "- Revisar usos de eval y rm -rf."
./configurar_agente_devops.sh:70:    eval "$var_name='$input'"
./test_sistema_completo.sh:56:    if eval "$test_command" >/dev/null 2>&1; then
./verificar_pro_simple.sh:29:    if eval "$comando" >/dev/null 2>&1; then
./test_funciones_macos.sh:53:    if eval "$test_command" >/dev/null 2>&1; then
```


## Uso de rm -rf


```text
./mantenimiento_sistema.sh:132:    rm -rf "full_backup_$backup_date"
./virtualmin-gpl-master/setup-repos.sh:413:    rm -rf "$VIRTUALMIN_INSTALL_TEMPDIR"
./virtualmin-gpl-master/setup-repos.sh:612:    rm -rf "$VIRTUALMIN_INSTALL_TEMPDIR"
./instalacion_github_unico.sh:81:rm -rf "$TEMP_DIR"
./test_exhaustivo_tuneles.sh:371:    rm -rf "$test_config_dir"
./instalar.sh:202:    rm -rf "$TEMP_DIR" 2>/dev/null || true
./desinstalar.sh:124:            $SUDO rm -rf "$dir"
./desinstalar.sh:268:    rm -rf /tmp/webmin_install 2>/dev/null || true
./desinstalar.sh:269:    rm -rf /tmp/webmin_virtualmin_install 2>/dev/null || true
./instalar_webmin_virtualmin.sh:135:    rm -rf "$INSTALL_DIR"
./instalar_webmin_virtualmin.sh:157:            rm -rf Wedmin-Y-Virtualmin-main repo.zip
./instalar_webmin_virtualmin.sh:318:rm -rf "$INSTALL_DIR"
./analizar_duplicaciones.sh:258:    rm -rf "$TEMP_DIR"
./validacion_final_sistema.sh:213:    rm -rf "$TEST_DIR"
./identificar_funciones_duplicadas.sh:241:    rm -rf "$TEMP_DIR"
./configuracion_post_instalacion.sh:349:rm -rf "$BACKUP_DIR/$DATE"
./sub_agente_seguridad_avanzada.sh:286:    rm -rf "$backup_dir"
./actualizar_sistema.sh:175:                rm -rf "$THEME_DIR"
./actualizar_sistema.sh:251:        rm -rf "$THEME_DIR"
./actualizar_sistema.sh:258:        rm -rf "$VIRTUALMIN_DIR"
./actualizar_sistema.sh:265:        rm -rf "$CONFIG_DIR"
./actualizar_sistema.sh:302:    rm -rf /tmp/authentic-theme-master
./agente_devops_webmin.sh:475:        ls -1dt */ | tail -n +8 | xargs -r sudo rm -rf
./diagnosticar_y_corregir_errores.sh:280:    rm -rf "$temp_dir"
./scripts/auditoria_repo.sh:83:# Uso de rm -rf
./instalacion_un_comando.sh:97:        rm -rf "$TEMP_DIR" 2>/dev/null || true
./instalacion_un_comando.sh:316:        rm -rf "$TEMP_DIR"
./instalacion_un_comando.sh:614:            rm -rf "$THEME_DEST"
./instalacion_un_comando.sh:1191:        rm -rf "$TEMP_DIR"
./optimizar_codigo_duplicado.sh:363:    rm -rf "$TEMP_DIR"
./authentic-theme-master/theme-update.sh:56:      rm -rf "$DIR/.~authentic-theme"
./authentic-theme-master/theme-update.sh:153:              rm -rf "$DIR/.~authentic-theme"
./authentic-theme-master/theme-update.sh:169:        rm -rf "$DIR/authentic-theme"/*
./authentic-theme-master/theme-update.sh:171:        rm -rf "$DIR/.~authentic-theme"
./authentic-theme-master/theme-update.sh:195:        rm -rf "$DIR/.~authentic-theme"
./test_sistema_completo.sh:354:rm -rf "/tmp/test-auto-tunnel" 2>/dev/null || true
./optimizacion_servidor_autonomo.sh:742:        rm -rf /var/cache/apache2/*
./corregir_asistente_postinstalacion.sh:372:rm -rf /tmp/webmin-*
./tunel_nativo_sin_terceros.sh:529:            rm -rf "$CONFIG_DIR"
./tunel_nativo_sin_terceros.sh:535:            rm -rf "$CONFIG_DIR"
./verificacion_seguridad_produccion.sh:374:        if grep -q "rm -rf /" "$script" 2>/dev/null; then
```


## Uso de systemctl


```text
./sub_agente_alto_trafico.sh:90:        nginx -t && systemctl reload nginx
./sub_agente_alto_trafico.sh:149:        systemctl reload apache2
./sub_agente_alto_trafico.sh:180:    systemctl restart mysql
./sub_agente_alto_trafico.sh:285:    systemctl restart php*-fpm 2>/dev/null || true
./sub_agente_alto_trafico.sh:327:    systemctl restart redis-server
./sub_agente_alto_trafico.sh:328:    systemctl enable redis-server
./bloquear_actualizaciones_webmin_virtualmin.sh:167:  systemctl daemon-reload
./bloquear_actualizaciones_webmin_virtualmin.sh:168:  systemctl enable --now webmin-virtualmin-guard.timer >/dev/null 2>&1 || true
./bloquear_actualizaciones_webmin_virtualmin.sh:173:  systemctl disable --now webmin-virtualmin-guard.timer >/dev/null 2>&1 || true
./bloquear_actualizaciones_webmin_virtualmin.sh:175:  systemctl daemon-reload
./bloquear_actualizaciones_webmin_virtualmin.sh:185:  systemctl list-timers --all 2>/dev/null | grep -q "webmin-virtualmin-guard.timer" && echo "Guard timer: ACTIVO" || echo "Guard timer: NO ACTIVO"
./bloquear_actualizaciones_webmin_virtualmin.sh:216:      systemctl daemon-reload 2>/dev/null || true
./mantenimiento_sistema.sh:120:1. Detener servicios: systemctl stop ha-tunnel-monitor auto-tunnel-manager-v2 attack-monitor
./mantenimiento_sistema.sh:124:5. Recargar systemd: systemctl daemon-reload
./mantenimiento_sistema.sh:125:6. Reiniciar servicios: systemctl start ha-tunnel-monitor auto-tunnel-manager-v2 attack-monitor
./mantenimiento_sistema.sh:223:                systemctl stop cloudflared-* 2>/dev/null || true
./mantenimiento_sistema.sh:225:                systemctl start cloudflared-* 2>/dev/null || true
./mantenimiento_sistema.sh:279:    systemctl daemon-reload
./mantenimiento_sistema.sh:283:    if systemctl is-active --quiet fail2ban; then
./mantenimiento_sistema.sh:284:        systemctl stop fail2ban
./mantenimiento_sistema.sh:289:        systemctl start fail2ban
./mantenimiento_sistema.sh:311:        if systemctl list-unit-files | grep -q "^$servicio.service"; then
./mantenimiento_sistema.sh:312:            if ! systemctl is-active --quiet "$servicio"; then
./mantenimiento_sistema.sh:421:        if systemctl list-unit-files | grep -q "^$servicio.service"; then
./mantenimiento_sistema.sh:422:            if ! systemctl is-active --quiet "$servicio"; then
./mantenimiento_sistema.sh:424:                systemctl restart "$servicio" && \
./mantenimiento_sistema.sh:433:    if ! systemctl is-active --quiet ufw; then
./mantenimiento_sistema.sh:439:    if ! systemctl is-active --quiet fail2ban; then
./mantenimiento_sistema.sh:444:            systemctl restart fail2ban
./mantenimiento_sistema.sh:500:        if systemctl list-unit-files | grep -q "^$servicio.service"; then
./mantenimiento_sistema.sh:501:            if systemctl is-active --quiet "$servicio"; then
./orquestador_tunel_nativo_completo.sh:211:        "webmin": "$(systemctl is-active webmin 2>/dev/null || echo 'inactive')",
./orquestador_tunel_nativo_completo.sh:212:        "tunnel_nativo": "$(systemctl is-active tunnel-nativo 2>/dev/null || echo 'inactive')",
./orquestador_tunel_nativo_completo.sh:213:        "tunnel_persistent": "$(systemctl is-active tunel-persistente 2>/dev/null || echo 'inactive')",
./orquestador_tunel_nativo_completo.sh:214:        "nginx": "$(systemctl is-active nginx 2>/dev/null || echo 'inactive')"
./orquestador_tunel_nativo_completo.sh:233:        if systemctl list-unit-files | grep -q "$service"; then
./orquestador_tunel_nativo_completo.sh:235:            if systemctl start "$service" 2>/dev/null; then
./orquestador_tunel_nativo_completo.sh:244:    systemctl start tunnel-forward-webmin tunnel-forward-http tunnel-forward-https 2>/dev/null || true
./orquestador_tunel_nativo_completo.sh:265:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./orquestador_tunel_nativo_completo.sh:267:            systemctl stop "$service" 2>/dev/null || true
./orquestador_tunel_nativo_completo.sh:291:        if systemctl is-active --quiet tunnel-nativo; then
./orquestador_tunel_nativo_completo.sh:312:        if systemctl is-active --quiet tunnel-intrusion-detection; then
./orquestador_tunel_nativo_completo.sh:320:        if systemctl is-active --quiet tunel-persistente; then
./orquestador_tunel_nativo_completo.sh:363:            local status=$(systemctl is-active "$service" 2>/dev/null || echo "no-installed")
./orquestador_tunel_nativo_completo.sh:438:        local status=$(systemctl is-active "$service" 2>/dev/null || echo "inactive")
./orquestador_tunel_nativo_completo.sh:670:            "tunnel_nativo": "$(systemctl is-active tunnel-nativo 2>/dev/null || echo 'inactive')",
./orquestador_tunel_nativo_completo.sh:671:            "persistence": "$(systemctl is-active tunel-persistente 2>/dev/null || echo 'inactive')",
./orquestador_tunel_nativo_completo.sh:672:            "security": "$(systemctl is-active tunnel-intrusion-detection 2>/dev/null || echo 'inactive')",
./orquestador_tunel_nativo_completo.sh:673:            "nginx": "$(systemctl is-active nginx 2>/dev/null || echo 'inactive')"
./orquestador_tunel_nativo_completo.sh:753:    systemctl daemon-reload
./orquestador_tunel_nativo_completo.sh:754:    systemctl enable tunnel-system-monitor.service
./orquestador_tunel_nativo_completo.sh:816:                systemctl disable "$service" 2>/dev/null || true
./orquestador_tunel_nativo_completo.sh:820:            systemctl daemon-reload
./virtualmin-gpl-master/setup-repos.sh:997:    if systemctl restart chronyd 1>/dev/null 2>&1; then
./virtualmin-gpl-master/setup-repos.sh:999:    elif systemctl restart systemd-timesyncd 1>/dev/null 2>&1; then
./virtualmin-gpl-master/setup-repos.sh:1011:    if systemctl restart chronyd 1>/dev/null 2>&1; then
./virtualmin-gpl-master/setup-repos.sh:1013:    elif systemctl restart systemd-timesyncd 1>/dev/null 2>&1; then
./test_exhaustivo_tuneles.sh:104:            # Test especial para systemctl
./test_exhaustivo_tuneles.sh:105:            if command -v systemctl >/dev/null 2>&1; then
./test_exhaustivo_tuneles.sh:106:                log_test PASS "Dependencia systemctl disponible"
./test_exhaustivo_tuneles.sh:108:                log_test PASS "systemctl wrapper disponible (macOS)"
./test_exhaustivo_tuneles.sh:110:                log_test INFO "systemctl no disponible (normal en macOS)"
./desinstalar.sh:99:            if systemctl is-active --quiet webmin 2>/dev/null; then
./desinstalar.sh:100:                $SUDO systemctl stop webmin
./desinstalar.sh:103:            if systemctl is-enabled --quiet webmin 2>/dev/null; then
./desinstalar.sh:104:                $SUDO systemctl disable webmin
./desinstalar.sh:140:                $SUDO systemctl daemon-reload
./desinstalar.sh:239:            $SUDO systemctl stop mysql apache2 2>/dev/null || true
./desinstalar.sh:240:            $SUDO systemctl disable mysql apache2 2>/dev/null || true
./desinstalar.sh:248:            $SUDO systemctl stop mysqld httpd 2>/dev/null || true
./desinstalar.sh:249:            $SUDO systemctl disable mysqld httpd 2>/dev/null || true
./configuracion_personalizada.sh:140:            systemctl restart postfix
./configuracion_personalizada.sh:141:            systemctl enable postfix
./configuracion_personalizada.sh:378:        systemctl reload rsyslog > /dev/null 2>&1 || true
./configuracion_personalizada.sh:490:            if systemctl list-unit-files | grep -q "^$service.service"; then
./configuracion_personalizada.sh:606:        if systemctl list-unit-files | grep -q "^$servicio.service"; then
./configuracion_personalizada.sh:607:            systemctl restart "$servicio" && \
./configuracion_personalizada.sh:614:    systemctl reload cron 2>/dev/null || systemctl reload crond 2>/dev/null || true
./verificar_seguridad_completa.sh:119:        systemctl is-active --quiet "$service" 2>/dev/null
./monitoreo_sistema.sh:108:        if systemctl list-unit-files | grep -q "^$service.service"; then
./monitoreo_sistema.sh:109:            if ! systemctl is-active --quiet "$service"; then
./monitoreo_sistema.sh:302:    systemctl status webmin --no-pager -l >> "$report_file" 2>/dev/null || echo "Webmin: No disponible" >> "$report_file"
./monitoreo_sistema.sh:410:    systemctl daemon-reload
./monitoreo_sistema.sh:411:    systemctl enable webmin-monitor.timer
./monitoreo_sistema.sh:412:    systemctl start webmin-monitor.timer
./monitoreo_sistema.sh:455:            systemctl status webmin-monitor.timer --no-pager
./instalar_integracion.sh:163:    if systemctl is-active --quiet webmin; then
./instalar_integracion.sh:165:        systemctl restart webmin
./instalar_integracion.sh:241:    if ! systemctl is-active --quiet webmin 2>/dev/null && ! service webmin status >/dev/null 2>&1; then
./verificar_tunel_automatico.sh:128:    systemctl daemon-reload
./verificar_tunel_automatico.sh:129:    systemctl enable cloudflared-webmin
./verificar_tunel_automatico.sh:162:    systemctl daemon-reload
./verificar_tunel_automatico.sh:163:    systemctl enable ngrok-webmin
./verificar_tunel_automatico.sh:241:        systemctl start cloudflared-webmin
./verificar_tunel_automatico.sh:246:        systemctl start ngrok-webmin
./verificar_tunel_automatico.sh:294:    systemctl daemon-reload
./verificar_tunel_automatico.sh:295:    systemctl enable auto-tunnel-manager
./verificar_tunel_automatico.sh:336:    echo "üîÑ Servicio autom√°tico: systemctl start auto-tunnel-manager"
./seguridad_avanzada_tunnel.sh:232:    systemctl enable fail2ban
./seguridad_avanzada_tunnel.sh:233:    systemctl restart fail2ban
./seguridad_avanzada_tunnel.sh:329:    systemctl daemon-reload
./seguridad_avanzada_tunnel.sh:330:    systemctl enable attack-monitor
./seguridad_avanzada_tunnel.sh:331:    systemctl start attack-monitor
./seguridad_avanzada_tunnel.sh:513:    systemctl daemon-reload
./seguridad_avanzada_tunnel.sh:514:    systemctl enable ssh-honeypot
./seguridad_avanzada_tunnel.sh:515:    systemctl start ssh-honeypot
./seguridad_avanzada_tunnel.sh:600:    echo "   ‚Ä¢ systemctl status attack-monitor"
./sub_agente_monitoreo.sh:66:        if systemctl is-active --quiet "$service"; then
./sub_agente_monitoreo.sh:69:            if systemctl is-enabled --quiet "$service" 2>/dev/null; then
./sub_agente_monitoreo.sh:154:        systemctl --type=service --state=active | grep -E "(webmin|apache|nginx|mysql|postgresql|postfix|bind|ssh)"
./panel_control_maestro.sh:239:    "webmin": "$(systemctl is-active webmin 2>/dev/null || echo 'inactive')",
./panel_control_maestro.sh:240:    "apache2": "$(systemctl is-active apache2 2>/dev/null || echo 'inactive')",
./panel_control_maestro.sh:241:    "nginx": "$(systemctl is-active nginx 2>/dev/null || echo 'inactive')",
./panel_control_maestro.sh:242:    "mysql": "$(systemctl is-active mysql 2>/dev/null || echo 'inactive')",
./panel_control_maestro.sh:243:    "redis": "$(systemctl is-active redis-server 2>/dev/null || echo 'inactive')",
./panel_control_maestro.sh:244:    "fail2ban": "$(systemctl is-active fail2ban 2>/dev/null || echo 'inactive')"
./panel_control_maestro.sh:287:        system("systemctl restart webmin apache2 mysql >/dev/null 2>&1");
./panel_control_maestro.sh:379:        if ! systemctl is-active --quiet "$service" 2>/dev/null; then
./panel_control_maestro.sh:417:    log_message "  systemctl start sub-agentes-webmin"
./verificar_funciones_pro_nativas.sh:256:        if command -v "$module" >/dev/null 2>&1 || systemctl is-active --quiet "$module" 2>/dev/null; then
./verificar_funciones_pro_nativas.sh:321:        if systemctl is-active --quiet "$service" 2>/dev/null || command -v "$service" >/dev/null 2>&1; then
./verificar_funciones_pro_nativas.sh:353:        if systemctl is-active --quiet "$service" 2>/dev/null || command -v "$service" >/dev/null 2>&1; then
./verificar_funciones_pro_nativas.sh:467:    if systemctl is-active --quiet apache2 2>/dev/null; then
./verificar_funciones_pro_nativas.sh:482:    if systemctl is-active --quiet mysql 2>/dev/null; then
./implementar_seguridad_pro_completa.sh:140:    systemctl enable firewalld
./implementar_seguridad_pro_completa.sh:141:    systemctl start firewalld
./implementar_seguridad_pro_completa.sh:255:            systemctl enable fail2ban
./implementar_seguridad_pro_completa.sh:256:            systemctl restart fail2ban
./implementar_seguridad_pro_completa.sh:292:            systemctl enable fail2ban
./implementar_seguridad_pro_completa.sh:293:            systemctl restart fail2ban
./implementar_seguridad_pro_completa.sh:347:    systemctl restart ssh
./implementar_seguridad_pro_completa.sh:377:        systemctl restart apache2
./implementar_seguridad_pro_completa.sh:397:        systemctl restart httpd
./implementar_seguridad_pro_completa.sh:533:    if systemctl is-active --quiet ssh; then
./implementar_seguridad_pro_completa.sh:540:    if systemctl is-active --quiet apache2 || systemctl is-active --quiet httpd; then
./implementar_seguridad_pro_completa.sh:547:    if systemctl is-active --quiet mysql || systemctl is-active --quiet mariadb; then
./verificar_postfix_webmin.sh:146:            if systemctl is-active postfix >/dev/null 2>&1; then
./verificar_postfix_webmin.sh:148:            elif systemctl is-enabled postfix >/dev/null 2>&1; then
./verificar_postfix_webmin.sh:150:                log_info "Para iniciar: sudo systemctl start postfix"
./verificar_postfix_webmin.sh:153:                log_info "Para habilitar: sudo systemctl enable postfix"
./configuracion_post_instalacion.sh:269:        systemctl enable firewalld >/dev/null 2>&1
./configuracion_post_instalacion.sh:270:        systemctl start firewalld >/dev/null 2>&1
./configuracion_post_instalacion.sh:445:$(systemctl list-unit-files | grep -E "(webmin|apache|httpd|mysql|mariadb)" | grep enabled || echo "Verificar servicios manualmente")
./configuracion_post_instalacion.sh:471:- Verificar estado: systemctl status webmin
./configuracion_post_instalacion.sh:503:    systemctl restart apache2 >/dev/null 2>&1 || systemctl restart httpd >/dev/null 2>&1
./configuracion_post_instalacion.sh:504:    systemctl restart mysql >/dev/null 2>&1 || systemctl restart mariadb >/dev/null 2>&1
./configuracion_post_instalacion.sh:505:    systemctl restart webmin >/dev/null 2>&1
./instalacion_sistema_mejorado.sh:244:        systemctl reload rsyslog > /dev/null 2>&1 || true
./instalacion_sistema_mejorado.sh:340:        if systemctl list-unit-files | grep -q "^$servicio.service"; then
./instalacion_sistema_mejorado.sh:341:            if ! systemctl is-active --quiet "$servicio"; then
./instalacion_sistema_mejorado.sh:501:        if systemctl list-unit-files | grep -q "^$servicio.service"; then
./instalacion_sistema_mejorado.sh:502:            if systemctl is-active --quiet "$servicio"; then
./instalacion_sistema_mejorado.sh:592:        if systemctl list-unit-files | grep -q "^$servicio.service"; then
./instalacion_sistema_mejorado.sh:594:            systemctl restart "$servicio"
./instalacion_sistema_mejorado.sh:595:            if systemctl is-active --quiet "$servicio"; then
./instalacion_sistema_mejorado.sh:645:    if systemctl is-active --quiet ufw; then
./instalacion_sistema_mejorado.sh:651:    if systemctl is-active --quiet fail2ban; then
./instalacion_sistema_mejorado.sh:910:        if ! systemctl is-active --quiet "$servicio"; then
./reparador_ubuntu_webmin.sh:219:    systemctl enable apache2
./reparador_ubuntu_webmin.sh:224:    systemctl enable mysql
./reparador_ubuntu_webmin.sh:235:    systemctl enable postfix
./reparador_ubuntu_webmin.sh:240:    systemctl enable named
./reparador_ubuntu_webmin.sh:245:    systemctl enable dovecot
./reparador_ubuntu_webmin.sh:250:    systemctl enable fail2ban
./reparador_ubuntu_webmin.sh:320:        if systemctl enable "$service" 2>/dev/null && systemctl start "$service" 2>/dev/null; then
./reparador_ubuntu_webmin.sh:321:            if systemctl is-active --quiet "$service"; then
./reparador_ubuntu_webmin.sh:348:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./reparador_ubuntu_webmin.sh:411:    echo "Reiniciar Webmin: systemctl restart webmin"
./reparador_ubuntu_webmin.sh:413:    echo "Estado servicios: systemctl status webmin"
./sub_agente_tunel_nativo_automatico.sh:85:    systemctl restart sshd
./sub_agente_tunel_nativo_automatico.sh:121:    systemctl enable systemd-networkd
./sub_agente_tunel_nativo_automatico.sh:122:    systemctl restart systemd-networkd
./sub_agente_tunel_nativo_automatico.sh:211:    systemctl daemon-reload
./sub_agente_tunel_nativo_automatico.sh:212:    systemctl enable tunnel-forward-webmin tunnel-forward-http tunnel-forward-https
./sub_agente_tunel_nativo_automatico.sh:334:    systemctl restart nginx
./sub_agente_tunel_nativo_automatico.sh:411:    systemctl restart dnsmasq
./sub_agente_tunel_nativo_automatico.sh:412:    systemctl enable dnsmasq
./sub_agente_tunel_nativo_automatico.sh:538:        "nginx_proxy": "$(systemctl is-active nginx 2>/dev/null || echo 'inactive')",
./sub_agente_tunel_nativo_automatico.sh:539:        "tunnel_forward_webmin": "$(systemctl is-active tunnel-forward-webmin 2>/dev/null || echo 'inactive')",
./sub_agente_tunel_nativo_automatico.sh:540:        "dns_local": "$(systemctl is-active dnsmasq 2>/dev/null || echo 'inactive')"
./sub_agente_tunel_nativo_automatico.sh:544:        "fail2ban_active": "$(systemctl is-active fail2ban 2>/dev/null | grep -q 'active' && echo 'true' || echo 'false')"
./sub_agente_tunel_nativo_automatico.sh:564:    systemctl restart systemd-networkd
./sub_agente_tunel_nativo_automatico.sh:565:    systemctl restart tunnel-forward-webmin
./sub_agente_tunel_nativo_automatico.sh:566:    systemctl restart tunnel-forward-http
./sub_agente_tunel_nativo_automatico.sh:567:    systemctl restart tunnel-forward-https
./sub_agente_tunel_nativo_automatico.sh:568:    systemctl restart nginx
./sub_agente_tunel_nativo_automatico.sh:699:    systemctl daemon-reload
./sub_agente_tunel_nativo_automatico.sh:700:    systemctl enable tunnel-nativo.service tunnel-nativo-monitor.service
./sub_agente_tunel_nativo_automatico.sh:725:            systemctl start tunnel-nativo tunnel-nativo-monitor
./sub_agente_tunel_nativo_automatico.sh:731:            systemctl stop tunnel-nativo-monitor tunnel-nativo 2>/dev/null || true
./alta_disponibilidad_tunnel.sh:204:    systemctl daemon-reload
./alta_disponibilidad_tunnel.sh:205:    systemctl enable "cloudflared-$nombre"
./alta_disponibilidad_tunnel.sh:206:    systemctl start "cloudflared-$nombre"
./alta_disponibilidad_tunnel.sh:208:    if systemctl is-active --quiet "cloudflared-$nombre"; then
./alta_disponibilidad_tunnel.sh:253:    systemctl daemon-reload
./alta_disponibilidad_tunnel.sh:254:    systemctl enable "ngrok-$nombre"
./alta_disponibilidad_tunnel.sh:255:    systemctl start "ngrok-$nombre"
./alta_disponibilidad_tunnel.sh:258:    if systemctl is-active --quiet "ngrok-$nombre"; then
./alta_disponibilidad_tunnel.sh:296:    systemctl daemon-reload
./alta_disponibilidad_tunnel.sh:297:    systemctl enable "localtunnel-$nombre"
./alta_disponibilidad_tunnel.sh:298:    systemctl start "localtunnel-$nombre"
./alta_disponibilidad_tunnel.sh:301:    if systemctl is-active --quiet "localtunnel-$nombre"; then
./alta_disponibilidad_tunnel.sh:338:            systemctl stop "cloudflared-$nombre" || true
./alta_disponibilidad_tunnel.sh:339:            systemctl disable "cloudflared-$nombre" || true
./alta_disponibilidad_tunnel.sh:342:            systemctl stop "ngrok-$nombre" || true
./alta_disponibilidad_tunnel.sh:343:            systemctl disable "ngrok-$nombre" || true
./alta_disponibilidad_tunnel.sh:346:            systemctl stop "localtunnel-$nombre" || true
./alta_disponibilidad_tunnel.sh:347:            systemctl disable "localtunnel-$nombre" || true
./alta_disponibilidad_tunnel.sh:360:            systemctl is-active --quiet "cloudflared-$nombre" && echo "active" || echo "inactive"
./alta_disponibilidad_tunnel.sh:363:            systemctl is-active --quiet "ngrok-$nombre" && echo "active" || echo "inactive"
./alta_disponibilidad_tunnel.sh:366:            systemctl is-active --quiet "localtunnel-$nombre" && echo "active" || echo "inactive"
./alta_disponibilidad_tunnel.sh:644:    systemctl restart webmin
./alta_disponibilidad_tunnel.sh:648:    if systemctl is-active --quiet webmin; then
./alta_disponibilidad_tunnel.sh:661:    systemctl restart usermin
./alta_disponibilidad_tunnel.sh:664:    if systemctl is-active --quiet usermin; then
./alta_disponibilidad_tunnel.sh:677:    systemctl restart apache2
./alta_disponibilidad_tunnel.sh:680:    if systemctl is-active --quiet apache2; then
./alta_disponibilidad_tunnel.sh:693:    systemctl restart nginx
./alta_disponibilidad_tunnel.sh:696:    if systemctl is-active --quiet nginx; then
./alta_disponibilidad_tunnel.sh:709:    systemctl restart mysql
./alta_disponibilidad_tunnel.sh:712:    if systemctl is-active --quiet mysql; then
./alta_disponibilidad_tunnel.sh:725:    systemctl restart postgresql
./alta_disponibilidad_tunnel.sh:728:    if systemctl is-active --quiet postgresql; then
./alta_disponibilidad_tunnel.sh:820:    systemctl restart networking || true
./alta_disponibilidad_tunnel.sh:821:    systemctl restart systemd-networkd || true
./alta_disponibilidad_tunnel.sh:830:    systemctl restart networking || true
./alta_disponibilidad_tunnel.sh:940:    systemctl daemon-reload
./alta_disponibilidad_tunnel.sh:941:    systemctl enable ha-tunnel-monitor
./alta_disponibilidad_tunnel.sh:961:    systemctl start ha-tunnel-monitor
./alta_disponibilidad_tunnel.sh:995:    echo "   ‚Ä¢ systemctl status ha-tunnel-monitor"
./sub_agente_auto_instalador_ip_privada.sh:359:    systemctl daemon-reload
./sub_agente_auto_instalador_ip_privada.sh:360:    systemctl enable auto-installer-tunnel.service
./sub_agente_auto_instalador_ip_privada.sh:420:        systemctl restart webmin
./sub_agente_auto_instalador_ip_privada.sh:450:        if systemctl is-active --quiet apache2; then
./sub_agente_auto_instalador_ip_privada.sh:454:        if systemctl is-active --quiet nginx; then
./sub_agente_auto_instalador_ip_privada.sh:473:if systemctl is-active --quiet apache2; then
./sub_agente_auto_instalador_ip_privada.sh:474:    systemctl reload apache2
./sub_agente_auto_instalador_ip_privada.sh:477:if systemctl is-active --quiet nginx; then
./sub_agente_auto_instalador_ip_privada.sh:478:    systemctl reload nginx
./sub_agente_auto_instalador_ip_privada.sh:481:if systemctl is-active --quiet webmin; then
./sub_agente_auto_instalador_ip_privada.sh:482:    systemctl restart webmin
./sub_agente_auto_instalador_ip_privada.sh:519:        echo "Webmin: $(systemctl is-active webmin 2>/dev/null || echo 'no instalado')"
./sub_agente_auto_instalador_ip_privada.sh:521:        echo "Apache: $(systemctl is-active apache2 2>/dev/null || echo 'inactivo')"
./sub_agente_auto_instalador_ip_privada.sh:522:        echo "Nginx: $(systemctl is-active nginx 2>/dev/null || echo 'inactivo')"
./sub_agente_auto_instalador_ip_privada.sh:523:        echo "MySQL: $(systemctl is-active mysql 2>/dev/null || systemctl is-active mariadb 2>/dev/null || echo 'inactivo')"
./verificar_actualizaciones.sh:144:    if systemctl is-active --quiet webmin 2>/dev/null; then
./verificar_actualizaciones.sh:153:    if systemctl is-active --quiet apache2 2>/dev/null; then
./verificar_actualizaciones.sh:155:    elif systemctl is-active --quiet httpd 2>/dev/null; then
./verificar_actualizaciones.sh:162:    if systemctl is-active --quiet mysql 2>/dev/null; then
./verificar_actualizaciones.sh:164:    elif systemctl is-active --quiet mariadb 2>/dev/null; then
./verificar_actualizaciones.sh:345:        echo -e "   ‚öôÔ∏è  Inicia el servicio Webmin: ${BLUE}sudo systemctl start webmin${NC}"
./sub_agente_detector_duplicados.sh:137:    if systemctl is-active --quiet "$service" 2>/dev/null; then
./completar_seguridad_webmin_virtualmin.sh:158:                sudo systemctl enable firewalld 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:159:                sudo systemctl start firewalld 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:244:        sudo systemctl enable fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:245:        sudo systemctl start fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:276:        sudo systemctl restart apache2 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:294:        sudo systemctl restart httpd 2>/dev/null || true
./corregir_tuneles_100_efectividad.sh:129:# Funci√≥n para corregir systemctl en macOS
./corregir_tuneles_100_efectividad.sh:131:    log_info "Configurando alternativa a systemctl para macOS..."
./corregir_tuneles_100_efectividad.sh:133:    # Crear wrapper para systemctl usando launchctl
./corregir_tuneles_100_efectividad.sh:136:# Wrapper para systemctl usando launchctl en macOS
./corregir_tuneles_100_efectividad.sh:158:        echo "Comando systemctl simulado: $*"
./corregir_tuneles_100_efectividad.sh:164:    log_success "Wrapper de systemctl creado para macOS"
./sub_agente_seguridad_tunel_nativo.sh:81:    systemctl restart sshd
./sub_agente_seguridad_tunel_nativo.sh:164:    systemctl restart sshd
./sub_agente_seguridad_tunel_nativo.sh:277:    systemctl daemon-reload
./sub_agente_seguridad_tunel_nativo.sh:278:    systemctl enable tunnel-intrusion-detection.service
./sub_agente_seguridad_tunel_nativo.sh:316:    systemctl restart auditd
./sub_agente_seguridad_tunel_nativo.sh:447:        if ! systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_seguridad_tunel_nativo.sh:466:        echo "Detecci√≥n Intrusiones: $(systemctl is-active tunnel-intrusion-detection 2>/dev/null || echo "‚ùå INACTIVO")"
./sub_agente_seguridad_tunel_nativo.sh:468:        echo "Auditor√≠a: $(systemctl is-active auditd 2>/dev/null || echo "‚ùå INACTIVO")"
./diagnostico_servidores_virtuales.sh:171:            if systemctl is-active --quiet "$service" 2>/dev/null; then
./diagnostico_servidores_virtuales.sh:317:        echo "   sudo systemctl start apache2 mysql bind9 postfix"
./diagnostico_servidores_virtuales.sh:318:        echo "   sudo systemctl enable apache2 mysql bind9 postfix"
./sub_agente_optimizador.sh:390:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_optimizador.sh:392:            systemctl restart "$service"
./sub_agente_optimizador.sh:396:            if systemctl is-active --quiet "$service"; then
./sub_agente_optimizador.sh:436:            if systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_especialista_codigo.sh:123:    if ! systemctl is-active --quiet webmin 2>/dev/null; then
./sub_agente_especialista_codigo.sh:124:        if systemctl is-enabled --quiet webmin 2>/dev/null; then
./sub_agente_especialista_codigo.sh:200:        if ! systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_especialista_codigo.sh:298:                systemctl start webmin
./sub_agente_especialista_codigo.sh:302:                systemctl enable webmin
./sub_agente_especialista_codigo.sh:303:                systemctl start webmin
./sub_agente_especialista_codigo.sh:440:    systemctl restart webmin
./sub_agente_especialista_codigo.sh:469:    systemctl restart webmin
./sub_agente_especialista_codigo.sh:568:    systemctl enable "$service"
./sub_agente_especialista_codigo.sh:569:    systemctl start "$service"
./sub_agente_especialista_codigo.sh:571:    if systemctl is-active --quiet "$service"; then
./sub_agente_especialista_codigo.sh:589:        systemctl restart apache2
./sub_agente_especialista_codigo.sh:607:        systemctl restart postfix
./sub_agente_especialista_codigo.sh:617:    systemctl start mysql
./sub_agente_especialista_codigo.sh:691:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_especialista_codigo.sh:731:        if systemctl is-active --quiet webmin 2>/dev/null; then
./sub_agente_especialista_codigo.sh:752:            if systemctl is-active --quiet "$service" 2>/dev/null; then
./coordinador_sub_agentes.sh:472:    systemctl daemon-reload
./coordinador_sub_agentes.sh:473:    systemctl enable sub-agentes-webmin.service
./coordinador_sub_agentes.sh:476:    log_message "Usar: systemctl {start|stop|status} sub-agentes-webmin"
./sub_agente_seguridad_avanzada.sh:99:    systemctl restart fail2ban
./sub_agente_seguridad_avanzada.sh:100:    systemctl enable fail2ban
./sub_agente_seguridad_avanzada.sh:251:    systemctl reload apache2
./sub_agente_eliminar_duplicados_webmin_virtualmin.sh:417:    my $output = `systemctl is-active $service 2>/dev/null`;
./sub_agente_eliminar_duplicados_webmin_virtualmin.sh:514:            if systemctl is-active --quiet "$service" 2>/dev/null; then
./control_total_especializado.sh:163:    systemctl start sub-agentes-webmin
./control_total_especializado.sh:182:    echo "   systemctl status sub-agentes-webmin"
./control_total_especializado.sh:255:            local status=$(systemctl is-active "$service" 2>/dev/null || echo "inactive")
./sub_agente_ip_publica_nativa.sh:223:    systemctl daemon-reload
./sub_agente_ip_publica_nativa.sh:224:    systemctl enable nat-keepalive.service
./sub_agente_ip_publica_nativa.sh:225:    systemctl start nat-keepalive.service
./sub_agente_ip_publica_nativa.sh:295:    systemctl restart bind9
./sub_agente_ip_publica_nativa.sh:296:    systemctl enable bind9
./instalador_webmin_virtualmin_corregido.sh:324:        systemctl enable apache2
./instalador_webmin_virtualmin_corregido.sh:331:        systemctl enable mysql
./instalador_webmin_virtualmin_corregido.sh:361:        systemctl stop webmin 2>/dev/null || true
./instalador_webmin_virtualmin_corregido.sh:534:        if ! systemctl enable "$service" 2>/dev/null; then
./instalador_webmin_virtualmin_corregido.sh:540:        if ! systemctl start "$service"; then
./instalador_webmin_virtualmin_corregido.sh:550:            if systemctl is-active --quiet "$service"; then
./instalador_webmin_virtualmin_corregido.sh:560:                systemctl status "$service" --no-pager || true
./instalador_webmin_virtualmin_corregido.sh:669:    systemctl --type=service --state=active | grep -E "(webmin|apache|mysql)" || echo "Ver con: systemctl status webmin"
./instalador_webmin_virtualmin_corregido.sh:681:    echo "Reiniciar Webmin: systemctl restart webmin"
./instalador_webmin_virtualmin_corregido.sh:683:    echo "Estado: systemctl status webmin"
./actualizar_sistema.sh:278:    if systemctl is-active --quiet webmin; then
./actualizar_sistema.sh:279:        systemctl restart webmin
./actualizar_sistema.sh:287:    if systemctl is-active --quiet apache2; then
./actualizar_sistema.sh:288:        systemctl restart apache2
./actualizar_sistema.sh:290:    elif systemctl is-active --quiet httpd; then
./actualizar_sistema.sh:291:        systemctl restart httpd
./agente_devops_webmin.sh:403:            apachectl -k graceful || sudo systemctl reload apache2 || true
./agente_devops_webmin.sh:405:            sudo nginx -s reload || sudo systemctl reload nginx || true
./agente_devops_webmin.sh:407:        sudo systemctl restart webmin || true
./agente_devops_webmin.sh:408:        sudo systemctl restart usermin || true
./integrar_validaciones_postfix.sh:580:3. Reiniciar servicio: `sudo systemctl restart postfix`
./diagnostico_completo.sh:110:        if systemctl list-unit-files 2>/dev/null | grep -q "^$service.service" || \
./diagnostico_completo.sh:113:            if systemctl is-active --quiet "$service" 2>/dev/null || \
./diagnostico_completo.sh:351:        if systemctl is-active --quiet "$apache_cmd" 2>/dev/null; then
./diagnostico_completo.sh:375:        if systemctl is-active --quiet nginx 2>/dev/null; then
./verificacion_final_completa_ubuntu_debian.sh:156:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_final_completa_ubuntu_debian.sh:430:        if systemctl is-active --quiet fail2ban; then
./verificar_tunel_automatico_mejorado.sh:130:    if ! systemctl is-active --quiet ufw; then
./verificar_tunel_automatico_mejorado.sh:135:    if ! systemctl is-active --quiet fail2ban; then
./verificar_tunel_automatico_mejorado.sh:198:        if systemctl list-unit-files | grep -q "^$servicio.service"; then
./verificar_tunel_automatico_mejorado.sh:199:            if ! systemctl is-active --quiet "$servicio"; then
./verificar_tunel_automatico_mejorado.sh:204:                if systemctl restart "$servicio" 2>/dev/null; then
./verificar_tunel_automatico_mejorado.sh:253:    if systemctl is-active --quiet cloudflared-webmin; then
./verificar_tunel_automatico_mejorado.sh:257:    if systemctl is-active --quiet ngrok-webmin; then
./verificar_tunel_automatico_mejorado.sh:434:    systemctl daemon-reload
./verificar_tunel_automatico_mejorado.sh:435:    systemctl enable auto-tunnel-manager-v2
./verificar_tunel_automatico_mejorado.sh:464:    echo "   ‚Ä¢ systemctl status auto-tunnel-manager-v2"
./monitor_despliegues.sh:154:            systemctl is-active apache2 >/dev/null 2>&1 && echo 'OK' || echo 'FAIL'
./monitor_despliegues.sh:156:            systemctl is-active nginx >/dev/null 2>&1 && echo 'OK' || echo 'FAIL'
./corregir_problemas_seguridad.sh:132:    if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:133:        systemctl is-active --quiet "$service_name" 2>/dev/null
./corregir_problemas_seguridad.sh:361:        if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:362:            systemctl list-units --type=service --state=running | grep -E "webmin|apache|nginx|mysql|mariadb|postgresql|ssh|fail2ban" >> "$REPORT_FILE"
./corregir_problemas_seguridad.sh:796:                if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:797:                    systemctl restart webmin
./corregir_problemas_seguridad.sh:1010:            if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1011:                systemctl restart "$APACHE_CMD"
./corregir_problemas_seguridad.sh:1157:            if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1158:                systemctl restart nginx
./corregir_problemas_seguridad.sh:1282:            if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1283:                systemctl restart "$SERVICE_NAME"
./corregir_problemas_seguridad.sh:1450:            if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1451:                systemctl restart "$SERVICE_NAME"
./corregir_problemas_seguridad.sh:1541:                    systemctl enable --now firewalld
./corregir_problemas_seguridad.sh:1918:                if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1919:                    systemctl restart fail2ban
./corregir_problemas_seguridad.sh:1926:                if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1927:                    systemctl enable --now fail2ban
./verificacion_final_autonomo.sh:88:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_final_autonomo.sh:89:            local status=$(systemctl is-enabled "$service" 2>/dev/null || echo "disabled")
./verificacion_final_autonomo.sh:317:        if systemctl is-active --quiet firewalld; then
./verificacion_final_autonomo.sh:442:        if systemctl is-active --quiet fail2ban; then
./pruebas_sistema_completo.sh:34:    if systemctl is-active --quiet webmin 2>/dev/null; then
./pruebas_sistema_completo.sh:126:    if systemctl is-active --quiet apache2 || systemctl is-active --quiet nginx; then
./pruebas_sistema_completo.sh:172:    if systemctl is-active --quiet mysql || systemctl is-active --quiet mariadb; then
./pruebas_sistema_completo.sh:190:    if systemctl is-active --quiet postgresql; then
./pruebas_sistema_completo.sh:209:    if systemctl is-active --quiet fail2ban; then
./pruebas_sistema_completo.sh:227:    if systemctl is-active --quiet ssh; then
./pruebas_sistema_completo.sh:306:    if systemctl is-active --quiet redis-server; then
./pruebas_sistema_completo.sh:408:        systemctl list-units --type=service --state=active | grep -E "webmin|apache|nginx|mysql|redis|fail2ban" || echo "Servicios no encontrados"
./servidor_publico_autonomo.sh:125:        systemctl restart network
./servidor_publico_autonomo.sh:231:    systemctl enable bind9 || systemctl enable named
./servidor_publico_autonomo.sh:232:    systemctl restart bind9 || systemctl restart named
./servidor_publico_autonomo.sh:404:    systemctl enable apache2 || systemctl enable httpd
./servidor_publico_autonomo.sh:405:    systemctl restart apache2 || systemctl restart httpd
./servidor_publico_autonomo.sh:523:    systemctl enable postfix dovecot opendkim
./servidor_publico_autonomo.sh:524:    systemctl restart postfix dovecot opendkim bind9
./servidor_publico_autonomo.sh:556:        systemctl enable firewalld
./servidor_publico_autonomo.sh:557:        systemctl start firewalld
./servidor_publico_autonomo.sh:622:        systemctl reload apache2
./servidor_publico_autonomo.sh:635:        systemctl reload postfix
./servidor_publico_autonomo.sh:640:    systemctl enable fail2ban
./servidor_publico_autonomo.sh:641:    systemctl start fail2ban
./servidor_publico_autonomo.sh:662:    if systemctl is-active --quiet "$service" 2>/dev/null; then
./agregar_funciones_pro_faltantes.sh:170:            systemctl enable firewalld
./agregar_funciones_pro_faltantes.sh:171:            systemctl start firewalld
./agregar_funciones_pro_faltantes.sh:216:            systemctl enable dovecot
./agregar_funciones_pro_faltantes.sh:217:            systemctl restart dovecot
./agregar_funciones_pro_faltantes.sh:232:            systemctl enable dovecot
./agregar_funciones_pro_faltantes.sh:233:            systemctl restart dovecot
./agregar_funciones_pro_faltantes.sh:264:            systemctl enable spamassassin
./agregar_funciones_pro_faltantes.sh:265:            systemctl start spamassassin
./agregar_funciones_pro_faltantes.sh:275:            systemctl enable spamassassin
./agregar_funciones_pro_faltantes.sh:276:            systemctl start spamassassin
./agregar_funciones_pro_faltantes.sh:309:            systemctl reload apache2
./diagnostico_ubuntu_webmin.sh:246:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./diagnostico_ubuntu_webmin.sh:249:            if systemctl is-enabled --quiet "$service" 2>/dev/null; then
./diagnostico_ubuntu_webmin.sh:251:                add_solution "Iniciar servicio: systemctl start $service"
./diagnostico_ubuntu_webmin.sh:255:                    add_solution "Habilitar e iniciar: systemctl enable --now $service"
./configurar_puerto_10000_publico.sh:111:            systemctl enable firewalld >/dev/null 2>&1
./configurar_puerto_10000_publico.sh:112:            systemctl start firewalld >/dev/null 2>&1
./configurar_puerto_10000_publico.sh:218:    if systemctl restart webmin >/dev/null 2>&1; then
./configurar_puerto_10000_publico.sh:226:    if systemctl is-active usermin >/dev/null 2>&1; then
./configurar_puerto_10000_publico.sh:227:        systemctl restart usermin >/dev/null 2>&1
./verificador_servicios.sh:44:    if ! systemctl list-unit-files | grep -q "^${service_name}\.service" 2>/dev/null; then
./verificador_servicios.sh:50:    if systemctl is-active --quiet "$service_name" 2>/dev/null; then
./verificador_servicios.sh:76:        if systemctl is-enabled --quiet "$service_name" 2>/dev/null; then
./verificador_servicios.sh:337:if ! systemctl is-active --quiet webmin 2>/dev/null; then
./scripts/auditoria_repo.sh:91:# Uso de systemctl
./generar_informe_seguridad_completo.sh:319:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:320:            if systemctl is-active --quiet $APACHE_CMD; then
./generar_informe_seguridad_completo.sh:432:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:433:            if systemctl is-active --quiet nginx; then
./generar_informe_seguridad_completo.sh:532:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:533:            if systemctl is-active --quiet mysql || systemctl is-active --quiet mariadb; then
./generar_informe_seguridad_completo.sh:608:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:609:            if systemctl is-active --quiet postgresql; then
./generar_informe_seguridad_completo.sh:689:        if systemctl is-active --quiet firewalld; then
./generar_informe_seguridad_completo.sh:770:    elif ! (systemctl is-active --quiet firewalld 2>/dev/null || ufw status | grep -q "Status: active" || (command -v iptables &> /dev/null && [ "$(iptables -L -n | grep -v "Chain" | grep -v "target" | grep -v "^$" | wc -l)" -gt 0 ]) || (command -v pfctl &> /dev/null && pfctl -s info | grep -q "Status: Enabled")); then
./generar_informe_seguridad_completo.sh:796:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:797:            if systemctl is-active --quiet sshd; then
./generar_informe_seguridad_completo.sh:1062:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:1063:            if systemctl is-enabled $service &>/dev/null; then
./generar_informe_seguridad_completo.sh:1064:                if systemctl is-active --quiet $service; then
./generar_informe_seguridad_completo.sh:1071:            elif systemctl is-enabled $service &>/dev/null; then
./revision_completa_master.sh:212:   ‚Ä¢ Reiniciar Webmin: sudo systemctl restart webmin
./revision_completa_master.sh:213:   ‚Ä¢ Reiniciar Apache: sudo systemctl restart apache2
./actualizar_desde_repo_oficial.sh:144:  systemctl daemon-reload
./actualizar_desde_repo_oficial.sh:145:  systemctl enable --now wv-repo-update.timer >/dev/null 2>&1 || true
./actualizar_desde_repo_oficial.sh:150:  systemctl disable --now wv-repo-update.timer >/dev/null 2>&1 || true
./actualizar_desde_repo_oficial.sh:152:  systemctl daemon-reload
./actualizar_desde_repo_oficial.sh:160:  systemctl list-timers --all 2>/dev/null | grep -q wv-repo-update.timer && echo "Timer: ACTIVO" || echo "Timer: NO ACTIVO"
./instalacion_un_comando.sh:101:    systemctl start apache2 2>/dev/null || true
./instalacion_un_comando.sh:102:    systemctl start mysql 2>/dev/null || true
./instalacion_un_comando.sh:508:    if systemctl is-active --quiet webmin; then
./instalacion_un_comando.sh:512:        systemctl enable webmin
./instalacion_un_comando.sh:513:        systemctl start webmin
./instalacion_un_comando.sh:515:        if systemctl is-active --quiet webmin; then
./instalacion_un_comando.sh:626:        systemctl restart webmin
./instalacion_un_comando.sh:652:    systemctl enable --now spamassassin >/dev/null 2>&1 || systemctl enable --now spamd >/dev/null 2>&1 || true
./instalacion_un_comando.sh:655:    systemctl enable --now clamav-freshclam >/dev/null 2>&1 || true
./instalacion_un_comando.sh:656:    systemctl enable --now clamav-daemon >/dev/null 2>&1 || true
./instalacion_un_comando.sh:669:    systemctl enable --now opendkim >/dev/null 2>&1 || true
./instalacion_un_comando.sh:697:        systemctl restart postfix >/dev/null 2>&1 || true
./instalacion_un_comando.sh:719:    systemctl enable --now fail2ban >/dev/null 2>&1 || true
./instalacion_un_comando.sh:722:    systemctl enable --now dovecot >/dev/null 2>&1 || true
./instalacion_un_comando.sh:769:    systemctl enable --now redis-server >/dev/null 2>&1 || true
./instalacion_un_comando.sh:770:    systemctl enable --now memcached >/dev/null 2>&1 || true
./instalacion_un_comando.sh:774:    systemctl enable --now php7.4-fpm >/dev/null 2>&1 || true
./instalacion_un_comando.sh:775:    systemctl enable --now php8.1-fpm >/dev/null 2>&1 || true
./instalacion_un_comando.sh:776:    systemctl enable --now php8.2-fpm >/dev/null 2>&1 || true
./instalacion_un_comando.sh:779:    systemctl restart apache2 >/dev/null 2>&1 || true
./instalacion_un_comando.sh:788:    systemctl enable --now webmin >/dev/null 2>&1 || true
./instalacion_un_comando.sh:789:    if systemctl list-unit-files 2>/dev/null | grep -q "^usermin\.service"; then
./instalacion_un_comando.sh:790:        systemctl enable --now usermin >/dev/null 2>&1 || true
./instalacion_un_comando.sh:865:        systemctl restart webmin >/dev/null 2>&1 || true
./instalacion_un_comando.sh:947:    systemctl restart webmin >/dev/null 2>&1 || true
./instalacion_un_comando.sh:948:    systemctl restart usermin >/dev/null 2>&1 || true
./instalacion_un_comando.sh:983:        systemctl restart webmin
./instalacion_un_comando.sh:1006:    if systemctl is-active --quiet mysql; then
./instalacion_un_comando.sh:1021:            systemctl restart mysql
./instalacion_un_comando.sh:1035:            systemctl restart mysql
./instalacion_un_comando.sh:1043:    if systemctl is-active --quiet apache2; then
./instalacion_un_comando.sh:1064:        systemctl restart apache2
./instalacion_un_comando.sh:1081:        if systemctl is-active --quiet "$service"; then
./instalacion_un_comando.sh:1234:        if ! systemctl is-active --quiet "$service"; then
./instalacion_un_comando.sh:1236:            systemctl restart "$service" || service "$service" restart || true
./instalacion_un_comando.sh:1238:            if systemctl is-active --quiet "$service"; then
./lib/common_functions.sh:140:    if command -v systemctl >/dev/null 2>&1; then
./lib/common_functions.sh:141:        if systemctl is-active "$service" >/dev/null 2>&1; then
./sub_agente_wordpress_laravel.sh:269:    systemctl restart varnish
./sub_agente_wordpress_laravel.sh:270:    systemctl enable varnish
./revision_completa_sistema.sh:234:                if systemctl is-active "$service" >/dev/null 2>&1; then
./revision_completa_sistema.sh:236:                elif systemctl is-enabled "$service" >/dev/null 2>&1; then
./sub_agente_seguridad_servidores_virtuales.sh:106:    if systemctl is-active --quiet apache2; then
./sub_agente_seguridad_servidores_virtuales.sh:166:        systemctl reload apache2
./sub_agente_seguridad_servidores_virtuales.sh:172:    if systemctl is-active --quiet nginx; then
./sub_agente_seguridad_servidores_virtuales.sh:221:        systemctl reload nginx
./sub_agente_seguridad_servidores_virtuales.sh:235:    systemctl stop clamav-freshclam
./sub_agente_seguridad_servidores_virtuales.sh:237:    systemctl start clamav-freshclam
./sub_agente_seguridad_servidores_virtuales.sh:238:    systemctl start clamav-daemon
./sub_agente_seguridad_servidores_virtuales.sh:318:    systemctl daemon-reload
./sub_agente_seguridad_servidores_virtuales.sh:319:    systemctl restart apache2
./sub_agente_seguridad_servidores_virtuales.sh:423:    systemctl daemon-reload
./sub_agente_seguridad_servidores_virtuales.sh:424:    systemctl enable monitor-tiempo-real.service
./sub_agente_seguridad_servidores_virtuales.sh:498:    systemctl reload apache2
./sub_agente_monitor_servidores_virtuales.sh:244:        if systemctl list-unit-files | grep -q "^${service}.service"; then
./sub_agente_monitor_servidores_virtuales.sh:245:            if ! systemctl is-active --quiet "$service"; then
./sub_agente_monitor_servidores_virtuales.sh:247:                systemctl restart "$service" 2>/dev/null || true
./sub_agente_monitor_servidores_virtuales.sh:252:                if systemctl is-active --quiet "$service"; then
./sub_agente_monitor_servidores_virtuales.sh:438:            systemctl reload apache2
./sub_agente_monitor_servidores_virtuales.sh:459:            nginx -s reload 2>/dev/null || systemctl restart nginx
./verificacion_completa_funciones.sh:181:            if systemctl list-unit-files | grep -q "^$service.service"; then
./verificacion_completa_funciones.sh:182:                if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_completa_funciones.sh:183:                    local status=$(systemctl is-enabled "$service" 2>/dev/null || echo "unknown")
./verificacion_completa_funciones.sh:200:                    if systemctl list-unit-files | grep -q "^$service.service"; then
./verificacion_completa_funciones.sh:201:                        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_completa_funciones.sh:750:        echo "   ‚Ä¢ sudo systemctl status webmin               # Estado de Webmin"
./verificacion_completa_funciones.sh:751:        echo "   ‚Ä¢ sudo systemctl status apache2              # Estado de Apache"
./sistema_tunel_persistente_seguro.sh:123:    if systemctl is-active --quiet nginx; then
./sistema_tunel_persistente_seguro.sh:126:        systemctl reload nginx
./sistema_tunel_persistente_seguro.sh:162:            if systemctl is-active --quiet nginx && [ -L "/etc/nginx/sites-enabled/tunnel-native-proxy" ]; then
./sistema_tunel_persistente_seguro.sh:241:                systemctl restart webmin apache2 nginx 2>/dev/null || true
./sistema_tunel_persistente_seguro.sh:296:    systemctl daemon-reload
./sistema_tunel_persistente_seguro.sh:297:    systemctl enable tunel-persistente.service
./sistema_tunel_persistente_seguro.sh:331:    systemctl daemon-reload
./sistema_tunel_persistente_seguro.sh:334:        systemctl enable "$service_name"
./sistema_tunel_persistente_seguro.sh:416:            systemctl restart tunel-persistente 2>/dev/null || true
./sistema_tunel_persistente_seguro.sh:420:            systemctl restart tunel-persistente tunnel-backup-* 2>/dev/null || true
./sistema_tunel_persistente_seguro.sh:421:            systemctl restart webmin nginx apache2 2>/dev/null || true
./sistema_tunel_persistente_seguro.sh:437:            systemctl restart tunel-persistente
./sistema_tunel_persistente_seguro.sh:457:        if ! systemctl is-active --quiet tunel-persistente; then
./sistema_tunel_persistente_seguro.sh:533:    systemctl daemon-reload
./sistema_tunel_persistente_seguro.sh:534:    systemctl enable tunel-watchdog.service
./sistema_tunel_persistente_seguro.sh:558:    systemctl stop tunel-persistente tunel-watchdog tunnel-backup-* 2>/dev/null || true
./sistema_tunel_persistente_seguro.sh:573:    systemctl start tunel-persistente tunel-watchdog
./sistema_tunel_persistente_seguro.sh:753:    systemctl start tunel-persistente tunel-watchdog
./sistema_tunel_persistente_seguro.sh:782:            systemctl start tunel-persistente tunel-watchdog
./sistema_tunel_persistente_seguro.sh:786:            systemctl stop tunel-watchdog tunel-persistente tunnel-backup-* 2>/dev/null || true
./sub_agente_tunel_inteligente.sh:354:        systemctl daemon-reload
./sub_agente_tunel_inteligente.sh:355:        systemctl enable tunnel-monitor.service
./verificar_instalacion_un_comando.sh:80:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificar_instalacion_un_comando.sh:81:            local status=$(systemctl is-enabled "$service" 2>/dev/null)
./verificar_instalacion_un_comando.sh:205:    if systemctl is-active --quiet apache2; then
./verificar_instalacion_un_comando.sh:222:    if systemctl is-active --quiet mysql; then
./verificar_instalacion_un_comando.sh:259:    if systemctl is-active --quiet postfix; then
./verificar_instalacion_un_comando.sh:273:    if systemctl is-active --quiet dovecot 2>/dev/null; then
./test_sistema_completo.sh:96:    systemctl is-active --quiet "$service_name" 2>/dev/null
./test_sistema_completo.sh:192:run_test "Comando systemctl disponible" "test_command_exists 'systemctl'"
./optimizacion_servidor_autonomo.sh:311:    systemctl restart apache2
./optimizacion_servidor_autonomo.sh:321:    if systemctl is-active --quiet mysql 2>/dev/null; then
./optimizacion_servidor_autonomo.sh:323:    elif systemctl is-active --quiet mariadb 2>/dev/null; then
./optimizacion_servidor_autonomo.sh:333:        systemctl enable "$MYSQL_SERVICE"
./optimizacion_servidor_autonomo.sh:334:        systemctl start "$MYSQL_SERVICE"
./optimizacion_servidor_autonomo.sh:460:    systemctl restart "$MYSQL_SERVICE"
./optimizacion_servidor_autonomo.sh:537:    systemctl restart apache2
./optimizacion_servidor_autonomo.sh:665:    if ! systemctl is-active --quiet "$service" 2>/dev/null; then
./optimizacion_servidor_autonomo.sh:668:        systemctl restart "$service"
./optimizacion_servidor_autonomo.sh:669:        if systemctl is-active --quiet "$service"; then
./optimizacion_servidor_autonomo.sh:788:    systemctl restart apache2
./optimizacion_servidor_autonomo.sh:789:    systemctl restart mysql || systemctl restart mariadb
./verificar_funcionamiento_completo_ubuntu_debian.sh:101:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificar_funcionamiento_completo_ubuntu_debian.sh:251:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificar_funcionamiento_completo_ubuntu_debian.sh:273:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_rapida_estado.sh:64:    if command -v systemctl &> /dev/null; then
./verificacion_rapida_estado.sh:65:        systemctl is-active --quiet "$service_name" 2>/dev/null
./orquestador_verificacion_pro.sh:49:if systemctl list-unit-files 2>/dev/null | grep -q '^webmin\.service'; then
./orquestador_verificacion_pro.sh:50:    systemctl is-active --quiet webmin 2>/dev/null && log_success "Webmin activo" || { log_warning "Webmin inactivo"; overall_errors=$((overall_errors + 1)); }
./orquestador_verificacion_pro.sh:102:    systemctl is-active --quiet haproxy 2>/dev/null && log_success "HAProxy activo" || log_info "HAProxy instalado pero inactivo"
./orquestador_verificacion_pro.sh:109:if systemctl list-unit-files 2>/dev/null | grep -q '^tunel-nativo\.service'; then
./orquestador_verificacion_pro.sh:110:    systemctl is-active --quiet tunel-nativo 2>/dev/null && log_success "tunel-nativo activo" || { log_warning "tunel-nativo inactivo"; overall_errors=$((overall_errors + 1)); }
./sub_agente_actualizaciones.sh:209:        if systemctl is-enabled --quiet "$service" 2>/dev/null; then
./sub_agente_actualizaciones.sh:210:            if ! systemctl is-active --quiet "$service"; then
./sub_agente_actualizaciones.sh:215:                systemctl restart "$service" >/dev/null 2>&1
./sub_agente_actualizaciones.sh:216:                if systemctl is-active --quiet "$service"; then
./sub_agente_actualizaciones.sh:277:        systemctl --type=service --state=active | grep -E "(webmin|apache|nginx|mysql|postgresql|postfix|ssh)"
./tunel_nativo_sin_terceros.sh:161:                systemctl enable firewalld || true
./tunel_nativo_sin_terceros.sh:162:                systemctl start firewalld || true
./tunel_nativo_sin_terceros.sh:276:    if command -v systemctl >/dev/null 2>&1; then
./tunel_nativo_sin_terceros.sh:277:        systemctl restart fail2ban || true
./tunel_nativo_sin_terceros.sh:363:            if command -v systemctl >/dev/null 2>&1; then
./tunel_nativo_sin_terceros.sh:364:                systemctl restart haproxy || true
./tunel_nativo_sin_terceros.sh:365:                systemctl enable haproxy || true
./tunel_nativo_sin_terceros.sh:475:        systemctl daemon-reload
./tunel_nativo_sin_terceros.sh:476:        systemctl enable --now $SERVICE_NAME
./tunel_nativo_sin_terceros.sh:485:        systemctl status $SERVICE_NAME
./tunel_nativo_sin_terceros.sh:532:            systemctl stop $SERVICE_NAME || true
./tunel_nativo_sin_terceros.sh:533:            systemctl disable $SERVICE_NAME || true
./tunel_nativo_sin_terceros.sh:536:            systemctl daemon-reload
./verificacion_seguridad_produccion.sh:114:    if systemctl is-active --quiet "$service_name" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:188:    if systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:193:    if systemctl is-enabled --quiet "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:214:            if systemctl start "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:223:            if systemctl stop "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:232:            if systemctl restart "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:241:            if systemctl enable "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:656:        line=$(echo "$line" | sed 's/systemctl is-active --quiet/manage_service status/g')
```


## Recomendaciones r√°pidas

- A√±adir set -euo pipefail e IFS seguro en scripts listados arriba.
- Agregar require_root cuando se escriba en /etc, /var o se use systemctl.
- Evitar sudo dentro de scripts que ya requieren root.
- Revisar usos de eval y rm -rf.
