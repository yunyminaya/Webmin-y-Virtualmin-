# Revisi√≥n completa del c√≥digo
Fecha: domingo, 10 de agosto de 2025, 12:26:14 EDT

## Resumen
- Scripts .sh: 84

## Scripts sin shebang (l√≠nea 1)
```
```

## Scripts sin modo estricto (set -euo pipefail)
```
./instalar_postfix.sh
./instalar_devops_completo.sh
./corregir_advertencias.sh
./webmin_postfix_check.sh
./virtualmin-gpl-master/createvirtualminmodule.sh
./virtualmin-gpl-master/setup-repos.sh
./desinstalar.sh
./instalar_webmin_virtualmin.sh
./monitoreo_sistema.sh
./instalar_integracion.sh
./revision_funciones_webmin.sh
./generar_reporte_devops_final.sh
./sub_agente_seguridad.sh
./verificar_funciones_pro_nativas.sh
./implementar_seguridad_pro_completa.sh
./corregir_error_postfix.sh
./verificar_postfix_webmin.sh
./configuracion_post_instalacion.sh
./verificar_actualizaciones.sh
./completar_seguridad_webmin_virtualmin.sh
./sub_agente_logs.sh
./asegurar_paneles_webmin_virtualmin.sh
./diagnostico_servidores_virtuales.sh
./verificar_seguridad_webmin_virtualmin.sh
./postfix_validation_functions.sh
./test_instalacion_completa.sh
./completar_seguridad_macos.sh
./actualizar_sistema.sh
./agente_devops_webmin.sh
./integrar_validaciones_postfix.sh
./diagnostico_completo.sh
./aplicar_configuraciones_seguridad.sh
./test_ssh_credentials.sh
./verificar_funciones_pro_completas.sh
./monitor_despliegues.sh
./corregir_problemas_seguridad.sh
./diagnosticar_y_corregir_errores.sh
./verificacion_final_autonomo.sh
./verificar_asistente_wizard.sh
./servidor_publico_autonomo.sh
./agregar_funciones_pro_faltantes.sh
./sub_agente_backup.sh
./github_webhook_integration.sh
./verificador_servicios.sh
./analisis_codigo_funciones.sh
./generar_informe_seguridad_completo.sh
./virtualmin_postfix_check.sh
./revision_completa_sistema.sh
./programar_verificacion_seguridad.sh
./implementar_seguridad_pro_macos.sh
./verificacion_completa_funciones.sh
./configurar_agente_devops.sh
./verificar_sistema_pro.sh
./authentic-theme-master/theme-update.sh
./optimizacion_servidor_autonomo.sh
./verificar_funcionamiento_completo_ubuntu_debian.sh
./activar_ssh_macos.sh
./verificar_pro_simple.sh
./verificacion_rapida_estado.sh
./corregir_asistente_postinstalacion.sh
./devops_master.sh
./sub_agente_actualizaciones.sh
./activar_ssh_forzado.sh
```

## Errores de sintaxis (bash -n)
```
```

## Uso de sudo dentro de scripts
```
./instalar_postfix.sh:44:            sudo apt-get update
./instalar_postfix.sh:45:            sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./instalar_postfix.sh:49:            sudo yum install -y postfix || sudo dnf install -y postfix
./instalar_postfix.sh:54:            echo "  sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist"
./instalar_devops_completo.sh:111:            sudo apt-get update -y
./instalar_devops_completo.sh:115:                sudo apt-get install -y "$dep" || show_warning "No se pudo instalar $dep"
./instalar_devops_completo.sh:121:                sudo yum install -y "$dep" || sudo dnf install -y "$dep" || show_warning "No se pudo instalar $dep"
./webmin_postfix_check.sh:46:        echo "   1. Instalar Postfix: sudo apt-get install postfix"
./instalar.sh:6:# Comando √∫nico: curl -sSL https://raw.githubusercontent.com/yunyminaya/Webmin-y-Virtualmin-/master/instalar.sh | sudo bash
./instalar.sh:58:    apt-get install -y net-tools iproute2 curl wget sudo gnupg2 lsb-release apt-transport-https ca-certificates software-properties-common
./instalar.sh:65:        error "Este script debe ejecutarse como root. Usa: sudo $0"
./desinstalar.sh:65:    elif command -v sudo >/dev/null 2>&1; then
./instalar_webmin_virtualmin.sh:110:        sudo apt-get update && sudo apt-get install -y git
./instalar_webmin_virtualmin.sh:113:        sudo yum install -y git
./instalar_webmin_virtualmin.sh:116:        sudo dnf install -y git
./instalar_webmin_virtualmin.sh:155:                sudo apt-get install -y unzip
./orquestador_seguridad_pro.sh:4:#   sudo bash orquestador_seguridad_pro.sh            # Solo verificar
./orquestador_seguridad_pro.sh:5:#   sudo bash orquestador_seguridad_pro.sh --fix      # Verificar y corregir autom√°ticamente
./orquestador_seguridad_pro.sh:34:    err "Se requieren privilegios de root. Usa: sudo $0 [--fix]"
./corregir_error_postfix.sh:164:        log_info "Para instalar Postfix: sudo apt-get install postfix (Ubuntu/Debian) o sudo yum install postfix (CentOS/RHEL)"
./corregir_error_postfix.sh:266:            sudo apt-get update
./corregir_error_postfix.sh:267:            sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./corregir_error_postfix.sh:271:            sudo yum install -y postfix || sudo dnf install -y postfix
./corregir_error_postfix.sh:276:            echo "  sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist"
./verificar_postfix_webmin.sh:141:                log_info "Para iniciar: sudo systemctl start postfix"
./verificar_postfix_webmin.sh:144:                log_info "Para habilitar: sudo systemctl enable postfix"
./verificar_postfix_webmin.sh:152:                log_info "Para activar: sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist"
./verificar_postfix_webmin.sh:209:        sudo mkdir -p /etc/postfix
./verificar_postfix_webmin.sh:211:        cat << EOF | sudo tee /etc/postfix/main.cf > /dev/null
./verificar_postfix_webmin.sh:267:                sudo apt-get update
./verificar_postfix_webmin.sh:268:                sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./verificar_postfix_webmin.sh:273:                    sudo dnf install -y postfix
./verificar_postfix_webmin.sh:275:                    sudo yum install -y postfix
./verificar_postfix_webmin.sh:281:                sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist 2>/dev/null || true
./reparador_ubuntu_webmin.sh:48:        echo "Ejecutar: sudo $0"
./verificar_actualizaciones.sh:326:        echo -e "   üîÑ Ejecuta ${BLUE}sudo ./actualizar_sistema.sh${NC} para actualizar Authentic Theme"
./verificar_actualizaciones.sh:336:        echo -e "   ‚öôÔ∏è  Inicia el servicio Webmin: ${BLUE}sudo systemctl start webmin${NC}"
./completar_seguridad_webmin_virtualmin.sh:118:            sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on 2>/dev/null || \
./completar_seguridad_webmin_virtualmin.sh:122:            sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/sbin/sshd 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:123:            sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/sbin/apache2 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:135:                sudo ufw --force enable 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:138:                sudo ufw allow ssh 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:139:                sudo ufw allow 80/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:140:                sudo ufw allow 443/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:141:                sudo ufw allow 10000/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:142:                sudo ufw allow 20000/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:149:                sudo systemctl enable firewalld 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:150:                sudo systemctl start firewalld 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:153:                sudo firewall-cmd --permanent --add-service=ssh 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:154:                sudo firewall-cmd --permanent --add-service=http 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:155:                sudo firewall-cmd --permanent --add-service=https 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:156:                sudo firewall-cmd --permanent --add-port=10000/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:157:                sudo firewall-cmd --permanent --add-port=20000/tcp 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:158:                sudo firewall-cmd --reload 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:176:    sudo mkdir -p /var/log/webmin 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:177:    sudo mkdir -p /var/log/security 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:180:    sudo chmod 755 /var/log/webmin 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:181:    sudo chmod 755 /var/log/security 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:184:    sudo touch /var/log/webmin/miniserv.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:185:    sudo touch /var/log/webmin/webmin.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:186:    sudo touch /var/log/webmin/error.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:187:    sudo touch /var/log/security/alerts.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:190:    sudo chmod 644 /var/log/webmin/*.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:191:    sudo chmod 644 /var/log/security/*.log 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:204:        sudo mkdir -p /etc/fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:232:        sudo cp /tmp/fail2ban.conf /etc/fail2ban/jail.local 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:235:        sudo systemctl enable fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:236:        sudo systemctl start fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:263:        sudo a2enmod headers 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:264:        sudo a2enmod ssl 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:267:        sudo systemctl restart apache2 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:285:        sudo systemctl restart httpd 2>/dev/null || true
./sub_agente_logs.sh:62:        log_message "Intentos sudo fallidos hoy: $failed_sudo"
./asegurar_paneles_webmin_virtualmin.sh:207:                sudo ufw allow 22/tcp 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:208:                sudo ufw allow 10000/tcp 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:209:                sudo ufw allow 20000/tcp 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:210:                sudo ufw deny 21/tcp 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:211:                sudo ufw deny 23/tcp 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:216:                sudo firewall-cmd --permanent --add-service=ssh 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:217:                sudo firewall-cmd --permanent --add-port=10000/tcp 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:218:                sudo firewall-cmd --permanent --add-port=20000/tcp 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:219:                sudo firewall-cmd --permanent --remove-service=ftp 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:220:                sudo firewall-cmd --permanent --remove-service=telnet 2>/dev/null || true
./asegurar_paneles_webmin_virtualmin.sh:221:                sudo firewall-cmd --reload 2>/dev/null || true
./diagnostico_servidores_virtuales.sh:289:            echo "   cd webmin-* && sudo ./setup.sh"
./diagnostico_servidores_virtuales.sh:298:            echo "   sudo bash virtualmin-install.sh --bundle LAMP"
./diagnostico_servidores_virtuales.sh:306:        echo "   sudo brew services start httpd"
./diagnostico_servidores_virtuales.sh:308:        echo "   sudo systemctl start apache2 mysql bind9 postfix"
./diagnostico_servidores_virtuales.sh:309:        echo "   sudo systemctl enable apache2 mysql bind9 postfix"
./diagnostico_servidores_virtuales.sh:315:        echo "   sudo pfctl -d  # Deshabilitar firewall temporalmente"
./diagnostico_servidores_virtuales.sh:317:        echo "   sudo ufw allow 10000"
./diagnostico_servidores_virtuales.sh:318:        echo "   sudo ufw allow 80"
./diagnostico_servidores_virtuales.sh:319:        echo "   sudo ufw allow 443"
./postfix_validation_functions.sh:107:        echo "üí° Ejecute: sudo apt-get install postfix (Ubuntu/Debian)"
./postfix_validation_functions.sh:108:        echo "üí° Ejecute: sudo yum install postfix (CentOS/RHEL)"
./postfix_validation_functions.sh:124:                sudo apt-get update
./postfix_validation_functions.sh:125:                sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./postfix_validation_functions.sh:130:                    sudo dnf install -y postfix
./postfix_validation_functions.sh:132:                    sudo yum install -y postfix
./postfix_validation_functions.sh:143:        sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist 2>/dev/null || true
./test_instalacion_completa.sh:258:    echo "   sudo $SCRIPT_PATH"
./completar_seguridad_macos.sh:63:    sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on 2>/dev/null || \
./completar_seguridad_macos.sh:67:    sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/sbin/sshd 2>/dev/null || true
./completar_seguridad_macos.sh:68:    sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/sbin/apache2 2>/dev/null || true
./completar_seguridad_macos.sh:298:    local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./agente_devops_webmin.sh:208:    local cmd="sudo virtualmin list-domains --name-only 2>/dev/null || echo 'no-domains'"
./agente_devops_webmin.sh:252:        sudo mkdir -p \"\$DEST\"
./agente_devops_webmin.sh:253:        sudo virtualmin backup-domain --all-domains --dest \"\$DEST\" --all-features --newformat || true
./agente_devops_webmin.sh:283:    local hold_cmd="sudo apt-mark hold $packages"
./agente_devops_webmin.sh:334:        sudo apt-get update -y
./agente_devops_webmin.sh:335:        sudo apt-get install -y webmin usermin virtualmin virtualmin-base || true
./agente_devops_webmin.sh:336:        sudo apt-get upgrade -y
./agente_devops_webmin.sh:376:        sudo virtualmin check-config || true
./agente_devops_webmin.sh:377:        sudo virtualmin validate-domains --all-domains || true
./agente_devops_webmin.sh:394:            apachectl -k graceful || sudo systemctl reload apache2 || true
./agente_devops_webmin.sh:396:            sudo nginx -s reload || sudo systemctl reload nginx || true
./agente_devops_webmin.sh:398:        sudo systemctl restart webmin || true
./agente_devops_webmin.sh:399:        sudo systemctl restart usermin || true
./agente_devops_webmin.sh:450:        sudo virtualmin restore-domain --all-domains --source \"\$LAST\" --all-features || true
./agente_devops_webmin.sh:466:        ls -1dt */ | tail -n +8 | xargs -r sudo rm -rf
./integrar_validaciones_postfix.sh:152:        echo "üí° Ejecute: sudo apt-get install postfix (Ubuntu/Debian)"
./integrar_validaciones_postfix.sh:153:        echo "üí° Ejecute: sudo yum install postfix (CentOS/RHEL)"
./integrar_validaciones_postfix.sh:169:                sudo apt-get update
./integrar_validaciones_postfix.sh:170:                sudo DEBIAN_FRONTEND=noninteractive apt-get install -y postfix
./integrar_validaciones_postfix.sh:175:                    sudo dnf install -y postfix
./integrar_validaciones_postfix.sh:177:                    sudo yum install -y postfix
./integrar_validaciones_postfix.sh:188:        sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist 2>/dev/null || true
./integrar_validaciones_postfix.sh:309:        echo "   1. Instalar Postfix: sudo apt-get install postfix"
./integrar_validaciones_postfix.sh:520:sudo apt-get update
./integrar_validaciones_postfix.sh:521:sudo apt-get install -y postfix
./integrar_validaciones_postfix.sh:526:sudo yum install -y postfix  # o dnf install -y postfix
./integrar_validaciones_postfix.sh:532:sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist
./integrar_validaciones_postfix.sh:565:3. Instalar Postfix: `sudo apt-get install postfix`
./integrar_validaciones_postfix.sh:571:3. Reiniciar servicio: `sudo systemctl restart postfix`
./diagnostico_completo.sh:321:        if sudo -u postgres psql -c "SELECT 1;" >/dev/null 2>&1; then
./aplicar_configuraciones_seguridad.sh:160:            local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./aplicar_configuraciones_seguridad.sh:167:                log "INFO" "Para habilitar: sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on"
./aplicar_configuraciones_seguridad.sh:348:    local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./monitor_despliegues.sh:186:    local domains=$(ssh -o ConnectTimeout=10 -p "$port" "$user@$host" "sudo virtualmin list-domains --name-only 2>/dev/null" | grep -v '^$' || echo "")
./corregir_problemas_seguridad.sh:475:        echo "Intente: sudo $0 $*"
./diagnosticar_y_corregir_errores.sh:248:    if sudo mkdir -p "$webmin_dir" && sudo cp -r webmin-master/* "$webmin_dir/"; then
./diagnosticar_y_corregir_errores.sh:261:    if sudo ./setup.sh; then
./verificacion_final_autonomo.sh:224:        log_info "Para instalar Postfix: sudo apt-get install postfix (Ubuntu/Debian) o sudo yum install postfix (CentOS/RHEL)"
./verificacion_final_autonomo.sh:225:        log_info "En macOS: sudo launchctl load -w /System/Library/LaunchDaemons/org.postfix.master.plist"
./verificar_asistente_wizard.sh:57:    sudo mkdir -p "$VIRTUALMIN_CONFIG"
./verificar_asistente_wizard.sh:84:    sudo cp /tmp/virtualmin_config "$VIRTUALMIN_CONFIG/config"
./verificar_asistente_wizard.sh:85:    sudo chown $(whoami):staff "$VIRTUALMIN_CONFIG/config"
./verificar_asistente_wizard.sh:94:    sudo chown -R $(whoami):staff "$VIRTUALMIN_CONFIG"
./verificar_asistente_wizard.sh:95:    sudo chmod -R 755 "$VIRTUALMIN_CONFIG"
./verificar_asistente_wizard.sh:112:            sudo cp -r virtualmin-gpl-master/* "$WEBMIN_ROOT/"
./verificar_asistente_wizard.sh:234:        echo "admin:$password_hash:0" | sudo tee "$WEBMIN_CONFIG/miniserv.users" > /dev/null
./verificar_asistente_wizard.sh:235:        sudo chown $(whoami):staff "$WEBMIN_CONFIG/miniserv.users"
./verificar_asistente_wizard.sh:242:        echo "root: *" | sudo tee "$WEBMIN_CONFIG/webmin.acl" > /dev/null
./verificar_asistente_wizard.sh:243:        sudo chown $(whoami):staff "$WEBMIN_CONFIG/webmin.acl"
./verificar_asistente_wizard.sh:253:    sudo launchctl unload /Library/LaunchDaemons/com.webmin.webmin.plist 2>/dev/null
./verificar_asistente_wizard.sh:257:    sudo pkill -f "miniserv.pl" 2>/dev/null
./verificar_asistente_wizard.sh:261:    sudo launchctl load /Library/LaunchDaemons/com.webmin.webmin.plist
./verificar_asistente_wizard.sh:262:    sudo launchctl start com.webmin.webmin
./verificar_asistente_wizard.sh:297:        sudo cp /tmp/module.info "$WEBMIN_CONFIG/virtual-server/module.info"
./verificar_asistente_wizard.sh:410:- Reinicia Webmin: ${YELLOW}sudo launchctl restart com.webmin.webmin${NC}
./sub_agente_backup.sh:143:        sudo -u postgres pg_dumpall > "$postgres_backup" 2>/dev/null
./diagnostico_ubuntu_webmin.sh:79:            add_solution "Agregar usuario al grupo sudo: sudo usermod -aG sudo $USER"
./analisis_codigo_funciones.sh:292:        # Verificar uso de sudo sin validaci√≥n
./analisis_codigo_funciones.sh:294:            if grep -q "sudo -v\|sudo -n" "$script_file"; then
./analisis_codigo_funciones.sh:295:                log_success "Uso seguro de sudo en $(basename "$script_file")"
./analisis_codigo_funciones.sh:297:                log_warning "Uso de sudo sin validaci√≥n en $(basename "$script_file")"
./scripts/auditoria_repo.sh:61:# Uso de sudo
./scripts/auditoria_repo.sh:62:append "## Uso de sudo dentro de scripts"
./scripts/auditoria_repo.sh:93:append "- Evitar sudo dentro de scripts que ya requieren root."
./instalacion_un_comando.sh:6:# Comando √∫nico: curl -sSL https://tu-url/install.sh | sudo bash
./instalacion_un_comando.sh:170:        log "INFO" "Uso: sudo $0"
./implementar_seguridad_pro_macos.sh:114:    local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./implementar_seguridad_pro_macos.sh:120:        log "INFO" "Para habilitar: sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on"
./implementar_seguridad_pro_macos.sh:303:    local firewall_status=$(sudo /usr/libexec/ApplicationFirewall/socketfilterfw --getglobalstate 2>/dev/null || echo "unknown")
./implementar_seguridad_pro_macos.sh:361:    log "INFO" "- Habilitar firewall: sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on"
./verificacion_completa_funciones.sh:739:        echo "   ‚Ä¢ sudo ./instalacion_completa_automatica.sh  # Instalaci√≥n completa"
./verificacion_completa_funciones.sh:740:        echo "   ‚Ä¢ sudo ./verificacion_final_autonomo.sh      # Verificaci√≥n completa"
./verificacion_completa_funciones.sh:741:        echo "   ‚Ä¢ sudo systemctl status webmin               # Estado de Webmin"
./verificacion_completa_funciones.sh:742:        echo "   ‚Ä¢ sudo systemctl status apache2              # Estado de Apache"
./verificacion_completa_funciones.sh:743:        echo "   ‚Ä¢ sudo ufw status                            # Estado del firewall"
./verificacion_completa_funciones.sh:744:        echo "   ‚Ä¢ sudo apt update && sudo apt upgrade        # Actualizar sistema"
./activar_ssh_macos.sh:59:    echo "  sudo systemsetup -setremotelogin on"
./activar_ssh_macos.sh:62:    echo "  sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist"
./activar_ssh_macos.sh:94:echo "  2. Reiniciar servicio: sudo launchctl kickstart -k system/com.openssh.sshd"
./activar_ssh_macos.sh:95:echo "  3. Verificar configuraci√≥n: sudo sshd -T"
./corregir_asistente_postinstalacion.sh:104:sudo mkdir -p /usr/local/webmin
./corregir_asistente_postinstalacion.sh:105:sudo mkdir -p /etc/webmin
./corregir_asistente_postinstalacion.sh:106:sudo mkdir -p /var/log/webmin
./corregir_asistente_postinstalacion.sh:118:sudo cp -r webmin-${WEBMIN_VERSION}/* /usr/local/webmin/
./corregir_asistente_postinstalacion.sh:119:sudo chown -R root:admin /usr/local/webmin
./corregir_asistente_postinstalacion.sh:171:sudo perl /tmp/webmin_setup.pl
./corregir_asistente_postinstalacion.sh:176:sudo cp -r virtualmin-gpl-master/* /usr/local/webmin/
./corregir_asistente_postinstalacion.sh:179:sudo mkdir -p /etc/webmin/virtual-server
./corregir_asistente_postinstalacion.sh:193:sudo cp /tmp/virtualmin_config /etc/webmin/virtual-server/config
./corregir_asistente_postinstalacion.sh:208:sudo cp /tmp/webmin_start.sh /usr/local/bin/webmin_start.sh
./corregir_asistente_postinstalacion.sh:209:sudo chmod +x /usr/local/bin/webmin_start.sh
./corregir_asistente_postinstalacion.sh:244:sudo cp /tmp/com.webmin.webmin.plist /Library/LaunchDaemons/
./corregir_asistente_postinstalacion.sh:245:sudo chown root:wheel /Library/LaunchDaemons/com.webmin.webmin.plist
./corregir_asistente_postinstalacion.sh:250:sudo mkdir -p /etc/webmin/webmin-users
./corregir_asistente_postinstalacion.sh:251:echo "root:x:$(id -u):$(id -g):Root User:/Users/$(whoami):/bin/bash" | sudo tee /etc/webmin/webmin-users/root > /dev/null
./corregir_asistente_postinstalacion.sh:254:echo "root: *" | sudo tee /etc/webmin/webmin.acl > /dev/null
./corregir_asistente_postinstalacion.sh:259:sudo launchctl load /Library/LaunchDaemons/com.webmin.webmin.plist
./corregir_asistente_postinstalacion.sh:260:sudo launchctl start com.webmin.webmin
./corregir_asistente_postinstalacion.sh:327:sudo perl /tmp/reset_wizard.pl
./orquestador_verificacion_pro.sh:4:#   sudo bash orquestador_verificacion_pro.sh            # Verifica todo sin cambios
./orquestador_verificacion_pro.sh:30:    err "Se requieren privilegios de root. Usa: sudo $0"
./activar_ssh_forzado.sh:18:echo "Comando: sudo systemsetup -setremotelogin on"
./activar_ssh_forzado.sh:32:    echo "Comando: sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist"
./activar_ssh_forzado.sh:58:echo "  sudo systemsetup -setremotelogin on"
./activar_ssh_forzado.sh:61:echo "  sudo launchctl enable system/com.openssh.sshd"
./activar_ssh_forzado.sh:62:echo "  sudo launchctl bootstrap system /System/Library/LaunchDaemons/ssh.plist"
./activar_ssh_forzado.sh:87:echo "sudo log show --predicate 'process == \"sshd\"' --last 30m"
./sub_agente_ingeniero_codigo.sh:143:        log_info "Ejecutar: sudo $0"
./sub_agente_ingeniero_codigo.sh:767:    echo "   sudo systemsetup -setremotelogin on"
./sub_agente_ingeniero_codigo.sh:770:    echo "   sudo launchctl load -w /System/Library/LaunchDaemons/ssh.plist"
```

## Uso de eval
```
./virtualmin-gpl-master/setup-repos.sh:171:  if eval "$ping_cmd" >/dev/null 2>&1; then
./virtualmin-gpl-master/setup-repos.sh:179:    if eval "$http_cmd" >/dev/null 2>&1; then
./sub_agente_especialista_codigo.sh:795:    eval "$webmin_audit"
./sub_agente_especialista_codigo.sh:796:    eval "$virtualmin_audit"  
./sub_agente_especialista_codigo.sh:797:    eval "$code_audit"
./agente_devops_webmin.sh:118:        if eval "$cmd"; then
./verificar_asistente_wizard.sh:159:eval {
./scripts/auditoria_repo.sh:71:find . -type f -name "*.sh" -exec grep -nH -E '(^|[^[:alnum:]_])eval([[:space:]]|\()' {} + >> "$out" 2>/dev/null || true
./scripts/auditoria_repo.sh:94:append "- Revisar usos de eval y rm -rf."
./configurar_agente_devops.sh:61:    eval "$var_name='$input'"
./verificar_pro_simple.sh:20:    if eval "$comando" >/dev/null 2>&1; then
```

## Uso de rm -rf
```
./virtualmin-gpl-master/setup-repos.sh:413:    rm -rf "$VIRTUALMIN_INSTALL_TEMPDIR"
./virtualmin-gpl-master/setup-repos.sh:612:    rm -rf "$VIRTUALMIN_INSTALL_TEMPDIR"
./instalar.sh:193:    rm -rf "$TEMP_DIR" 2>/dev/null || true
./desinstalar.sh:115:            $SUDO rm -rf "$dir"
./desinstalar.sh:259:    rm -rf /tmp/webmin_install 2>/dev/null || true
./desinstalar.sh:260:    rm -rf /tmp/webmin_virtualmin_install 2>/dev/null || true
./instalar_webmin_virtualmin.sh:126:    rm -rf "$INSTALL_DIR"
./instalar_webmin_virtualmin.sh:148:            rm -rf Wedmin-Y-Virtualmin-main repo.zip
./instalar_webmin_virtualmin.sh:234:rm -rf "$INSTALL_DIR"
./sub_agente_verificador_backup.sh:214:    rm -rf "$BACKUP_TEST_DIR" "$test_backup_dest"
./configuracion_post_instalacion.sh:340:rm -rf "$BACKUP_DIR/$DATE"
./actualizar_sistema.sh:166:                rm -rf "$THEME_DIR"
./actualizar_sistema.sh:242:        rm -rf "$THEME_DIR"
./actualizar_sistema.sh:249:        rm -rf "$VIRTUALMIN_DIR"
./actualizar_sistema.sh:256:        rm -rf "$CONFIG_DIR"
./actualizar_sistema.sh:293:    rm -rf /tmp/authentic-theme-master
./agente_devops_webmin.sh:466:        ls -1dt */ | tail -n +8 | xargs -r sudo rm -rf
./diagnosticar_y_corregir_errores.sh:271:    rm -rf "$temp_dir"
./scripts/auditoria_repo.sh:75:# Uso de rm -rf
./instalacion_un_comando.sh:87:        rm -rf "$TEMP_DIR" 2>/dev/null || true
./instalacion_un_comando.sh:213:        rm -rf "$TEMP_DIR"
./instalacion_un_comando.sh:495:            rm -rf "$THEME_DEST"
./instalacion_un_comando.sh:895:        rm -rf "$TEMP_DIR"
./authentic-theme-master/theme-update.sh:56:      rm -rf "$DIR/.~authentic-theme"
./authentic-theme-master/theme-update.sh:153:              rm -rf "$DIR/.~authentic-theme"
./authentic-theme-master/theme-update.sh:169:        rm -rf "$DIR/authentic-theme"/*
./authentic-theme-master/theme-update.sh:171:        rm -rf "$DIR/.~authentic-theme"
./authentic-theme-master/theme-update.sh:195:        rm -rf "$DIR/.~authentic-theme"
./optimizacion_servidor_autonomo.sh:733:        rm -rf /var/cache/apache2/*
./corregir_asistente_postinstalacion.sh:363:rm -rf /tmp/webmin-*
```

## Uso de systemctl
```
./virtualmin-gpl-master/setup-repos.sh:997:    if systemctl restart chronyd 1>/dev/null 2>&1; then
./virtualmin-gpl-master/setup-repos.sh:999:    elif systemctl restart systemd-timesyncd 1>/dev/null 2>&1; then
./virtualmin-gpl-master/setup-repos.sh:1011:    if systemctl restart chronyd 1>/dev/null 2>&1; then
./virtualmin-gpl-master/setup-repos.sh:1013:    elif systemctl restart systemd-timesyncd 1>/dev/null 2>&1; then
./desinstalar.sh:90:            if systemctl is-active --quiet webmin 2>/dev/null; then
./desinstalar.sh:91:                $SUDO systemctl stop webmin
./desinstalar.sh:94:            if systemctl is-enabled --quiet webmin 2>/dev/null; then
./desinstalar.sh:95:                $SUDO systemctl disable webmin
./desinstalar.sh:131:                $SUDO systemctl daemon-reload
./desinstalar.sh:230:            $SUDO systemctl stop mysql apache2 2>/dev/null || true
./desinstalar.sh:231:            $SUDO systemctl disable mysql apache2 2>/dev/null || true
./desinstalar.sh:239:            $SUDO systemctl stop mysqld httpd 2>/dev/null || true
./desinstalar.sh:240:            $SUDO systemctl disable mysqld httpd 2>/dev/null || true
./verificar_seguridad_completa.sh:110:        systemctl is-active --quiet "$service" 2>/dev/null
./monitoreo_sistema.sh:99:        if systemctl list-unit-files | grep -q "^$service.service"; then
./monitoreo_sistema.sh:100:            if ! systemctl is-active --quiet "$service"; then
./monitoreo_sistema.sh:293:    systemctl status webmin --no-pager -l >> "$report_file" 2>/dev/null || echo "Webmin: No disponible" >> "$report_file"
./monitoreo_sistema.sh:401:    systemctl daemon-reload
./monitoreo_sistema.sh:402:    systemctl enable webmin-monitor.timer
./monitoreo_sistema.sh:403:    systemctl start webmin-monitor.timer
./monitoreo_sistema.sh:446:            systemctl status webmin-monitor.timer --no-pager
./instalar_integracion.sh:154:    if systemctl is-active --quiet webmin; then
./instalar_integracion.sh:156:        systemctl restart webmin
./instalar_integracion.sh:232:    if ! systemctl is-active --quiet webmin 2>/dev/null && ! service webmin status >/dev/null 2>&1; then
./sub_agente_monitoreo.sh:57:        if systemctl is-active --quiet "$service"; then
./sub_agente_monitoreo.sh:60:            if systemctl is-enabled --quiet "$service" 2>/dev/null; then
./sub_agente_monitoreo.sh:145:        systemctl --type=service --state=active | grep -E "(webmin|apache|nginx|mysql|postgresql|postfix|bind|ssh)"
./orquestador_seguridad_pro.sh:61:  if have_cmd systemctl && systemctl list-unit-files | grep -q "^${svc}\.service"; then
./orquestador_seguridad_pro.sh:62:    systemctl enable "$svc" >/dev/null 2>&1 || true
./orquestador_seguridad_pro.sh:63:    systemctl start "$svc"  >/dev/null 2>&1 || true
./orquestador_seguridad_pro.sh:64:    if systemctl is-active --quiet "$svc" 2>/dev/null; then
./orquestador_seguridad_pro.sh:160:    systemctl enable fail2ban >/dev/null 2>&1 || true
./orquestador_seguridad_pro.sh:161:    systemctl restart fail2ban >/dev/null 2>&1 || true
./orquestador_seguridad_pro.sh:193:    systemctl reload apache2 >/dev/null 2>&1 || systemctl restart apache2 >/dev/null 2>&1 || true
./orquestador_seguridad_pro.sh:223:    systemctl reload apache2 >/dev/null 2>&1 || systemctl restart apache2 >/dev/null 2>&1 || true
./orquestador_seguridad_pro.sh:236:    systemctl enable unattended-upgrades >/dev/null 2>&1 || true
./orquestador_seguridad_pro.sh:237:    systemctl start unattended-upgrades  >/dev/null 2>&1 || true
./orquestador_seguridad_pro.sh:282:      systemctl is-active webmin apache2 nginx postfix dovecot fail2ban clamav-daemon clamav-freshclam spamassassin mysql mariadb 2>/dev/null || true
./verificar_funciones_pro_nativas.sh:226:        if command -v "$module" >/dev/null 2>&1 || systemctl is-active --quiet "$module" 2>/dev/null; then
./verificar_funciones_pro_nativas.sh:289:        if systemctl is-active --quiet "$service" 2>/dev/null || command -v "$service" >/dev/null 2>&1; then
./verificar_funciones_pro_nativas.sh:321:        if systemctl is-active --quiet "$service" 2>/dev/null || command -v "$service" >/dev/null 2>&1; then
./verificar_funciones_pro_nativas.sh:424:    if systemctl is-active --quiet apache2 2>/dev/null; then
./verificar_funciones_pro_nativas.sh:434:    if systemctl is-active --quiet mysql 2>/dev/null; then
./implementar_seguridad_pro_completa.sh:131:    systemctl enable firewalld
./implementar_seguridad_pro_completa.sh:132:    systemctl start firewalld
./implementar_seguridad_pro_completa.sh:246:            systemctl enable fail2ban
./implementar_seguridad_pro_completa.sh:247:            systemctl restart fail2ban
./implementar_seguridad_pro_completa.sh:283:            systemctl enable fail2ban
./implementar_seguridad_pro_completa.sh:284:            systemctl restart fail2ban
./implementar_seguridad_pro_completa.sh:338:    systemctl restart ssh
./implementar_seguridad_pro_completa.sh:368:        systemctl restart apache2
./implementar_seguridad_pro_completa.sh:388:        systemctl restart httpd
./implementar_seguridad_pro_completa.sh:524:    if systemctl is-active --quiet ssh; then
./implementar_seguridad_pro_completa.sh:531:    if systemctl is-active --quiet apache2 || systemctl is-active --quiet httpd; then
./implementar_seguridad_pro_completa.sh:538:    if systemctl is-active --quiet mysql || systemctl is-active --quiet mariadb; then
./verificar_postfix_webmin.sh:137:            if systemctl is-active postfix >/dev/null 2>&1; then
./verificar_postfix_webmin.sh:139:            elif systemctl is-enabled postfix >/dev/null 2>&1; then
./verificar_postfix_webmin.sh:141:                log_info "Para iniciar: sudo systemctl start postfix"
./verificar_postfix_webmin.sh:144:                log_info "Para habilitar: sudo systemctl enable postfix"
./configuracion_post_instalacion.sh:260:        systemctl enable firewalld >/dev/null 2>&1
./configuracion_post_instalacion.sh:261:        systemctl start firewalld >/dev/null 2>&1
./configuracion_post_instalacion.sh:436:$(systemctl list-unit-files | grep -E "(webmin|apache|httpd|mysql|mariadb)" | grep enabled || echo "Verificar servicios manualmente")
./configuracion_post_instalacion.sh:462:- Verificar estado: systemctl status webmin
./configuracion_post_instalacion.sh:494:    systemctl restart apache2 >/dev/null 2>&1 || systemctl restart httpd >/dev/null 2>&1
./configuracion_post_instalacion.sh:495:    systemctl restart mysql >/dev/null 2>&1 || systemctl restart mariadb >/dev/null 2>&1
./configuracion_post_instalacion.sh:496:    systemctl restart webmin >/dev/null 2>&1
./reparador_ubuntu_webmin.sh:210:    systemctl enable apache2
./reparador_ubuntu_webmin.sh:215:    systemctl enable mysql
./reparador_ubuntu_webmin.sh:226:    systemctl enable postfix
./reparador_ubuntu_webmin.sh:231:    systemctl enable named
./reparador_ubuntu_webmin.sh:236:    systemctl enable dovecot
./reparador_ubuntu_webmin.sh:241:    systemctl enable fail2ban
./reparador_ubuntu_webmin.sh:311:        if systemctl enable "$service" 2>/dev/null && systemctl start "$service" 2>/dev/null; then
./reparador_ubuntu_webmin.sh:312:            if systemctl is-active --quiet "$service"; then
./reparador_ubuntu_webmin.sh:339:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./reparador_ubuntu_webmin.sh:402:    echo "Reiniciar Webmin: systemctl restart webmin"
./reparador_ubuntu_webmin.sh:404:    echo "Estado servicios: systemctl status webmin"
./verificar_actualizaciones.sh:135:    if systemctl is-active --quiet webmin 2>/dev/null; then
./verificar_actualizaciones.sh:144:    if systemctl is-active --quiet apache2 2>/dev/null; then
./verificar_actualizaciones.sh:146:    elif systemctl is-active --quiet httpd 2>/dev/null; then
./verificar_actualizaciones.sh:153:    if systemctl is-active --quiet mysql 2>/dev/null; then
./verificar_actualizaciones.sh:155:    elif systemctl is-active --quiet mariadb 2>/dev/null; then
./verificar_actualizaciones.sh:336:        echo -e "   ‚öôÔ∏è  Inicia el servicio Webmin: ${BLUE}sudo systemctl start webmin${NC}"
./completar_seguridad_webmin_virtualmin.sh:149:                sudo systemctl enable firewalld 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:150:                sudo systemctl start firewalld 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:235:        sudo systemctl enable fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:236:        sudo systemctl start fail2ban 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:267:        sudo systemctl restart apache2 2>/dev/null || true
./completar_seguridad_webmin_virtualmin.sh:285:        sudo systemctl restart httpd 2>/dev/null || true
./diagnostico_servidores_virtuales.sh:162:            if systemctl is-active --quiet "$service" 2>/dev/null; then
./diagnostico_servidores_virtuales.sh:308:        echo "   sudo systemctl start apache2 mysql bind9 postfix"
./diagnostico_servidores_virtuales.sh:309:        echo "   sudo systemctl enable apache2 mysql bind9 postfix"
./sub_agente_optimizador.sh:381:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_optimizador.sh:383:            systemctl restart "$service"
./sub_agente_optimizador.sh:387:            if systemctl is-active --quiet "$service"; then
./sub_agente_optimizador.sh:427:            if systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_especialista_codigo.sh:114:    if ! systemctl is-active --quiet webmin 2>/dev/null; then
./sub_agente_especialista_codigo.sh:115:        if systemctl is-enabled --quiet webmin 2>/dev/null; then
./sub_agente_especialista_codigo.sh:191:        if ! systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_especialista_codigo.sh:289:                systemctl start webmin
./sub_agente_especialista_codigo.sh:293:                systemctl enable webmin
./sub_agente_especialista_codigo.sh:294:                systemctl start webmin
./sub_agente_especialista_codigo.sh:431:    systemctl restart webmin
./sub_agente_especialista_codigo.sh:460:    systemctl restart webmin
./sub_agente_especialista_codigo.sh:559:    systemctl enable "$service"
./sub_agente_especialista_codigo.sh:560:    systemctl start "$service"
./sub_agente_especialista_codigo.sh:562:    if systemctl is-active --quiet "$service"; then
./sub_agente_especialista_codigo.sh:580:        systemctl restart apache2
./sub_agente_especialista_codigo.sh:598:        systemctl restart postfix
./sub_agente_especialista_codigo.sh:608:    systemctl start mysql
./sub_agente_especialista_codigo.sh:682:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_especialista_codigo.sh:722:        if systemctl is-active --quiet webmin 2>/dev/null; then
./sub_agente_especialista_codigo.sh:743:            if systemctl is-active --quiet "$service" 2>/dev/null; then
./coordinador_sub_agentes.sh:434:    systemctl daemon-reload
./coordinador_sub_agentes.sh:435:    systemctl enable sub-agentes-webmin.service
./coordinador_sub_agentes.sh:438:    log_message "Usar: systemctl {start|stop|status} sub-agentes-webmin"
./instalador_webmin_virtualmin_corregido.sh:315:        systemctl enable apache2
./instalador_webmin_virtualmin_corregido.sh:322:        systemctl enable mysql
./instalador_webmin_virtualmin_corregido.sh:352:        systemctl stop webmin 2>/dev/null || true
./instalador_webmin_virtualmin_corregido.sh:525:        if ! systemctl enable "$service" 2>/dev/null; then
./instalador_webmin_virtualmin_corregido.sh:531:        if ! systemctl start "$service"; then
./instalador_webmin_virtualmin_corregido.sh:541:            if systemctl is-active --quiet "$service"; then
./instalador_webmin_virtualmin_corregido.sh:551:                systemctl status "$service" --no-pager || true
./instalador_webmin_virtualmin_corregido.sh:660:    systemctl --type=service --state=active | grep -E "(webmin|apache|mysql)" || echo "Ver con: systemctl status webmin"
./instalador_webmin_virtualmin_corregido.sh:672:    echo "Reiniciar Webmin: systemctl restart webmin"
./instalador_webmin_virtualmin_corregido.sh:674:    echo "Estado: systemctl status webmin"
./actualizar_sistema.sh:269:    if systemctl is-active --quiet webmin; then
./actualizar_sistema.sh:270:        systemctl restart webmin
./actualizar_sistema.sh:278:    if systemctl is-active --quiet apache2; then
./actualizar_sistema.sh:279:        systemctl restart apache2
./actualizar_sistema.sh:281:    elif systemctl is-active --quiet httpd; then
./actualizar_sistema.sh:282:        systemctl restart httpd
./agente_devops_webmin.sh:394:            apachectl -k graceful || sudo systemctl reload apache2 || true
./agente_devops_webmin.sh:396:            sudo nginx -s reload || sudo systemctl reload nginx || true
./agente_devops_webmin.sh:398:        sudo systemctl restart webmin || true
./agente_devops_webmin.sh:399:        sudo systemctl restart usermin || true
./integrar_validaciones_postfix.sh:571:3. Reiniciar servicio: `sudo systemctl restart postfix`
./diagnostico_completo.sh:101:        if systemctl list-unit-files 2>/dev/null | grep -q "^$service.service" || \
./diagnostico_completo.sh:104:            if systemctl is-active --quiet "$service" 2>/dev/null || \
./diagnostico_completo.sh:342:        if systemctl is-active --quiet "$apache_cmd" 2>/dev/null; then
./diagnostico_completo.sh:366:        if systemctl is-active --quiet nginx 2>/dev/null; then
./monitor_despliegues.sh:145:            systemctl is-active apache2 >/dev/null 2>&1 && echo 'OK' || echo 'FAIL'
./monitor_despliegues.sh:147:            systemctl is-active nginx >/dev/null 2>&1 && echo 'OK' || echo 'FAIL'
./corregir_problemas_seguridad.sh:123:    if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:124:        systemctl is-active --quiet "$service_name" 2>/dev/null
./corregir_problemas_seguridad.sh:352:        if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:353:            systemctl list-units --type=service --state=running | grep -E "webmin|apache|nginx|mysql|mariadb|postgresql|ssh|fail2ban" >> "$REPORT_FILE"
./corregir_problemas_seguridad.sh:787:                if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:788:                    systemctl restart webmin
./corregir_problemas_seguridad.sh:1001:            if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1002:                systemctl restart "$APACHE_CMD"
./corregir_problemas_seguridad.sh:1148:            if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1149:                systemctl restart nginx
./corregir_problemas_seguridad.sh:1273:            if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1274:                systemctl restart "$SERVICE_NAME"
./corregir_problemas_seguridad.sh:1441:            if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1442:                systemctl restart "$SERVICE_NAME"
./corregir_problemas_seguridad.sh:1532:                    systemctl enable --now firewalld
./corregir_problemas_seguridad.sh:1909:                if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1910:                    systemctl restart fail2ban
./corregir_problemas_seguridad.sh:1917:                if command -v systemctl &> /dev/null; then
./corregir_problemas_seguridad.sh:1918:                    systemctl enable --now fail2ban
./verificacion_final_autonomo.sh:79:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_final_autonomo.sh:80:            local status=$(systemctl is-enabled "$service" 2>/dev/null || echo "disabled")
./verificacion_final_autonomo.sh:308:        if systemctl is-active --quiet firewalld; then
./verificacion_final_autonomo.sh:433:        if systemctl is-active --quiet fail2ban; then
./servidor_publico_autonomo.sh:116:        systemctl restart network
./servidor_publico_autonomo.sh:222:    systemctl enable bind9 || systemctl enable named
./servidor_publico_autonomo.sh:223:    systemctl restart bind9 || systemctl restart named
./servidor_publico_autonomo.sh:395:    systemctl enable apache2 || systemctl enable httpd
./servidor_publico_autonomo.sh:396:    systemctl restart apache2 || systemctl restart httpd
./servidor_publico_autonomo.sh:514:    systemctl enable postfix dovecot opendkim
./servidor_publico_autonomo.sh:515:    systemctl restart postfix dovecot opendkim bind9
./servidor_publico_autonomo.sh:547:        systemctl enable firewalld
./servidor_publico_autonomo.sh:548:        systemctl start firewalld
./servidor_publico_autonomo.sh:613:        systemctl reload apache2
./servidor_publico_autonomo.sh:626:        systemctl reload postfix
./servidor_publico_autonomo.sh:631:    systemctl enable fail2ban
./servidor_publico_autonomo.sh:632:    systemctl start fail2ban
./servidor_publico_autonomo.sh:653:    if systemctl is-active --quiet "$service" 2>/dev/null; then
./agregar_funciones_pro_faltantes.sh:161:            systemctl enable firewalld
./agregar_funciones_pro_faltantes.sh:162:            systemctl start firewalld
./agregar_funciones_pro_faltantes.sh:207:            systemctl enable dovecot
./agregar_funciones_pro_faltantes.sh:208:            systemctl restart dovecot
./agregar_funciones_pro_faltantes.sh:223:            systemctl enable dovecot
./agregar_funciones_pro_faltantes.sh:224:            systemctl restart dovecot
./agregar_funciones_pro_faltantes.sh:255:            systemctl enable spamassassin
./agregar_funciones_pro_faltantes.sh:256:            systemctl start spamassassin
./agregar_funciones_pro_faltantes.sh:266:            systemctl enable spamassassin
./agregar_funciones_pro_faltantes.sh:267:            systemctl start spamassassin
./agregar_funciones_pro_faltantes.sh:300:            systemctl reload apache2
./diagnostico_ubuntu_webmin.sh:237:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./diagnostico_ubuntu_webmin.sh:240:            if systemctl is-enabled --quiet "$service" 2>/dev/null; then
./diagnostico_ubuntu_webmin.sh:242:                add_solution "Iniciar servicio: systemctl start $service"
./diagnostico_ubuntu_webmin.sh:246:                    add_solution "Habilitar e iniciar: systemctl enable --now $service"
./verificador_servicios.sh:28:    if ! systemctl list-unit-files | grep -q "^${service_name}\.service" 2>/dev/null; then
./verificador_servicios.sh:34:    if systemctl is-active --quiet "$service_name" 2>/dev/null; then
./verificador_servicios.sh:59:        if systemctl is-enabled --quiet "$service_name" 2>/dev/null; then
./verificador_servicios.sh:316:if ! systemctl is-active --quiet webmin 2>/dev/null; then
./scripts/auditoria_repo.sh:82:# Uso de systemctl
./generar_informe_seguridad_completo.sh:310:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:311:            if systemctl is-active --quiet $APACHE_CMD; then
./generar_informe_seguridad_completo.sh:423:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:424:            if systemctl is-active --quiet nginx; then
./generar_informe_seguridad_completo.sh:523:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:524:            if systemctl is-active --quiet mysql || systemctl is-active --quiet mariadb; then
./generar_informe_seguridad_completo.sh:599:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:600:            if systemctl is-active --quiet postgresql; then
./generar_informe_seguridad_completo.sh:680:        if systemctl is-active --quiet firewalld; then
./generar_informe_seguridad_completo.sh:761:    elif ! (systemctl is-active --quiet firewalld 2>/dev/null || ufw status | grep -q "Status: active" || (command -v iptables &> /dev/null && [ "$(iptables -L -n | grep -v "Chain" | grep -v "target" | grep -v "^$" | wc -l)" -gt 0 ]) || (command -v pfctl &> /dev/null && pfctl -s info | grep -q "Status: Enabled")); then
./generar_informe_seguridad_completo.sh:787:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:788:            if systemctl is-active --quiet sshd; then
./generar_informe_seguridad_completo.sh:1053:        if command -v systemctl &> /dev/null; then
./generar_informe_seguridad_completo.sh:1054:            if systemctl is-enabled $service &>/dev/null; then
./generar_informe_seguridad_completo.sh:1055:                if systemctl is-active --quiet $service; then
./generar_informe_seguridad_completo.sh:1062:            elif systemctl is-enabled $service &>/dev/null; then
./instalacion_un_comando.sh:91:    systemctl start apache2 2>/dev/null || true
./instalacion_un_comando.sh:92:    systemctl start mysql 2>/dev/null || true
./instalacion_un_comando.sh:389:    if systemctl is-active --quiet webmin; then
./instalacion_un_comando.sh:393:        systemctl enable webmin
./instalacion_un_comando.sh:394:        systemctl start webmin
./instalacion_un_comando.sh:396:        if systemctl is-active --quiet webmin; then
./instalacion_un_comando.sh:503:        systemctl restart webmin
./instalacion_un_comando.sh:529:    systemctl enable --now spamassassin >/dev/null 2>&1 || systemctl enable --now spamd >/dev/null 2>&1 || true
./instalacion_un_comando.sh:532:    systemctl enable --now clamav-freshclam >/dev/null 2>&1 || true
./instalacion_un_comando.sh:533:    systemctl enable --now clamav-daemon >/dev/null 2>&1 || true
./instalacion_un_comando.sh:546:    systemctl enable --now opendkim >/dev/null 2>&1 || true
./instalacion_un_comando.sh:574:        systemctl restart postfix >/dev/null 2>&1 || true
./instalacion_un_comando.sh:596:    systemctl enable --now fail2ban >/dev/null 2>&1 || true
./instalacion_un_comando.sh:599:    systemctl enable --now dovecot >/dev/null 2>&1 || true
./instalacion_un_comando.sh:646:    systemctl enable --now redis-server >/dev/null 2>&1 || true
./instalacion_un_comando.sh:647:    systemctl enable --now memcached >/dev/null 2>&1 || true
./instalacion_un_comando.sh:651:    systemctl enable --now php7.4-fpm >/dev/null 2>&1 || true
./instalacion_un_comando.sh:652:    systemctl enable --now php8.1-fpm >/dev/null 2>&1 || true
./instalacion_un_comando.sh:653:    systemctl enable --now php8.2-fpm >/dev/null 2>&1 || true
./instalacion_un_comando.sh:656:    systemctl restart apache2 >/dev/null 2>&1 || true
./instalacion_un_comando.sh:686:    systemctl restart webmin
./instalacion_un_comando.sh:710:    if systemctl is-active --quiet mysql; then
./instalacion_un_comando.sh:725:            systemctl restart mysql
./instalacion_un_comando.sh:739:            systemctl restart mysql
./instalacion_un_comando.sh:747:    if systemctl is-active --quiet apache2; then
./instalacion_un_comando.sh:768:        systemctl restart apache2
./instalacion_un_comando.sh:785:        if systemctl is-active --quiet "$service"; then
./instalacion_un_comando.sh:938:        if ! systemctl is-active --quiet "$service"; then
./instalacion_un_comando.sh:940:            systemctl restart "$service" || service "$service" restart || true
./instalacion_un_comando.sh:942:            if systemctl is-active --quiet "$service"; then
./revision_completa_sistema.sh:225:                if systemctl is-active "$service" >/dev/null 2>&1; then
./revision_completa_sistema.sh:227:                elif systemctl is-enabled "$service" >/dev/null 2>&1; then
./verificacion_completa_funciones.sh:172:            if systemctl list-unit-files | grep -q "^$service.service"; then
./verificacion_completa_funciones.sh:173:                if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_completa_funciones.sh:174:                    local status=$(systemctl is-enabled "$service" 2>/dev/null || echo "unknown")
./verificacion_completa_funciones.sh:191:                    if systemctl list-unit-files | grep -q "^$service.service"; then
./verificacion_completa_funciones.sh:192:                        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_completa_funciones.sh:741:        echo "   ‚Ä¢ sudo systemctl status webmin               # Estado de Webmin"
./verificacion_completa_funciones.sh:742:        echo "   ‚Ä¢ sudo systemctl status apache2              # Estado de Apache"
./verificar_instalacion_un_comando.sh:71:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificar_instalacion_un_comando.sh:72:            local status=$(systemctl is-enabled "$service" 2>/dev/null)
./verificar_instalacion_un_comando.sh:196:    if systemctl is-active --quiet apache2; then
./verificar_instalacion_un_comando.sh:213:    if systemctl is-active --quiet mysql; then
./verificar_instalacion_un_comando.sh:250:    if systemctl is-active --quiet postfix; then
./verificar_instalacion_un_comando.sh:264:    if systemctl is-active --quiet dovecot 2>/dev/null; then
./optimizacion_servidor_autonomo.sh:302:    systemctl restart apache2
./optimizacion_servidor_autonomo.sh:312:    if systemctl is-active --quiet mysql 2>/dev/null; then
./optimizacion_servidor_autonomo.sh:314:    elif systemctl is-active --quiet mariadb 2>/dev/null; then
./optimizacion_servidor_autonomo.sh:324:        systemctl enable "$MYSQL_SERVICE"
./optimizacion_servidor_autonomo.sh:325:        systemctl start "$MYSQL_SERVICE"
./optimizacion_servidor_autonomo.sh:451:    systemctl restart "$MYSQL_SERVICE"
./optimizacion_servidor_autonomo.sh:528:    systemctl restart apache2
./optimizacion_servidor_autonomo.sh:656:    if ! systemctl is-active --quiet "$service" 2>/dev/null; then
./optimizacion_servidor_autonomo.sh:659:        systemctl restart "$service"
./optimizacion_servidor_autonomo.sh:660:        if systemctl is-active --quiet "$service"; then
./optimizacion_servidor_autonomo.sh:779:    systemctl restart apache2
./optimizacion_servidor_autonomo.sh:780:    systemctl restart mysql || systemctl restart mariadb
./verificar_funcionamiento_completo_ubuntu_debian.sh:92:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificar_funcionamiento_completo_ubuntu_debian.sh:242:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificar_funcionamiento_completo_ubuntu_debian.sh:264:        if systemctl is-active --quiet "$service" 2>/dev/null; then
./verificacion_rapida_estado.sh:55:    if command -v systemctl &> /dev/null; then
./verificacion_rapida_estado.sh:56:        systemctl is-active --quiet "$service_name" 2>/dev/null
./orquestador_verificacion_pro.sh:108:    if have_cmd systemctl && systemctl list-unit-files | grep -q "^${s}\.service"; then
./orquestador_verificacion_pro.sh:109:      if systemctl is-active --quiet "$s" 2>/dev/null; then
./sub_agente_actualizaciones.sh:199:        if systemctl is-enabled --quiet "$service" 2>/dev/null; then
./sub_agente_actualizaciones.sh:200:            if ! systemctl is-active --quiet "$service"; then
./sub_agente_actualizaciones.sh:205:                systemctl restart "$service" >/dev/null 2>&1
./sub_agente_actualizaciones.sh:206:                if systemctl is-active --quiet "$service"; then
./sub_agente_actualizaciones.sh:267:        systemctl --type=service --state=active | grep -E "(webmin|apache|nginx|mysql|postgresql|postfix|ssh)"
./sub_agente_ingeniero_codigo.sh:179:    if systemctl is-active --quiet "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:184:    if systemctl is-enabled --quiet "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:205:            if systemctl start "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:214:            if systemctl stop "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:223:            if systemctl restart "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:232:            if systemctl enable "$service" 2>/dev/null; then
./sub_agente_ingeniero_codigo.sh:647:        line=$(echo "$line" | sed 's/systemctl is-active --quiet/manage_service status/g')
```

## Recomendaciones r√°pidas
- A√±adir set -euo pipefail e IFS seguro en scripts listados arriba.
- Agregar require_root cuando se escriba en /etc, /var o se use systemctl.
- Evitar sudo dentro de scripts que ya requieren root.
- Revisar usos de eval y rm -rf.
