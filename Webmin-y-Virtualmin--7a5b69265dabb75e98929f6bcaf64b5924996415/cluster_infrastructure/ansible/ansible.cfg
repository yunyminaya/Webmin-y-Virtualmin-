[defaults]
# Configuración optimizada para clúster enterprise

# Inventario
inventory = inventory.ini
host_key_checking = False
retry_files_enabled = False

# Conexión SSH
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null
timeout = 30
pipelining = True

# Paralelización
forks = 50

# Logging
log_path = ./ansible.log
display_skipped_hosts = False
display_ok_hosts = True
display_failed_stderr = True

# Callbacks
callback_whitelist = profile_tasks, timer
stdout_callback = yaml

# Facts
gathering = smart
fact_caching = jsonfile
fact_caching_connection = ./facts_cache
fact_caching_timeout = 86400

# Roles
roles_path = ./roles:./roles_external

# Plugins
action_plugins = ./plugins/action
callback_plugins = ./plugins/callback
connection_plugins = ./plugins/connection
filter_plugins = ./plugins/filter
lookup_plugins = ./plugins/lookup
strategy_plugins = ./plugins/strategy
vars_plugins = ./plugins/vars

# Configuración de vault (para secrets)
vault_password_file = ~/.ansible_vault_pass

[ssh_connection]
# Optimizaciones SSH para clúster grande
control_path = ~/.ssh/ansible-%%r@%%h:%%p
control_path_dir = ~/.ssh/ansible-cp
pipelining = True
scp_if_ssh = True

[accelerate]
# Aceleración para despliegues masivos
accelerate_port = 5099
accelerate_timeout = 30
accelerate_connect_timeout = 5.0

[paramiko_connection]
# Fallback para conexiones problemáticas
record_host_keys = False

[persistent_connection]
# Conexiones persistentes para mejor performance
connect_timeout = 30
connect_retry_timeout = 15
command_timeout = 30